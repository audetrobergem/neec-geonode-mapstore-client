(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[65190,47310],{460604:(e,t,r)=>{"use strict";r.d(t,{hn:()=>n,yg:()=>o,vD:()=>i,jJ:()=>a,oy:()=>c,am:()=>u,W:()=>l,B1:()=>s,YP:()=>f,fU:()=>p,cY:()=>y});var n="ADDITIONALLAYER:ADD_ADDITIONAL_LAYERS",o="ADDITIONALLAYER:REMOVE_ADDITIONAL_LAYER",i="ADDITIONALLAYER:REMOVE_ALL_ADDITIONAL_LAYERS",a="ADDITIONALLAYER:UPDATE_ADDITIONAL_LAYER",c="ADDITIONALLAYER:UPDATE_OPTIONS_BY_OWNER",u="ADDITIONALLAYER:MERGE_OPTIONS_BY_OWNER",l=function(e,t){return{type:a,id:e,owner:t,actionType:arguments.length>2&&void 0!==arguments[2]?arguments[2]:"override",options:arguments.length>3?arguments[3]:void 0}},s=function(e,t){return{type:c,owner:e,options:t}},f=function(e,t){return{type:u,owner:e,options:t}},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,r=e.owner;return{type:o,id:t,owner:r}},y=function(e){return{type:i,owner:e}}},801550:(e,t,r)=>{"use strict";r.d(t,{pP:()=>n,TR:()=>o,N7:()=>i,mq:()=>a,uv:()=>c,Qy:()=>u,IL:()=>l,Li:()=>s,OW:()=>f,ZO:()=>p,Um:()=>y,TF:()=>d,Ls:()=>m,Ec:()=>b,Eu:()=>v,JJ:()=>h,nZ:()=>g,YD:()=>O,GI:()=>S,Jb:()=>E,Uh:()=>_,e$:()=>P,eh:()=>w,$j:()=>I,bJ:()=>j,Mk:()=>T,xy:()=>C,o6:()=>k,NH:()=>R,FP:()=>N,Mo:()=>A,sO:()=>x,Px:()=>D,hd:()=>F,y9:()=>M,Ju:()=>L,BV:()=>V,SO:()=>Z,H0:()=>G,$X:()=>B,ou:()=>U,NE:()=>z,Lq:()=>K,aN:()=>Y});var n="CHANGE_MAP_VIEW",o="CLICK_ON_MAP",i="CHANGE_MOUSE_POINTER",a="CHANGE_ZOOM_LVL",c="PAN_TO",u="ZOOM_TO_EXTENT",l="ZOOM_TO_POINT",s="CHANGE_MAP_CRS",f="CHANGE_MAP_SCALES",p="CHANGE_MAP_STYLE",y="CHANGE_ROTATION",d="CREATION_ERROR_LAYER",m="UPDATE_VERSION",b="INIT_MAP",v="RESIZE_MAP",h="CHANGE_MAP_LIMITS",g="SET_MAP_RESOLUTIONS",O="REGISTER_EVENT_LISTENER",S="UNREGISTER_EVENT_LISTENER",E="MOUSE_MOVE",_="MOUSE_OUT",P="MAP:MAP_PLUGIN_LOAD",w="MAP:ORIENTATION",I="MAP:UPDATE_MAP_VIEW",j="MAP:UPDATE_MAP_OPTIONS";function T(e,t,r,n){return{type:P,mapType:t,loading:e,loaded:r,error:n}}function C(e,t,r){return{type:l,pos:e,zoom:t,crs:r}}function k(e,t,r,o,i,a,c,u){return{type:n,center:e,zoom:t,bbox:r,size:o,mapStateSource:i,projection:a,viewerOptions:c,resolution:u}}function R(e){return{type:s,crs:e}}function N(e,t){return{type:o,point:e,layer:t}}function A(e){return{type:i,pointer:e}}function x(e,t){return{type:a,zoom:e,mapStateSource:t}}function D(e,t,r,n){return{type:u,extent:e,crs:t,maxZoom:r,options:n}}function F(e,t){return{type:p,style:e,mapStateSource:t}}function M(e){return{type:b,disableFeedbackMask:e}}function L(){return{type:v}}function V(e){var t=e.restrictedExtent,r=e.crs,n=e.minZoom;return{type:h,restrictedExtent:t,crs:r,minZoom:n}}function Z(e){return{type:g,resolutions:e}}var G=function(e,t){return{type:O,eventName:e,toolName:t}},B=function(e,t){return{type:S,eventName:e,toolName:t}},U=function(e){return{type:E,position:e}},z=function(){return{type:_}},K=function(e){return{type:w,orientation:e}},Y=function(e){return{type:j,configUpdate:e}}},921914:(e,t,r)=>{"use strict";r.d(t,{XL:()=>o,km:()=>i,Ih:()=>a,Xw:()=>c,Pn:()=>u,DZ:()=>l,e8:()=>s,E0:()=>f,F9:()=>p,X_:()=>y,pb:()=>d,Re:()=>m,ih:()=>b,xy:()=>v,jL:()=>h,oz:()=>g,ph:()=>O,lF:()=>S,gG:()=>E,cb:()=>_,GI:()=>P,B1:()=>w,fv:()=>I,gc:()=>j,zX:()=>T,ZF:()=>C,Zb:()=>k,DW:()=>R,Xp:()=>N,Fm:()=>A,sV:()=>x,LU:()=>D,XP:()=>F,WU:()=>M,mK:()=>L,g:()=>V,ws:()=>Z,HP:()=>G,aN:()=>B,Pg:()=>z,u0:()=>K,TM:()=>Y,PM:()=>H,lK:()=>q,sv:()=>W,MO:()=>X,oO:()=>J,Mc:()=>$,Zw:()=>Q,RA:()=>ee,am:()=>te,ZM:()=>re,wm:()=>ne,Y$:()=>oe,Qu:()=>ie,kT:()=>ae});var n=r(647310),o="LOAD_FEATURE_INFO",i="ERROR_FEATURE_INFO",a="EXCEPTIONS_FEATURE_INFO",c="CHANGE_MAPINFO_STATE",u="NEW_MAPINFO_REQUEST",l="PURGE_MAPINFO_RESULTS",s="CHANGE_MAPINFO_FORMAT",f="SHOW_MAPINFO_MARKER",p="HIDE_MAPINFO_MARKER",y="SHOW_REVERSE_GEOCODE",d="HIDE_REVERSE_GEOCODE",m="NO_QUERYABLE_LAYERS",b="CLEAR_WARNING",v="FEATURE_INFO_CLICK",h="IDENTIFY:UPDATE_FEATURE_INFO_CLICK_POINT",g="IDENTIFY:TOGGLE_HIGHLIGHT_FEATURE",O="TOGGLE_MAPINFO_STATE",S="UPDATE_CENTER_TO_MARKER",E="IDENTIFY:CHANGE_PAGE",_="IDENTIFY:CLOSE_IDENTIFY",P="IDENTIFY:CHANGE_FORMAT",w="IDENTIFY:TOGGLE_SHOW_COORD_EDITOR",I="IDENTIFY:EDIT_LAYER_FEATURES",j="IDENTIFY:CURRENT_EDIT_FEATURE_QUERY",T="IDENTIFY:SET_MAP_TRIGGER",C="IDENTIFY:TOGGLE_EMPTY_MESSAGE_GFI",k="IDENTIFY:SET_SHOW_IN_MAP_POPUP",R="IDENTIFY:IDENTIFY_IS_MOUNTED",N="IDENTIFY:INIT_PLUGIN";function A(e,t,r,n,i){return{type:o,data:t,reqId:e,requestParams:r,layerMetadata:n,layer:i}}function x(e,t,r,n){return{type:i,error:t,reqId:e,requestParams:r,layerMetadata:n}}function D(){return{type:m}}function F(){return{type:b}}function M(e,t){return{type:u,reqId:e,request:t}}function L(e){return{type:c,enabled:e}}function V(){return{type:l}}function Z(e){return{type:s,infoFormat:e}}function G(){return{type:f}}function B(){return{type:p}}function U(e){return{type:y,reverseGeocodeData:e.data}}function z(e){return function(t){n.Z.reverseGeocode(e).then((function(e){t(U(e))})).catch((function(e){t(U(e))}))}}function K(){return{type:d}}function Y(){return{type:O}}function H(e){return{type:S,status:e}}function q(e,t){return{type:v,point:e,layer:t,filterNameList:arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],overrideParams:arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},itemId:arguments.length>4&&void 0!==arguments[4]?arguments[4]:null}}function W(e){return{type:h,point:e}}function X(e){return{type:g,enabled:e}}function J(e){return{type:E,index:e}}var $=function(){return{type:_}},Q=function(e){return{type:P,format:e}},ee=function(e){return{type:w,showCoordinateEditor:e}},te=function(e){return{type:I,layer:e}},re=function(e){return{type:j,query:e}},ne=function(e){return{type:T,trigger:e}},oe=function(e){return{type:k,value:e}},ie=function(e){return{type:R,isMounted:e}},ae=function(e){return{type:N,cfg:e}}},225016:(e,t,r)=>{"use strict";r.d(t,{Cv:()=>n,RD:()=>o,NR:()=>i,mV:()=>a,N3:()=>c,dR:()=>u,sS:()=>l,sm:()=>s});var n="SET_SEARCH_BOOKMARK_CONFIG",o="RESET_BOOKMARK_CONFIG",i="UPDATE_BOOKMARK",a="FILTER_BOOKMARKS";function c(e,t){return{type:n,property:e,value:t}}function u(){return{type:o}}function l(e){return{type:i,bookmark:e,idx:arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1}}function s(e){return{type:a,filter:e}}},240626:(e,t,r)=>{"use strict";r.d(t,{bL:()=>n,f6:()=>o,E_:()=>i,ai:()=>a,U8:()=>c,Pg:()=>u});var n="SET_SEARCH_CONFIG_PROP",o="RESET_SEARCH_CONFIG",i="UPDATE_SERVICE";function a(e,t){return{type:n,property:e,value:t}}function c(){return{type:o,page:arguments.length>0&&void 0!==arguments[0]?arguments[0]:0}}function u(e){return{type:i,service:e,idx:arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1}}},647310:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(375875),o=r.n(n),i=r(472500),a=r.n(i),c=r(727418),u=r.n(c),l={format:"json",bounded:0,polygon_geojson:1,priority:5};const s={geocode:function(e,t){var r=u()({q:e},l,t||{}),n=a().format({protocol:"https",host:"nominatim.openstreetmap.org",query:r});return o().get(n)},reverseGeocode:function(e,t){var r=u()({lat:e.lat,lon:e.lng},t||{},l),n=a().format({protocol:"https",host:"nominatim.openstreetmap.org/reverse",query:r});return o().get(n)}}},115047:(e,t,r)=>{"use strict";r.d(t,{b:()=>m});var n=r(727418),o=r.n(n);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==i(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l=r(59286),s=r(432420),f=["url","typeName","queriableAttributes","outputFormat","predicate","staticFilter","blacklist","item","fromTextToFilter","returnFullData"],p=function(e){var t,r=e.searchText,n=e.staticFilter,o=e.blacklist,i=e.item,a=e.queriableAttributes,c=e.predicate,u=(0,l.Iz)(n||"")(i),s=r.split(" ").filter((function(e){return e})).filter((function(e){return o.indexOf(e.toLowerCase())<0}));return 0===s.length&&(s=r?[r]:[]),s.length>0&&(t="(".concat(s.map((function(e){return a.map((function(t){return"".concat(t," ").concat(c," '%").concat(e.replace("'","''"),"%'")})).join(" OR ")})).join(") AND (")).concat(")")),t?t.concat(u):u||null},y={nominatim:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{returnFullData:!1};return r(647310).Z.geocode(e,t).then((function(e){return t.returnFullData?e:null===(r=e.data)?[]:r.map((function(e){return{properties:c({},e),id:e.osm_id,type:"Feature",bbox:e.boundingbox.map((function(e){return parseFloat(e)})).reduce((function(e,t,r){return e[function(e){switch(e){case 0:return 1;case 1:return 3;case 2:return 0;case 3:return 2;default:return-1}}(r)]=t,e}),[]),geometry:e.geojson||{type:"Point",coordinates:[parseFloat(e.lon),parseFloat(e.lat)]}}}));var r}))},wfs:function(e,t){var r=t.url,n=t.typeName,i=t.queriableAttributes,a=void 0===i?[]:i,c=t.outputFormat,u=void 0===c?"application/json":c,l=t.predicate,y=void 0===l?"ILIKE":l,d=t.staticFilter,m=void 0===d?"":d,b=t.blacklist,v=void 0===b?[]:b,h=t.item,g=t.fromTextToFilter,O=void 0===g?p:g,S=t.returnFullData,E=void 0!==S&&S,_=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(t,f),P=O({searchText:e,staticFilter:m,blacklist:v,item:h,queriableAttributes:a,predicate:y});return s.DH(r,o()({maxFeatures:10,typeName:n,outputFormat:u,cql_filter:P},_)).then((function(e){return E?e:e.features}))}},d={setService:function(e,t){y[e]=t},getService:function(e){return y[e]?y[e]:null}},m={Services:y,Utils:d}},838167:(e,t,r)=>{"use strict";r.d(t,{k9:()=>E,v0:()=>S,ZP:()=>P});var n=r(45697),o=r.n(n),i=r(124852),a=r.n(i),c=r(868195);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},l.apply(null,arguments)}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,b(n.key),n)}}function f(e,t,r){return t=y(t),function(e,t){if(t&&("object"==u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,p()?Reflect.construct(t,r||[],y(e).constructor):t.apply(e,r))}function p(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(p=function(){return!!e})()}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}function m(e,t,r){return(t=b(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b(e){var t=function(e,t){if("object"!=u(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==u(t)?t:t+""}var v=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),f(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){return this.context.intl?a().createElement(c.FormattedDate,l({value:this.props.value},this.props.dateParams)):a().createElement("span",null,this.props.value&&this.props.value.toString()||"")}}])&&s(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(a().Component);m(v,"propTypes",{value:o().object,dateParams:o().object}),m(v,"contextTypes",{intl:o().object}),m(v,"defaultProps",{value:new Date});const h=v;var g=r(615402),O=r(805346),S=O.Z,E=g.Z,_=h;const P={Message:O.Z,HTML:E,DateFormat:_}},799509:(e,t,r)=>{"use strict";r.d(t,{Z:()=>Q});var n=r(124852),o=r.n(n),i=r(45697),a=r.n(i),c=r(548403),u=r.n(c),l=r(480681),s=r(794192);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,h(n.key),n)}}function y(e,t,r){return t=m(t),function(e,t){if(t&&("object"==f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,d()?Reflect.construct(t,r||[],m(e).constructor):t.apply(e,r))}function d(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(d=function(){return!!e})()}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}function b(e,t){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},b(e,t)}function v(e,t,r){return(t=h(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h(e){var t=function(e,t){if("object"!=f(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==f(t)?t:t+""}var g=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return v(e=y(this,t,[].concat(n)),"verifyOnKeyDownEvent",(function(t){69===t.keyCode&&t.preventDefault(),13===t.keyCode&&(t.preventDefault(),t.stopPropagation(),e.props.onKeyDown(t))})),v(e,"validateDecimalLon",(function(t){var r=e.props.constraints[e.props.format].lon.min,n=e.props.constraints[e.props.format].lon.max,o=parseFloat(t);return isNaN(o)||o<r||o>n?"error":null})),v(e,"validateDecimalLat",(function(t){var r=e.props.constraints[e.props.format].lat.min,n=e.props.constraints[e.props.format].lat.max,o=parseFloat(t);return isNaN(o)||o<r||o>n?"error":null})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this,t=this.props,r=t.coordinate,n=t.value,i=t.onChange,a=t.disabled,c="validateDecimal"+u()(r);return o().createElement(l.cw,{validationState:this[c](n)},o().createElement(s.Z,{disabled:a,key:r,value:n,placeholder:r,onChange:function(t){""===t?i(""):null===e[c](t)?i(t):i(n)},onKeyDown:this.verifyOnKeyDownEvent,step:1,validateNameFunc:this[c],type:"number"}))}}])&&p(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(o().Component);v(g,"propTypes",{idx:a().number,value:a().number,constraints:a().object,format:a().string,coordinate:a().string,onChange:a().func,onKeyDown:a().func,onSubmit:a().func,disabled:a().bool}),v(g,"defaultProps",{format:"decimal",coordinate:"lat",constraints:{decimal:{lat:{min:-90,max:90},lon:{min:-180,max:180}}},onKeyDown:function(){},disabled:!1});const O=g;var S=r(414293),E=r.n(S),_=r(867076);const P=(0,_.withProps)((function(e){var t=e.coordinate,r=void 0===t?"lat":t;return{maxDegrees:"lat"===r?90:180,directions:"lat"===r?["N","S"]:["E","W"]}}));var w=r(562395);const I=(0,_.compose)((0,_.withProps)((function(e){return{isValid:""!==e.value}})),(0,_.withState)("initial","setInitial",{}),(0,_.withProps)((function(e){var t=e.isValid,r=e.initial,n=e.degrees,o=e.minutes,i=e.seconds;return t||""===n&&""===o&&""===i?{}:r})),(0,_.withHandlers)({onChange:function(e){return function(t){var r=t.degrees,n=t.minutes,o=t.seconds,i=t.direction;isNaN(r)?e.setInitial({degrees:"",minutes:n,seconds:o,direction:i}):isNaN(n)?e.setInitial({degrees:r,minutes:"",seconds:o,direction:i}):isNaN(o)&&e.setInitial({degrees:r,minutes:n,seconds:"",direction:i}),e.onChange({degrees:r,minutes:n,seconds:o,direction:i})}}}));function j(e){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(Object(r),!0).forEach((function(t){D(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function k(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,F(n.key),n)}}function R(e,t,r){return t=A(t),function(e,t){if(t&&("object"==j(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,N()?Reflect.construct(t,r||[],A(e).constructor):t.apply(e,r))}function N(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(N=function(){return!!e})()}function A(e){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},A(e)}function x(e,t){return x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},x(e,t)}function D(e,t,r){return(t=F(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function F(e){var t=function(e,t){if("object"!=j(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=j(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==j(t)?t:t+""}var M="degrees",L="seconds",V="minutes",Z=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return D(e=R(this,t,[].concat(n)),"onChange",(function(t,r){var n=e.getUpdatedCoordinateValue(t,r);e.props.onChange(n)})),D(e,"getUpdatedCoordinateValue",(function(t,r){try{var n=D({degrees:e.props.degrees,minutes:e.props.minutes,seconds:e.props.seconds,direction:e.props.direction},t,t===M?Math.min(r,e.props.maxDegrees):r),o=n.seconds,i=n.minutes+e.getSexagesimalStep(o),a=Math.min(e.props.maxDegrees,n.degrees+e.getSexagesimalStep(i)),c=n.direction;return o=e.roundToNextSexagesimalStep(o),i=e.roundToNextSexagesimalStep(i),a===e.props.maxDegrees&&(i=0,o=0),c=a<0?c===e.props.directions[0]?e.props.directions[1]:e.props.directions[0]:c,-1===a&&(n.degrees<0&&n.minutes>=0?a=n.degrees:n.minutes<0&&n.degrees<=0?(a=0,i=n.minutes):(a=0,i=0,o=1e-4)),{degrees:a,minutes:i,seconds:o,direction:c}}catch(e){return null}})),D(e,"getSexagesimalStep",(function(e){return e>=60?1:e<0?-1:0})),D(e,"getInputStyle",(function(e){return isNaN(e)||""===e?{borderColor:"#a94442"}:{}})),D(e,"getNewValue",(function(t){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:M;if(""===t)r="";else{var o=n===L?parseFloat(t):parseInt(t,10),i=n===M?e.props.maxDegrees:60;r=Math.round(10*o)/10<i?o:e.props[n]}return r})),D(e,"verifyOnKeyDownEvent",(function(t){var r;69===t.keyCode&&t.preventDefault(),"0"===(null==t||null===(r=t.target)||void 0===r?void 0:r.value)&&t.target.setSelectionRange(-1,-1),13===t.keyCode&&(t.preventDefault(),t.stopPropagation(),e.props.onKeyDown())})),D(e,"roundToNextSexagesimalStep",(function(e){return e<0?60+e:e>=60?e-60:e})),D(e,"isValid",(function(t){var r=t.minutes,n=t.seconds,o=t.degrees,i=t.direction;return!E()(r)&&r>0&&r<60&&!E()(n)&&n>0&&n<60&&!E()(o)&&o>0&&o<e.props.maxDegrees&&i})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&x(e,t)}(t,e),r=t,n=[{key:"render",value:function(){var e,t,r,n=this,i={padding:0,textAlign:"center",borderRight:"none"},a=this.getInputStyle(this.props.degrees),c=this.getInputStyle(this.props.minutes),u=this.getInputStyle(this.props.seconds),f={position:"relative",top:0,overflow:"visible",zIndex:3,left:-25,width:0,height:0},p=(null!==(e=null==this||null===(t=this.props)||void 0===t||null===(r=t.aeronauticalOptions)||void 0===r?void 0:r.seconds)&&void 0!==e?e:{}).step;return o().createElement(l.cw,{style:{display:"inline-flex"}},o().createElement("div",{className:M,style:{width:40,display:"flex"}},o().createElement(s.Z,{key:this.props.coordinate+M,value:this.props.degrees,disabled:this.props.disabled,placeholder:"d",onChange:function(e){return n.onChange(M,n.getNewValue(e))},step:1,size:3,max:this.props.maxDegrees,min:-1,onKeyDown:function(e){n.verifyOnKeyDownEvent(e)},style:C(C({width:"100%"},i),a),type:"number"}),o().createElement("span",{style:f},"°")),o().createElement("div",{className:V,style:{width:40,display:"flex"}},o().createElement(s.Z,{disabled:this.props.disabled,key:this.props.coordinate+V,placeholder:"m",size:3,value:this.props.minutes,onChange:function(e){return n.onChange(V,n.getNewValue(e,V))},max:60,min:-1,onKeyDown:function(e){n.verifyOnKeyDownEvent(e)},style:C(C({width:"100%"},i),c),step:1,type:"number"}),o().createElement("span",{style:f},"′")),o().createElement("div",{className:L,style:{display:"flex"}},o().createElement(s.Z,{disabled:this.props.disabled,key:this.props.coordinate+L,value:this.props.seconds,placeholder:"s",onChange:function(e){return n.onChange(L,n.getNewValue(e,L))},step:p,max:60,onKeyDown:function(e){n.verifyOnKeyDownEvent(e)},min:-1,style:C(C({width:"100%"},i),u),type:"number"}),o().createElement("span",{style:f},"″")),o().createElement("div",{className:"direction-select"},o().createElement(l.NI,{disabled:this.props.disabled,componentClass:"select",placeholder:"select",value:this.props.direction,onChange:function(e){return n.onChange("direction",e.target.value)},style:{paddingLeft:4,paddingRight:4,flex:"1 1 0%"}},this.props.directions.map((function(e){return o().createElement("option",{key:e,value:e},e)})))))}}],n&&k(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(o().Component);D(Z,"propTypes",{idx:a().number,maxDegrees:a().number,degrees:a().number,minutes:a().number,seconds:a().number,directions:a().array,direction:a().string,aeronauticalOptions:a().object,coordinate:a().string,onChange:a().func,onKeyDown:a().func,disabled:a().bool}),D(Z,"defaultProps",{coordinate:"lat",maxDegrees:90,directions:["N","S"],aeronauticalOptions:{seconds:{decimals:4,step:1e-4}},onKeyDown:function(){},disabled:!1});const G=(0,_.compose)(P,w.Z,I)(Z),B=(0,_.compose)((0,_.withHandlers)({onChange:function(e){var t=e.onChange,r=void 0===t?function(){}:t,n=e.maxLatitude,o=void 0===n?89.9997222222:n,i=e.coordinate;return function(e){return r(Math.abs(parseFloat(e))>o&&"lat"===i?Math.sign(e)*o:e)}}}));function U(e){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U(e)}function z(){return z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},z.apply(null,arguments)}function K(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,J(n.key),n)}}function Y(e,t,r){return t=q(t),function(e,t){if(t&&("object"==U(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,H()?Reflect.construct(t,r||[],q(e).constructor):t.apply(e,r))}function H(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(H=function(){return!!e})()}function q(e){return q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},q(e)}function W(e,t){return W=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},W(e,t)}function X(e,t,r){return(t=J(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function J(e){var t=function(e,t){if("object"!=U(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=U(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==U(t)?t:t+""}var $=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Y(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&W(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this.props.format;return"decimal"===e||E()(e)?o().createElement(O,z({},this.props,{format:this.props.format||"decimal"})):o().createElement(G,this.props)}}])&&K(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(o().Component);X($,"propTypes",{idx:a().number,value:a().number,constraints:a().object,format:a().string,aeronauticalOptions:a().object,coordinate:a().string,onChange:a().func,onKeyDown:a().func}),X($,"defaultProps",{format:"decimal",constraints:{decimal:{lat:{min:-90,max:90},lon:{min:-180,max:180}}}});const Q=B($)},562395:(e,t,r)=>{"use strict";r.d(t,{Z:()=>f});var n=r(807654),o=r.n(n),i=r(59854),a=r.n(i),c=r(867076);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=u(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==u(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const f=(0,c.compose)((0,c.withProps)((function(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},function(e,t){var r,n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).seconds,i=e>=0?Math.floor(e):Math.ceil(e),c=Math.abs(60*(e-i)),u=Math.floor(c),l=60*(c-u),s=a()(l,null!==(r=null==n?void 0:n.decimals)&&void 0!==r?r:4);return i=Math.abs(i),60===s&&(u++,s=0),60===u&&(i++,u=0),o()(i)||""===e?{degrees:"",minutes:"",seconds:"",direction:t?"E":"N"}:{degrees:i,minutes:u,seconds:s,direction:e<0?t?"W":"S":t?"E":"N"}}(e.value,"lon"===e.coordinate,e.aeronauticalOptions))})),(0,c.withHandlers)({onChange:function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.degrees,n=t.minutes,i=t.seconds,a=t.direction,c=0,u=0,l=0;void 0===r&&void 0===n&&void 0===i&&e.onChange(void 0),o()(r)||(c=r),o()(n)||(u=n),o()(i)||(l=i);var s=c+u/60+l/3600;(s>0&&("S"===a||"W"===a)||s<0&&("N"===a||"E"===a))&&(s*=-1),e.onChange(s.toPrecision(12))}}}))},777900:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(480681),o=r(815135),i=r(124852),a=r.n(i),c=r(423570),u=r.n(c);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},l.apply(null,arguments)}var s=(0,o.Z)(n.PS),f={disabled:!1,className:"square-button-md",noCaret:!0,idDropDown:u()()};const p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.menuOptions,r=void 0===t?[]:t,o=e.buttonConfig,i=void 0===o?{}:o;return a().createElement(s,l({},f,i),r.length?r.map((function(e,t){var r=e.glyph,o=e.text,i=e.onClick,c=e.active,u=void 0!==c&&c;return a().createElement(n.sN,{active:u,eventKey:t,onClick:i,key:t},r&&a().createElement(n.gG,{glyph:r})," ",o)})):null)}},605457:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>pr});var n=r(227361),o=r.n(n),i=r(727418),a=r.n(i),c=r(45697),u=r.n(c),l=r(124852),s=r.n(l),f=r(171703),p=r(22222),y=r(460604),d=r(881808),m=r(782904),b=r(801550),v=r(360951),h=r(597222),g=r(225016),O=r(480681),S=r(441609),E=r.n(S),_=r(618446),P=r.n(_),w=r(352353),I=r.n(w),j=r(805346),T=r(815135),C=r(423570),k=r.n(C);function R(){return R=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},R.apply(null,arguments)}var N=(0,T.Z)(O.PS),A={disabled:!1,className:"square-button-md",noCaret:!0,idDropDown:k()()},x={title:s().createElement(O.gG,{glyph:"menu-hamburger"}),tooltipId:"search.changeSearchInputField",tooltipPosition:"bottom",className:"square-button-md no-border",pullRight:!0};const D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.menuItems,r=void 0===t?[]:t,n=e.disabled,o=void 0!==n&&n;return s().createElement(N,R({disabled:o},A,x),r.length?r.map((function(e){return e})):null)},F=function(e){var t=e.className,r=e.style,n=e.children;return s().createElement("div",{id:"map-search-bar",style:r,className:"MapSearchBar"+(t?" "+t:"")},n)};var M=r(86638);function L(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return V(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?V(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Z=function(e,t){var r=e.show,n=e.autoFocusOnSelect,o=void 0===n||n,i=e.selectedItems,a=void 0===i?[]:i,c=e.className,u=e.style,l=void 0===u?{textOverflow:"ellipsis"}:u,f=e.placeholder,p=e.placeholderMsgId,y=e.hideOnBlur,d=void 0===y||y,m=e.searchText,b=void 0===m?"":m,v=e.typeAhead,h=void 0===v||v,g=e.delay,S=void 0===g?1e3:g,E=e.blurResetDelay,_=void 0===E?300:E,P=e.onSearch,w=void 0===P?function(){}:P,I=e.onSearchTextChange,j=void 0===I?function(){}:I,T=e.onCancelSelectedItem,C=void 0===T?function(){}:T,k=e.onPurgeResults,R=void 0===k?function(){}:k,N=s().useRef(),A=s().useRef(),x=L(s().useState(),2),D=x[0],F=x[1],V=L(s().useState(),2),Z=V[0],G=V[1],B=L(s().useState(!1),2),U=B[0],z=B[1];s().useEffect((function(){var e=A.current;if(o&&a&&(e<a.length||!e&&1===a.length)){var t=N.current;t&&t.focus instanceof Function&&setTimeout((function(){return t.focus()}),200)}A.current=a&&a.length})),s().useEffect((function(){U&&(w(),z(!1))}),[U,w]);var K="search.addressSearch";if(!f&&t.messages){var Y=(0,M.S$)(t.messages,p||K);Y&&(K=Y)}else K=f;return r&&s().createElement(O.NI,{className:"searchInput".concat(c?" ".concat(c):""),key:"search-input",placeholder:K,type:"text",inputRef:function(e){N.current=e},style:l,value:b,onKeyDown:function(e){switch(e.keyCode){case 13:w();break;case 8:!b&&a&&a.length>0&&C(a[a.length-1])}},onBlur:function(){d&&(D&&clearTimeout(D),F(setTimeout((function(){R()}),_)))},onFocus:function(){h&&b&&w()},onChange:function(e){var t=e.target.value;j(t),h&&(Z&&clearTimeout(Z),G(setTimeout((function(){z(!0)}),S)))}})};Z.contextTypes={messages:u().object};const G=Z;var B=r(472986),U=r.n(B),z=r(80717);function K(e){return K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},K(e)}function Y(){return Y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Y.apply(null,arguments)}function H(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?H(Object(r),!0).forEach((function(t){W(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function W(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=K(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=K(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==K(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const X=function(e){var t=e.loading,r=(e.splitTools,e.toolbarProps),n=void 0===r?{}:r,o=e.toolbarButtons,i=void 0===o?[]:o,c=e.children;return s().createElement("span",{className:"search-toolbar-options"},t&&s().createElement(U(),{style:a()({},{position:"absolute"},q({},{right:"69px",zIndex:1,top:"13px"})),spinnerName:"pulse",noFadeIn:!0}),s().createElement(z.Z,Y({btnGroupProps:{className:"btn-group-menu-options"},transitionProps:null,btnDefaultProps:{className:"square-button-md",bsStyle:"primary"}},n,{buttons:i})),c)};var J=r(743129);function $(e){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$(e)}function Q(){return Q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Q.apply(null,arguments)}function ee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return te(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?te(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function te(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function re(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ne(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?re(Object(r),!0).forEach((function(t){oe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):re(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function oe(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=$(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=$(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==$(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ie=(0,r(993451).Z)(["placeholder","clearValueText","noResultsText"])(J.ZP),ae={searchByBookmark:function(e,t,r,n,o){var i,a,c=e.options,u=void 0===c?{}:c,l=e.layerVisibilityReload;void 0!==l&&l?t(ne(ne({},r),{},{map:ne(ne({},r.map),{},{bookmark_search_config:n})}),null,{bounds:[u.west,u.south,u.east,u.north],crs:(null==r||null===(i=r.map)||void 0===i||null===(a=i.center)||void 0===a?void 0:a.crs)||"EPSG:4326"}):u&&!E()(u)&&o([u.west,u.south,u.east,u.north],"EPSG:4326")},searchIcon:function(e,t){var r=t.onLayerVisibilityLoad,n=t.mapInitial,o=t.bookmarkConfig,i=t.onZoomToExtent;return{tooltipId:"bookmarkSearch"===e?"search.zoomToBookmark":"",tooltipPosition:"bottom",visible:"bookmarkSearch"===e&&!(null!=o&&o.zoomOnSelect),disabled:"bookmarkSearch"===e&&!o.selected,onClick:function(){"bookmarkSearch"===e&&ae.searchByBookmark(o.selected,r,n,o.bookmarkSearchConfig||{},i)}}}},ce=function(e){var t=e.bookmarkConfig,r=e.onPropertyChange,n=e.onLayerVisibilityLoad,o=e.mapInitial,i=e.onZoomToExtent,a=ee((0,l.useState)([]),2),c=a[0],u=a[1],f=t||{},p=f.selected,y=void 0===p?{}:p,d=f.bookmarkSearchConfig,m=void 0===d?{}:d,b=f.zoomOnSelect,v=void 0===b||b,h=m.bookmarks,g=void 0===h?[]:h,O=ae.searchByBookmark;return(0,l.useEffect)((function(){E()(g)||u(g.map((function(e){return e.title})))}),[g]),s().createElement("div",{className:"search-select"},s().createElement("div",{style:{flex:"1 1 0%",padding:"0px 4px"}},s().createElement(ie,Q({},{clearable:!0,isSearchable:!0,isClearable:!0},{onChange:function(e){var t=e&&e.value||"",a=ee(g.filter((function(r,n){return r.title===t&&n===e.idx})),1)[0];r("selected",a),v&&O(a,n,o,m,i)},value:(null==y?void 0:y.title)||"",options:c.map((function(e,t){return{label:e,value:e,idx:t}})),placeholder:"search.b_placeholder",clearValueText:"search.b_clearvalue",noResultsText:"search.b_noresult"}))))};ce.propTypes={bookmarkConfig:u().object.isRequired,onPropertyChange:u().func.isRequired};const ue=(0,f.connect)((function(e){return{bookmarkConfig:e.searchbookmarkconfig||{}}}),{onPropertyChange:g.N3,onZoomToExtent:b.Px,onLayerVisibilityLoad:d.H0})(ce);var le=r(281763),se=r.n(le),fe=r(799509),pe=r(777900),ye={clearCoordinates:function(e,t){e({owner:"search"}),t("lat",""),t("lon","")},areValidCoordinates:function(e){return se()(null==e?void 0:e.lon)&&se()(null==e?void 0:e.lat)},zoomToPoint:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12;e({x:parseFloat(t.lon),y:parseFloat(t.lat)},r,"EPSG:4326")},coordinateFormatChange:function(e,t,r,n){return{buttonConfig:{title:s().createElement(O.gG,{glyph:"cog"}),tooltipId:"search.changeSearchInputField",tooltipPosition:"bottom",className:"square-button-md no-border",pullRight:!0},menuOptions:[{active:"decimal"===e,onClick:function(){return t("decimal")},text:s().createElement(j.Z,{msgId:"search.decimal"})},{active:"aeronautical"===e,onClick:function(){return t("aeronautical")},text:s().createElement(j.Z,{msgId:"search.aeronautical"})}],visible:r&&"coordinatesSearch"===n,Element:pe.Z}},removeIcon:function(e,t,r,n){return{visible:"coordinatesSearch"===e&&(se()(t.lon)||se()(t.lat)),onClick:function(){return ye.clearCoordinates(r,n)}}},searchIcon:function(e,t,r,n){return{visible:"coordinatesSearch"===e,onClick:function(){"coordinatesSearch"===e&&ye.areValidCoordinates(t)&&ye.zoomToPoint(r,t,n)}}},coordinatesMenuItem:function(e){var t=e.activeTool,r=e.searchText,n=e.clearSearch,o=e.onChangeActiveSearchTool,i=e.onClearBookmarkSearch;return s().createElement(O.sN,{active:"coordinatesSearch"===t,onClick:function(){void 0!==r&&""!==r&&n(),i("selected"),o("coordinatesSearch"),document.dispatchEvent(new MouseEvent("click"))}},s().createElement(O.gG,{glyph:"search-coords"})," ",s().createElement(j.Z,{msgId:"search.coordinatesSearch"}))}},de=function(e){var t=e.coordinate,r=void 0===t?{}:t,n=e.format,o=e.onClearCoordinatesSearch,i=e.onZoomToPoint,a=e.onChangeCoord,c=e.defaultZoomLevel,u=e.aeronauticalOptions,l=void 0===u?{seconds:{decimals:4,step:1e-4}}:u,f=e.constraintsCoordEditor,p=void 0===f?{decimal:{lat:{min:-90,max:90},lon:{min:-180,max:180}}}:f,y=ye.zoomToPoint,d=ye.areValidCoordinates,m=function(e,t){a(e,parseFloat(t)),d()||o({owner:"search"})},b=function(){y(i,r,c)};return s().createElement("div",{className:"coordinateEditor",style:{flexWrap:"decimal"===n?"nowrap":"wrap"}},s().createElement(O.X2,{className:"entryRow ".concat(n)},s().createElement(O.cw,null,s().createElement(O.BZ,null,s().createElement(O.BZ.Addon,{style:{minWidth:45}},s().createElement(j.Z,{msgId:"search.latitude"})),s().createElement(fe.Z,{format:n,aeronauticalOptions:l,coordinate:"lat",idx:1,value:r.lat,constraints:p,onChange:function(e){return m("lat",e)},onKeyDown:function(){d(r)&&b()}})))),s().createElement(O.X2,{className:"entryRow ".concat(n)},s().createElement(O.cw,null,s().createElement(O.BZ,null,s().createElement(O.BZ.Addon,{style:{minWidth:45}},s().createElement(j.Z,{msgId:"search.longitude"})),s().createElement(fe.Z,{format:n,aeronauticalOptions:l,coordinate:"lon",idx:2,value:r.lon,constraints:p,onChange:function(e){return m("lon",e)},onKeyDown:function(){d(r)&&b()}})))))};de.propTypes={coordinate:u().object,format:u().string,onClearCoordinatesSearch:u().func,onZoomToPoint:u().func,onChangeCoord:u().func,defaultZoomLevel:u().number};const me=(0,f.connect)((function(e){return{coordinate:e.search.coordinate||{}}}),{onZoomToPoint:h.Z,onChangeCoord:h.TS})(de);function be(e){return be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},be(e)}var ve=["activeSearchTool","removeIcon","searchIcon","isSearchClickable","splitTools","searchText","maxResults","searchOptions","loading","delay","blurResetDelay","typeAhead","coordinate","selectedItems","defaultZoomLevel","enabledSearchBookmarkConfig","error","format","placeholder","placeholderMsgId","showOptions","showAddressSearchOption","showCoordinatesSearchOption","showBookMarkSearchOption","onSearch","onSearchReset","onSearchTextChange","onCancelSelectedItem","onChangeCoord","onChangeActiveSearchTool","onClearCoordinatesSearch","onChangeFormat","onToggleControl","onZoomToPoint","onClearBookmarkSearch","onPurgeResults","items"];function he(e){return function(e){if(Array.isArray(e))return Pe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||_e(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ge(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Oe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ge(Object(r),!0).forEach((function(t){Se(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ge(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Se(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=be(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=be(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==be(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||_e(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _e(e,t){if(e){if("string"==typeof e)return Pe(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Pe(e,t):void 0}}function Pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var we=(0,T.Z)(O.sN),Ie=function(e){var t=e.activeTool,r=e.searchIcon,n=e.services,i=void 0===n?[]:n,a=e.selectedService,c=void 0===a?-1:a,u=e.onServiceSelect,l=void 0===u?function(){}:u;return 0===i.length?null:1===i.length?s().createElement(O.sN,{active:"addressSearch"===t,onClick:function(){return l(-1)}},s().createElement(O.gG,{glyph:r}),s().createElement(j.Z,{msgId:"search.addressSearch"})):s().createElement(s().Fragment,null,s().createElement(we,{tooltipId:"search.searchOnAllServices",tooltipPosition:"left",active:"addressSearch"===t&&-1===c,onClick:function(){return l(-1)}},s().createElement(O.gG,{glyph:r}),s().createElement(j.Z,{msgId:"search.addressSearch"})),i.map((function(e,n){var i=e.name||e.type;return s().createElement(we,{tooltip:o()(e,"options.tooltip","Search on ".concat(i)),tooltipPosition:"left",onClick:function(){return l(n)},key:n,active:"addressSearch"===t&&c===n},s().createElement("span",{style:{marginLeft:20}},s().createElement(O.gG,{glyph:r}),i))})),s().createElement(O.sN,{divider:!0}))},je=r(313311),Te=r.n(je),Ce=r(59286);function ke(e){return ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ke(e)}function Re(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Me(n.key),n)}}function Ne(e,t,r){return t=xe(t),function(e,t){if(t&&("object"==ke(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ae()?Reflect.construct(t,r||[],xe(e).constructor):t.apply(e,r))}function Ae(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ae=function(){return!!e})()}function xe(e){return xe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},xe(e)}function De(e,t){return De=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},De(e,t)}function Fe(e,t,r){return(t=Me(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Me(e){var t=function(e,t){if("object"!=ke(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=ke(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ke(t)?t:t+""}var Le=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Fe(e=Ne(this,t,[].concat(n)),"onClick",(function(){var t=e.props.item;e.props.onItemClick(t)})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&De(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){if(void 0===this.props.item)return null;var e=this.props.item;return s().createElement("div",{key:e.osm_id,className:"search-result",style:e.resultCssStyle,onClick:this.onClick},s().createElement("div",{className:"search-result-left-container"},s().createElement("div",{className:"icon"}," ",s().createElement("img",{src:e.icon})),s().createElement("div",{className:"text-result-title"},o()(e,this.props.displayName)||(0,Ce.Iz)(this.props.displayName||"")(e)),s().createElement("small",{className:"text-info"},this.props.subTitle&&o()(e,this.props.subTitle)||(0,Ce.Iz)(this.props.subTitle||"")(e))),s().createElement("div",{className:"search-result-right-container"},s().createElement("div",{className:"search-result-tools"},s().createElement(z.Z,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary"},buttons:this.props.tools}))))}}])&&Re(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(s().Component);Fe(Le,"propTypes",{subTitle:u().string,item:u().object,displayName:u().string,idField:u().string,icon:u().string,onItemClick:u().func,tools:u().array}),Fe(Le,"defaultProps",{displayName:"properties.display_name",idField:"id",icon:"properties.icon",tools:[]});const Ve=Le;var Ze=r(838167),Ge=r(218412);function Be(e){return Be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Be(e)}function Ue(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,We(n.key),n)}}function ze(e,t,r){return t=Ye(t),function(e,t){if(t&&("object"==Be(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ke()?Reflect.construct(t,r||[],Ye(e).constructor):t.apply(e,r))}function Ke(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ke=function(){return!!e})()}function Ye(e){return Ye=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ye(e)}function He(e,t){return He=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},He(e,t)}function qe(e,t,r){return(t=We(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function We(e){var t=function(e,t){if("object"!=Be(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Be(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Be(t)?t:t+""}var Xe=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return qe(e=ze(this,t,[].concat(n)),"onItemClick",(function(t,r){e.props.onItemClick(t,e.props.mapConfig,r)})),qe(e,"renderResults",(function(){return e.props.results.map((function(t,r){var n,o=e.findService(t)||{},i=Te()(e.props.layers,{name:null===(n=o.options)||void 0===n?void 0:n.typeName}),a=(0,Ge.zA)(o),c=!(0,Ge.Tv)(i,o);return s().createElement(Ve,{subTitle:o.subTitle,idField:o.idField,displayName:o.displayName,key:t.osm_id||t.id||"res_"+r,item:t,onItemClick:function(){return e.onItemClick(t,o)},tools:[{id:"open-gfi",keyProp:"open-gfi",visible:a,disabled:c,glyph:"info-sign",tooltipId:a&&c?"search.layerMustBeVisible":"search.showGFI",onClick:function(r){r.stopPropagation(),e.props.showGFI(t)}}]})}))})),qe(e,"findService",(function(t){var r=e.props.searchOptions&&e.props.searchOptions.services;if(null!==t.__SERVICE__)if(r&&"string"==typeof t.__SERVICE__){for(var n=0;n<r.length;n++)if(r[n]&&r[n].id===t.__SERVICE__)return r[n];for(var o=0;o<r.length;o++)if(r[o]&&r[o].type===t.__SERVICE__)return r[o]}else if("object"===Be(t.__SERVICE__))return t.__SERVICE__;return null})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&He(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this.props.notFoundMessage;e||(e=s().createElement(Ze.ZP.Message,{msgId:"noresultfound"}));var t=this.props.containerStyle,r=this.props.mapConfig&&this.props.mapConfig.size;if(this.props.fitToMapSize&&r){var n=r.width-this.props.sizeAdjustment.width,o=r.height-this.props.sizeAdjustment.height;t=a()({},this.props.containerStyle,{maxWidth:n,maxHeight:o})}return this.props.results?0===this.props.results.length?s().createElement("div",{className:"search-result-list",style:a()({padding:"10px",textAlign:"center"},t)},e):s().createElement("div",{className:"search-result-list",style:t},this.renderResults()):null}}])&&Ue(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(s().Component);qe(Xe,"propTypes",{results:u().array,layers:u().array,searchOptions:u().object,mapConfig:u().object,fitToMapSize:u().bool,containerStyle:u().object,sizeAdjustment:u().object,onItemClick:u().func,addMarker:u().func,afterItemClick:u().func,showGFI:u().func,notFoundMessage:u().oneOfType([u().object,u().string])}),qe(Xe,"defaultProps",{layers:[],sizeAdjustment:{width:0,height:110},containerStyle:{zIndex:1e3},onItemClick:function(){},addMarker:function(){},afterItemClick:function(){},showGFI:function(){}});var Je=r(49977),$e=r(294707),Qe=r.n($e),et=r(235385),tt=r.n(et),rt=r(414293),nt=r.n(rt),ot=r(189734),it=r.n(ot),at=r(455877),ct=r.n(at),ut=r(675110),lt=r(921914),st=r(580416),ft=r(916651),pt=r(115047),yt=r(432420),dt=r(945402),mt=r(307877),bt=r(73814),vt=r(821751),ht=r(800827);function gt(e){return gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gt(e)}function Ot(e){return function(e){if(Array.isArray(e))return St(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return St(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?St(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function St(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Et(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _t(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Et(Object(r),!0).forEach((function(t){Pt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Et(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Pt(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=gt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=gt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==gt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var wt=function(e,t){return(0,dt.mx)(e,_t({},(0,mt.oq)(t)))},It=r(426125);function jt(e){return jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jt(e)}function Tt(e){return function(e){if(Array.isArray(e))return Ct(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Ct(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ct(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ct(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function kt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Rt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?kt(Object(r),!0).forEach((function(t){Nt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Nt(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=jt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=jt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==jt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var At=r(737275),xt=r(38560);function Dt(e){return Dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dt(e)}function Ft(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Bt(n.key),n)}}function Mt(e,t,r){return t=Vt(t),function(e,t){if(t&&("object"==Dt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Lt()?Reflect.construct(t,r||[],Vt(e).constructor):t.apply(e,r))}function Lt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Lt=function(){return!!e})()}function Vt(e){return Vt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Vt(e)}function Zt(e,t){return Zt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Zt(e,t)}function Gt(e,t,r){return(t=Bt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Bt(e){var t=function(e,t){if("object"!=Dt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Dt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Dt(t)?t:t+""}var Ut=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Mt(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Zt(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this;return s().createElement(xt.Z,{onClick:function(){return e.props.onToggle(e.props.pressed)},bsStyle:this.props.pressed?"default":"primary",className:"square-button"},s().createElement(O.gG,{glyph:"search"}))}}])&&Ft(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(s().Component);Gt(Ut,"propTypes",{pressed:u().bool,onToggle:u().func}),Gt(Ut,"defaultProps",{pressed:!1,onToggle:function(){}});const zt=(0,f.connect)((function(e){return{pressed:e.controls&&e.controls.search&&e.controls.search.enabled||!1}}),{onToggle:m.Xi.bind(null,"search",null)})(Ut);var Kt,Yt=r(55105),Ht=r(88791),qt=r(294184),Wt=r.n(qt);function Xt(e){return Xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xt(e)}function Jt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $t(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Jt(Object(r),!0).forEach((function(t){ir(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Jt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Qt(){return Qt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Qt.apply(null,arguments)}function er(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ar(n.key),n)}}function tr(e,t,r){return t=nr(t),function(e,t){if(t&&("object"==Xt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,rr()?Reflect.construct(t,r||[],nr(e).constructor):t.apply(e,r))}function rr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(rr=function(){return!!e})()}function nr(e){return nr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},nr(e)}function or(e,t){return or=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},or(e,t)}function ir(e,t,r){return(t=ar(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ar(e){var t=function(e,t){if("object"!=Xt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Xt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Xt(t)?t:t+""}var cr=(0,p.P1)([function(e){return e.search||null},function(e){return e.controls&&e.controls.searchBookmarkConfig||null},function(e){return e.mapConfigRawData||{}},function(e){return(null==e?void 0:e.searchbookmarkconfig)||""}],(function(e,t,r,n){return{enabledSearchBookmarkConfig:t&&t.enabled||!1,error:e&&e.error,coordinate:e&&e.coordinate||{},loading:e&&e.loading,searchText:e?e.searchText:"",activeSearchTool:o()(e,"activeSearchTool","addressSearch"),format:o()(e,"format")||At.ZP.getConfigProp("defaultCoordinateFormat"),selectedItems:e&&e.selectedItems,mapInitial:r,bookmarkConfig:n||{}}})),ur=(0,f.connect)(cr,{onSearch:h.tt,onChangeCoord:h.TS,onChangeActiveSearchTool:h.a,onClearCoordinatesSearch:y.fU,onClearBookmarkSearch:g.N3,onChangeFormat:h.Zw,onToggleControl:m.Xi,onZoomToPoint:h.Z,onPurgeResults:h.kV,onSearchReset:h.v2,onSearchTextChange:h.k9,onCancelSelectedItem:h.KG,onZoomToExtent:b.Px,onLayerVisibilityLoad:d.H0})((function(e){var t,r,n=e.activeSearchTool,i=void 0===n?"addressSearch":n,a=e.removeIcon,c=void 0===a?"1-close":a,u=e.searchIcon,f=void 0===u?"search":u,p=e.isSearchClickable,y=void 0===p||p,d=e.splitTools,m=e.searchText,b=void 0===m?"":m,v=e.maxResults,h=void 0===v?15:v,g=e.searchOptions,S=e.loading,_=e.delay,w=e.blurResetDelay,T=e.typeAhead,C=e.coordinate,k=void 0===C?{}:C,R=e.selectedItems,N=void 0===R?[]:R,A=e.defaultZoomLevel,x=void 0===A?12:A,M=e.enabledSearchBookmarkConfig,L=void 0!==M&&M,V=e.error,Z=e.format,B=void 0===Z?"decimal":Z,U=e.placeholder,z=e.placeholderMsgId,K=void 0===z?"search.addressSearch":z,Y=e.showOptions,H=void 0===Y||Y,q=e.showAddressSearchOption,W=void 0===q||q,J=e.showCoordinatesSearchOption,$=void 0===J||J,Q=e.showBookMarkSearchOption,ee=void 0===Q||Q,te=e.onSearch,re=e.onSearchReset,ne=e.onSearchTextChange,oe=e.onCancelSelectedItem,ie=e.onChangeCoord,ce=void 0===ie?function(){}:ie,le=e.onChangeActiveSearchTool,se=void 0===le?function(){}:le,fe=e.onClearCoordinatesSearch,pe=void 0===fe?function(){}:fe,de=e.onChangeFormat,be=void 0===de?function(){}:de,ge=e.onToggleControl,Se=void 0===ge?function(){}:ge,_e=e.onZoomToPoint,Pe=void 0===_e?function(){}:_e,we=e.onClearBookmarkSearch,je=void 0===we?function(){}:we,Te=e.onPurgeResults,Ce=e.items,ke=void 0===Ce?[]:Ce,Re=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,ve),Ne=Ee((0,l.useState)(-1),2),Ae=Ne[0],xe=Ne[1];(0,l.useEffect)((function(){P()(null==g?void 0:g.services,null==g?void 0:g.services)||xe(-1)}),[null==g?void 0:g.services]);var De,Fe=null!==(t=null==g||null===(r=g.services)||void 0===r?void 0:r.filter((function(e,t){return!(Ae>=0)||Ae===t})))&&void 0!==t?t:[],Me=function(e){var t=e.searchText,r=e.selectedItems,n=e.searchOptions,o=e.maxResults,i=e.onSearch,a=void 0===i?function(){}:i,c=e.onSearchReset,u=void 0===c?function(){}:c;return function(){var e=t,i=function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce((function(t,r){var n;return t+((null==r||null===(n=r.options)||void 0===n?void 0:n.maxFeatures)||e)}),0)||e}(null==n?void 0:n.services,o);void 0!==e&&""!==e||r&&0!==r.length?void 0!==e&&""!==e&&a(e,n,i):u()}}({searchText:b,selectedItems:N,searchOptions:Oe(Oe({},g),{},{services:Fe}),maxResults:h,onSearch:te,onSearchReset:re}),Le=function(){re()},Ve=[];if(W&&Ve.push(s().createElement(Ie,{searchIcon:f,activeTool:i,selectedService:Ae,onServiceSelect:function(e){xe(-1===e?void 0:e),pe({owner:"search"}),je("selected"),se("addressSearch")},services:null==g?void 0:g.services})),$&&Ve.push(s().createElement(ye.coordinatesMenuItem,{activeTool:i,searchText:b,clearSearch:Le,onChangeActiveSearchTool:se,onClearBookmarkSearch:je})),ee&&!E()(ke)){var Ze,Ge=Re.bookmarkConfig||{},Be=Ge.allowUser,Ue=Ge.bookmarkSearchConfig,ze=ke.find((function(e){return"SearchByBookmark"===e.name}))||{};if(ze.menuItem){var Ke=ze.menuItem;Ve.push(s().createElement(Ke,null))}ze.bookmarkConfig&&(De=Oe(Oe({},ze.bookmarkConfig(Se,L,i)),!Be&&{visible:!1})),Be||0!==(null==Ue||null===(Ze=Ue.bookmarks)||void 0===Ze?void 0:Ze.length)||"bookmarkSearch"!==i||se("addressSearch")}var Ye,He=function(){if(H){if("coordinatesSearch"===i)return ye.coordinateFormatChange(B,be,H,i);if("bookmarkSearch"===i)return De}return null};return s().createElement(F,null,s().createElement(O.cw,null,s().createElement("div",{className:"input-group",style:{display:"flex"}},N&&N.map((function(e,t){return s().createElement("span",{key:"selected-item"+t,className:"input-group-addon"},s().createElement("div",{className:"selectedItem-text"},e.text))})),s().createElement(G,{show:"addressSearch"===i,delay:_,typeAhead:T,blurResetDelay:w,placeholder:function(){var e;if(!U&&1===(null==Fe?void 0:Fe.length)&&(null==g||null===(e=g.services)||void 0===e?void 0:e.length)>1){var t=Ee(Fe,1)[0],r=t.name||t.type;return o()(t,"options.placeholder","Search by ".concat(r))}return U}(),placeholderMsgId:K,searchText:b,selectedItems:N,onSearch:Me,onSearchTextChange:ne,onCancelSelectedItem:oe,onPurgeResults:Te}),"coordinatesSearch"===i&&$&&s().createElement(me,{format:B,defaultZoomLevel:x,onClearCoordinatesSearch:pe}),"bookmarkSearch"===i&&ee&&s().createElement(ue,{mapInitial:Re.mapInitial}),s().createElement(X,{splitTools:!1,toolbarButtons:[].concat(he(He()?[Oe({},He())]:[]),he(ke.filter((function(e){return"button"===e.target})).map((function(e){var t=e.component;return{visible:!!H,Element:t}}))),[Oe({glyph:c,className:"square-button-md no-border",bsStyle:"default",pullRight:!0,loading:!I()(S)&&S,visible:"addressSearch"===i&&(""!==b||N&&N.length>0),onClick:function(){"addressSearch"===i&&Le()}},"coordinatesSearch"===i&&ye.removeIcon(i,k,pe,ce)),Oe(Oe({glyph:f,className:"square-button-md no-border "+(y||"addressSearch"!==i?"magnifying-glass clickable":"magnifying-glass"),bsStyle:"default",pullRight:!0,tooltipPosition:"bottom",visible:!("addressSearch"!==i||(""!==b||N&&N.length>0)&&d),onClick:function(){return y&&Me()}},"coordinatesSearch"===i&&ye.searchIcon(i,k,Pe,x)),"bookmarkSearch"===i&&ae.searchIcon(i,Re)),{tooltip:(Ye=V,Ye?s().createElement(j.Z,{msgId:Ye.msgId||"search.generic_error",msgParams:{message:Ye.message,serviceType:Ye.serviceType}}):null),tooltipPosition:"bottom",className:"square-button-md no-border",glyph:"warning-sign",bsStyle:"danger",glyphClassName:"searcherror",visible:!!V,onClick:Le},{visible:H,renderButton:s().createElement(D,{disabled:H,menuItems:Ve})}])}))))})),lr=(0,p.P1)([ht.Od,ut.l2,function(e){return e.search||null}],(function(e,t,r){return{mapConfig:e,layers:t,results:r?r.results:null}})),sr=(0,f.connect)(lr,{onItemClick:h.Jc,addMarker:h._q,showGFI:h.w4})(Xe),fr=(0,f.connect)((function(e){return{enabled:e.controls&&e.controls.search&&e.controls.search.enabled||!1,selectedServices:e&&e.search&&e.search.selectedServices,selectedItems:e&&e.search&&e.search.selectedItems,textSearchConfig:e&&e.searchconfig&&e.searchconfig.textSearchConfig}}),{onUpdateResultsStyle:h.o$})((Kt=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return ir(e=tr(this,t,[].concat(n)),"getServiceOverrides",(function(t){return e.props.selectedItems&&e.props.selectedItems[e.props.selectedItems.length-1]&&o()(e.props.selectedItems[e.props.selectedItems.length-1],t)})),ir(e,"getSearchOptions",(function(){var t=e.props,r=t.searchOptions,n=t.textSearchConfig;return n&&n.services&&n.services.length>0?n.override?a()({},r,{services:n.services}):a()({},r,{services:r.services.concat(n.services)}):r})),ir(e,"getCurrentServices",(function(){var t=e.props.selectedServices,r=e.getSearchOptions();return t&&t.length>0?a()({},r,{services:t}):r})),ir(e,"searchFitToTheScreen",(function(){var t=e.props,r=t.offsets,n=r.right,o=r.left,i=t.mapSize.width;return(void 0===i?window.innerWidth:i)-n-o-60>=500})),ir(e,"getSearchAndToggleButton",(function(){var t=s().createElement(ur,Qt({key:"searchBar"},e.props,{searchOptions:e.getCurrentServices(),placeholder:e.getServiceOverrides("placeholder"),placeholderMsgId:e.getServiceOverrides("placeholderMsgId")}));return e.searchFitToTheScreen()?t:s().createElement(s().Fragment,null,s().createElement(zt,null),e.props.enabled?t:null)})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&or(e,t)}(t,e),r=t,(n=[{key:"componentDidMount",value:function(){this.props.onUpdateResultsStyle($t($t({},Ge.be),this.props.resultsStyle))}},{key:"render",value:function(){return s().createElement("span",{id:"search-bar-container",className:Wt()({toggled:!this.searchFitToTheScreen(),"no-sidebar":!this.props.sidebarIsActive}),style:this.props.sidebarIsActive?this.props.style:null},this.getSearchAndToggleButton(),s().createElement(sr,{fitToMapSize:this.props.fitResultsToMapSize,searchOptions:this.props.searchOptions,onUpdateResultsStyle:this.props.onUpdateResultsStyle,key:"nominatimresults"}))}}])&&er(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(s().Component),ir(Kt,"propTypes",{splitTools:u().bool,showOptions:u().bool,isSearchClickable:u().bool,fitResultsToMapSize:u().bool,searchOptions:u().object,resultsStyle:u().object,selectedItems:u().array,selectedServices:u().array,userServices:u().array,withToggle:u().oneOfType([u().bool,u().array]),enabled:u().bool,textSearchConfig:u().object,style:u().object,sidebarIsActive:u().bool}),ir(Kt,"defaultProps",{searchOptions:{services:[{type:"nominatim",priority:5}]},isSearchClickable:!1,splitTools:!0,resultsStyle:{color:"#3388ff",weight:4,dashArray:"",fillColor:"#3388ff",fillOpacity:.2},fitResultsToMapSize:!0,withToggle:!1,enabled:!0,style:{},sidebarIsActive:!1}),Kt));const pr={SearchPlugin:a()((0,f.connect)((0,p.zB)({style:function(e){return(0,Yt.ic)(e,{right:!0})},offsets:function(e){return(0,Yt.ic)(e,{right:!0,left:!0})},mapSize:function(e){return(0,ht.GV)({width:!0})(e)},sidebarIsActive:function(e){return(0,Ht.zL)(e)}}),{})(fr),{OmniBar:{name:"search",position:1,tool:!0,priority:1}}),epics:{searchEpic:function(e){return e.ofType(h.bj).debounceTime(250).switchMap((function(t){return Je.Observable.from((t.services||[{type:"nominatim",priority:5}]).map((function(e){var r=pt.b.Utils.getService(e.type);if(!r){var n=new Error("Service Missing");return n.msgId="search.service_missing",n.serviceType=e.type,Je.Observable.of(n).do((function(e){throw e}))}return Je.Observable.defer((function(){return r(t.searchText,e.options).then((function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((function(t){return _t(_t({},t),{},{__SERVICE__:e,__PRIORITY__:e.priority||0})}))}))})).retryWhen((function(e){return e.delay(200).scan((function(e,t){if(e>=2)throw t;return e+1}),0)}))}))).mergeAll().scan((function(e,t){return it()([].concat(Ot(e),Ot(t)),["__PRIORITY__"])})).map((function(e){return(0,h.WN)(e.slice(0,t.maxResults||15),!1)})).startWith((0,h.yo)(!0)).takeUntil(e.ofType(h.Av,h.M8,h.dX)).concat([(0,h.yo)(!1)]).catch((function(e){var t=_t(_t({msgId:"search.generic_error"},e),{},{message:e.message,stack:e.stack});return Je.Observable.from([(0,h.kE)(t),(0,h.yo)(!1)])}))}))},searchOnStartEpic:function(e,t){return e.ofType(h.Vc).switchMap((function(e){var r=e.layer,n=e.cql_filter,o=t.getState();if(0===(0,ut.OX)(o).filter((function(e){return e.name===r})).length)return Je.Observable.of((0,h.Tw)());var i=(0,ut.dT)(o,r);return i&&n?Je.Observable.defer((function(){return(0,yt.DH)(i.url,{maxFeatures:1,typeName:r,srsName:"EPSG:4326",outputFormat:"application/json",cql_filter:n}).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.features&&e.features.length&&_t(_t({},e.features[0]),{},{typeName:r})}))})).switchMap((function(e){var r=e.type,o=e.geometry,i=e.typeName,a=tt()({type:r,geometry:o}).geometry.coordinates;if(a){var c,u={lng:a[0],lat:a[1]},l=(0,ht.uy)(t.getState()),s=(0,ft.reproject)(a,"EPSG:4326",l),f=s.x,p=s.y;return c=(0,mt.xt)(t.getState())?Je.Observable.of((0,bt.i8)(ct()(),{component:vt.IDENTIFY_POPUP,maxWidth:600,position:{coordinates:[f,p]}})):Je.Observable.of((0,lt.HP)()),Je.Observable.of((0,lt.lK)({latlng:u},i,[i],Pt({},i,{cql_filter:n}))).merge(c)}return Je.Observable.empty()})).catch((function(){return Je.Observable.of((0,h.I3)())})):Je.Observable.empty()}))},searchItemSelected:function(e,t){return e.ofType(h.dX).switchMap((function(e){var r=Je.Observable.of(e.item).concatMap((function(t){if(t&&t.__SERVICE__&&t.__SERVICE__.geomService){var r=(0,Ce.Iz)(t.__SERVICE__.geomService.options.staticFilter||"")(t);return Je.Observable.fromPromise(pt.b.Utils.getService(t.__SERVICE__.geomService.type)("",a()({},t.__SERVICE__.geomService.options,{staticFilter:r})).then((function(e){return a()({},t,{geometry:ft.default.mergeToPolyGeom(e)})})))}return Je.Observable.of(e.item)})).concatMap((function(e){var r=e.bbox||e.properties.bbox||Qe()(e),n=[(0,b.Px)([r[0],r[1],r[2],r[3]],"EPSG:4326",e.__SERVICE__&&e.__SERVICE__.options&&e.__SERVICE__.options.maxZoomLevel||21),(0,h._q)(e)];if(e.__SERVICE__&&!nt()(e.__SERVICE__.launchInfoPanel)&&e.__SERVICE__.options&&e.__SERVICE__.options.typeName){var o=tt()(e).geometry.coordinates,i={lng:o[0],lat:o[1]},a=e.__SERVICE__.options.typeName;if(o){var c=t.getState(),u=a&&(0,ut.dT)(c,a),l=null,s=[],f={},p=!1;return"single_layer"===e.__SERVICE__.launchInfoPanel&&(p=e.__SERVICE__.forceSearchLayerVisibility,s=[a],l=e.id,f=Pt({},e.__SERVICE__.options.typeName,_t({info_format:wt(u,c)},l?{featureid:l,CQL_FILTER:void 0}:{}))),[].concat(Ot(p&&u?[(0,st.He)(u.id,{visibility:!0})]:[]),Ot(e.__SERVICE__.openFeatureInfoButtonEnabled?[]:[(0,lt.lK)({latlng:i},a,s,f,l)]),[(0,lt.HP)()],n)}}return n})),n=e.item,o=n&&n.__SERVICE__&&n.__SERVICE__.then,i=o?Je.Observable.of((0,h.QJ)(o.map((function(e){return _t(_t({},e),{},{options:_t({item:n},e.options)})})),{text:(0,Ce.Iz)(n.__SERVICE__.displayName||"")(n),placeholder:n.__SERVICE__.nestedPlaceholder&&(0,Ce.Iz)(n.__SERVICE__.nestedPlaceholder||"")(n),placeholderMsgId:n.__SERVICE__.nestedPlaceholderMsgId&&(0,Ce.Iz)(n.__SERVICE__.nestedPlaceholderMsgId||"")(n)},(0,Ce.Iz)(n.__SERVICE__.searchTextTemplate||"")(n))):Je.Observable.empty(),c=n.__SERVICE__&&n.__SERVICE__.searchTextTemplate,u=c?Je.Observable.of((0,h.k9)((0,Ce.Iz)(c)(n))):Je.Observable.empty();return Je.Observable.of((0,h.kV)()).concat(r,i,u)}))},zoomAndAddPointEpic:function(e,t){return e.ofType(h.b4).switchMap((function(e){var r={type:"Feature",geometry:{type:"Point",coordinates:[e.pos.x,e.pos.y]}},n=t.getState();return Je.Observable.from([(0,y.W)("search","search","overlay",{features:[r],type:"vector",name:"searchPoints",id:"searchPoints",visibility:!0,style:n.search&&n.search.style||Ge.be}),(0,b.xy)(e.pos,e.zoom,e.crs)])}))},textSearchShowGFIEpic:function(e,t){return e.ofType(h.al).filter((function(e){var t,r=e.item,n=void 0===r?{}:r;return!(null!=n&&null!==(t=n.__SERVICE__)&&void 0!==t&&t.customGFI)})).switchMap((function(r){var n,o,i,a,c,u,l=r.item,s=t.getState(),f=null==l||null===(n=l.__SERVICE__)||void 0===n||null===(o=n.options)||void 0===o?void 0:o.typeName,p=f&&(0,ut.dT)(s,f),y=l.bbox||l.properties.bbox||Qe()(l),d=tt()(l).geometry.coordinates,m={lng:d[0],lat:d[1]},v=l.id;return d&&(0,Ge.zA)(null==l?void 0:l.__SERVICE__)&&(0,Ge.Tv)(p,null==l?void 0:l.__SERVICE__)?(i=Je.Observable).of.apply(i,Ot(null!=l&&null!==(a=l.__SERVICE__)&&void 0!==a&&a.forceSearchLayerVisibility&&p?[(0,st.He)(p.id,{visibility:!0})]:[]).concat([(0,lt.lK)({latlng:m},f,[f],Pt({},f,_t({info_format:wt(p,s)},v?{featureid:v,CQL_FILTER:void 0}:{})),v),(0,lt.HP)(),(0,h._q)(l)])).merge(y?e.ofType(lt.XL).take(1).mapTo((0,b.Px)([y[0],y[1],y[2],y[3]],"EPSG:4326",(null==l||null===(c=l.__SERVICE__)||void 0===c||null===(u=c.options)||void 0===u?void 0:u.maxZoomLevel)||21)).takeUntil(e.ofType(lt.Ih,lt.km)):Je.Observable.empty()).let((function(e){return y&&(0,ut._$)(t.getState())?e.startWith((0,lt.PM)(!1)).concat(Je.Observable.of((0,lt.PM)(!0))):e})):Je.Observable.empty()}))},delayedSearchEpic:function(e){return e.ofType(h.qj).switchMap((function(t){var r=t.layer,n=t.cql_filter;return e.ofType(st.oE).filter((function(e){return e.layer.name===r})).take(1).switchMap((function(){return Je.Observable.of((0,h.l4)({layer:r,cql_filter:n}))}))}))}},reducers:{search:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case h.dX:var n,o,i=(r.service||{}).type,c="nominatim"===i?null===(n=r.item.properties)||void 0===n?void 0:n.display_name:"wfs"===i?(0,Ce.Iz)((null===(o=r.service)||void 0===o?void 0:o.displayName)||"")(r.item):t.searchText;return Rt(Rt({},t),{},{searchText:c||t.searchText||""});case h.NN:return a()({},t,{loading:r.loading});case h.O7:return a()({},t,{error:r.error});case h.gs:return a()({},t,{searchText:r.searchText,error:null});case h.p7:var u=r.results;return!0===r.append&&t&&t.results&&(u=[].concat(Tt(t.results),Tt(r.results))),a()({},t,{results:u,error:null});case h.Av:return a()({},t,{results:null,error:null});case h.wn:var l=r.markerPosition.latlng?{latlng:r.markerPosition.latlng,lat:r.markerPosition.latlng.lat,lng:r.markerPosition.latlng.lng}:r.markerPosition;return a()({},t,{markerPosition:l,markerLabel:r.markerLabel});case h.Gh:return a()({},t,{highlightedFeature:r.highlightedFeature});case h.M8:return{style:t.style||{}};case m.l:return null;case h.C2:return a()({},t,{selectedServices:r.services,searchText:r.searchText,selectedItems:(t.selectedItems||[]).concat(r.items)});case h.oQ:return t?a()({},{selectedItems:t.selectedItems&&t.selectedItems.filter((function(e){return e!==r.item})),searchText:""===t.searchText&&r.item&&r.item.text?r.item.text.substring(0,r.item.text.length):t.searchText}):t;case h.x2:return a()({},t,{style:r.style});case h.Y7:return Rt(Rt({},t),{},{activeSearchTool:r.activeSearchTool});case h.GI:return Rt(Rt({},t),{},{format:r.format});case h.KP:return Rt(Rt({},t),{},{coordinate:Rt(Rt({},t.coordinate),{},Nt({},r.coord,r.val))});case h.dS:return a()({},t,{markerPosition:null!=t&&null!==(e=t.markerPosition)&&void 0!==e&&e.latlng?{}:null==t?void 0:t.markerPosition});default:return t}},mapInfo:It.Z,searchconfig:v.Z}}},360951:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(240626),o=r(782904),i=r(881808),a=r(727418),c=r.n(a);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}const l=function(){var e,t,r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,l=arguments.length>1?arguments[1]:void 0;switch(l.type){case n.bL:return c()({},a,(e={},t=l.property,r=l.value,(t=function(e){var t=function(e,t){if("object"!=u(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==u(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e));case i.ok:var s=l.config.map.text_search_config||l.config.map.text_serch_config;return c()({},a,{textSearchConfig:s});case o.l:case n.f6:return c()({},a,{service:void 0,page:l.page,init_service_values:void 0,editIdx:void 0});case n.E_:var f=(a.textSearchConfig&&a.textSearchConfig.services||[]).slice(),p=c()({},l.service,{priority:parseInt(l.service.priority,10)});return-1!==l.idx?f[l.idx]=p:f.push(p),c()({},a,{service:void 0,page:0,init_service_values:void 0,editIdx:void 0,textSearchConfig:{services:f,override:a.textSearchConfig&&a.textSearchConfig.override||!1}});default:return a}}},55105:(e,t,r)=>{"use strict";r.d(t,{Ss:()=>d,Nr:()=>m,QJ:()=>b,ic:()=>v,Jz:()=>h,VM:()=>g,CF:()=>O,Ju:()=>S,Fc:()=>E,gQ:()=>_});var n=r(91175),o=r.n(n),i=r(288306),a=r.n(i),c=r(800827),u=r(552259),l=r(737275);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==s(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var d=function(e){return e.maplayout&&e.maplayout.layout||{}},m=function(e){return e.maplayout&&e.maplayout.boundingMapRect||{}},b=function(e){return e.maplayout&&e.maplayout.boundingSidebarRect||{}},v=a()((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=d(e),o=b(e);return n&&Object.keys(n).filter((function(e){return t[e]})).reduce((function(e,t){var i;return p(p({},e),{},y({},t,r&&null!==(i=o[t])&&void 0!==i?i:n[t]))}),{})||{}}),(function(e,t,r){return JSON.stringify(d(e))+JSON.stringify(b(e))+JSON.stringify(t)+(r?"_isDock":"")})),h=function(e){var t;return!(null===(t=d(e))||void 0===t||!t.rightPanel)},g=function(e){var t,r=l.ZP.getConfigProp("mapLayout")||u.Ur;return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=d(e);return!!o()(t.filter((function(e){return r[e.key]})).map((function(e){return"not"===e.type?r[e.key]!==e.value&&r[e.key]:r[e.key]===e.value})))}(e,[{key:"bottom",value:null!==(t=null==r?void 0:r.bottom.sm)&&void 0!==t?t:0,type:"not"}])},O=function(e){var t=(0,c.Od)(e),r=m(e);return r&&t&&t.size&&{left:(0,u.pb)(r.left,t.size.width),bottom:(0,u.pb)(r.bottom,t.size.height),right:(0,u.pb)(r.right,t.size.width),top:(0,u.pb)(r.top,t.size.height)}},S=function(e){var t,r;return null!==(t=null==e||null===(r=e.maplayout)||void 0===r?void 0:r.dockPanels)&&void 0!==t?t:{left:[],right:[]}},E=function(e){return v(e,{height:!0,right:!0},!0)},_=function(e){return v(e,{right:!0},!0)}},88791:(e,t,r)=>{"use strict";r.d(t,{Tp:()=>a,zL:()=>c,mr:()=>u});var n=r(227361),o=r.n(n),i=r(367306),a=function(e){return o()(e,"sidebarmenu.lastActiveItem",!1)},c=function(e){return o()(e,"controls.sidebarMenu.enabled",!1)},u=function(e){return(0,i.Wy)(e)}}}]);