(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[95121],{893222:(e,t,r)=>{"use strict";r.d(t,{gc:()=>g,Mc:()=>O,ex:()=>h,p:()=>w,aN:()=>P,iB:()=>j,j5:()=>S,gB:()=>E,QW:()=>k,w_:()=>C,ji:()=>T,Z0:()=>D,Vf:()=>A,z_:()=>I,lC:()=>R,m2:()=>Z,i7:()=>M,Ed:()=>x,ov:()=>B,WW:()=>L});var n=r(227361),o=r.n(n),i=r(91175),u=r.n(i),a=r(545578),l=r.n(a),c=(r(313311),r(747037)),s=r.n(c),f=r(675110),d=r(99009),b=r(274621);function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=v(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=v(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==v(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var g=function(e){return o()(e,"styleeditor.temporaryId")},O=function(e){return o()(e,"styleeditor.templateId")},h=function(e){return o()(e,"styleeditor.status")},w=function(e){return o()(e,"styleeditor.error")||{}},P=function(e){return o()(e,"styleeditor.loading")},j=function(e){return o()(e,"styleeditor.format")||"css"},S=function(e){return o()(e,"styleeditor.languageVersion")||{}},E=function(e){return o()(e,"styleeditor.code")},k=function(e){return o()(e,"styleeditor.initialCode")||""},C=function(e){return o()(e,"styleeditor.addStyle")||""},T=function(e){return o()(e,"styleeditor.enabled")},D=function(e){return o()(e,"styleeditor.service")||{}},A=function(e){var t=(0,f.jN)(e);return m(m({},(0,f.Iz)(e)||{}),t&&t.options||{})},I=function(e){var t=function(e){return o()(e,"styleeditor.editingAllowedRoles",[])}(e),r=function(e){return o()(e,"styleeditor.editingAllowedGroups",[])}(e),n=(0,d.uW)(A(e),D(e));return(0,b.tv)({allowedRoles:t,allowedGroups:r})(e)&&n},R=function(e){var t=A(e),r=(0,d.Py)(t).geometryType;return void 0===r?"vector":r},Z=function(e){var t=A(e),r=(0,d.Py)(t).properties;return void 0===r?{}:r},M=function(e){var t=A(e);return t.style||t.availableStyles&&t.availableStyles[0]&&t.availableStyles[0].name},x=function(e){var t=(A(e)||{}).availableStyles,r=void 0===t?[]:t,n=M(e);return u()(r.filter((function(e){return e.name===n})).map((function(e){return e.format})))},B=function(e){var t=A(e),r=t.availableStyles||[],n=(u()(r)||{}).name,o=t.style||t&&!t.style&&n;return{availableStyles:l()(r.map((function(e){var t=e&&e.title&&s()(e.title)&&e.title.split(d.I$),r=t&&t[0]||e.name;return m(m({},e),{},{label:r})})),"name"),defaultStyle:n,enabledStyle:o}},L=function(e){var t;return null==e||null===(t=e.styleeditor)||void 0===t?void 0:t.metadata}},650079:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(124852);const o=function(e){var t=e.disabled,r=e.onClickOut,o=(0,n.useRef)();return(0,n.useEffect)((function(){function e(e){var n;!t&&(null==o||null===(n=o.current)||void 0===n?void 0:n.contains)&&!o.current.contains(e.target)&&r()}return window.addEventListener("mousedown",e),function(){window.removeEventListener("mousedown",e)}}),[t,o,r]),o}},678833:(e,t,r)=>{"use strict";r.d(t,{Z:()=>v});var n=r(124852),o=r.n(n),i=r(598611),u=r.n(i),a=r(322843);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function f(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==l(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e){return function(e){if(Array.isArray(e))return b(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return b(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?b(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const v=function(e){var t=e.items,r=e.loadedPlugins,i=e.loaderComponent,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],c=(0,n.useRef)({});c.current={items:t,loadedPlugins:r,loaderComponent:i};var f=u()(Object.keys(r||{}),","),b=(0,n.useMemo)((function(){return function(e){return d(e.items).sort((function(e,t){return e.position>t.position?1:-1})).map((function(t){return s(s({},t),{},{Component:t.Component||(0,a.KB)(t,e.loadedPlugins,e.loaderComponent||o().createElement("div",null))})}))||[]}(c.current)}),[f].concat(d(l)));return b}},829863:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>V});var n=r(124852),o=r.n(n),i=r(322843),u=r(171703),a=r(22222),l=r(737275),c=r(398288),s=r(274621),f=r(643892),d=r(452992),b=r(17594),v=r(925108),y=r(782904),m=r(572036),p=r(482100),g=r(303744),O=r(650079),h=r(100824),w=r(625635),P=r(877593),j=r(805346),S=r(675110),E=r(800827),k=r(770058),C=r(807461),T=r(678833),D=r(535721),A=["hide"];function I(e){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I(e)}function R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Z(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=I(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=I(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==I(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var M=(0,u.connect)((0,a.P1)([function(e){var t;return(null==e||null===(t=e.gnresource)||void 0===t?void 0:t.data)||null},function(e){var t;return(null==e||null===(t=e.gnresource)||void 0===t?void 0:t.loading)||!1},function(e){var t,r;return(null==e||null===(t=e.gnresource)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.favorite)||!1},function(e){var t;return(null==e||null===(t=e.gnsave)||void 0===t?void 0:t.savingThumbnailMap)||!1},S.l2,p.km,p.Bs,E.Od,function(e){var t;return(null==e||null===(t=e.gnresource)||void 0===t?void 0:t.showMapThumbnail)||!1},d.WB],(function(e,t,r,n,o,i,u,a,l,c){return{layers:o,resource:e,loading:t,savingThumbnailMap:n,favorite:r,isThumbnailChanged:i,resourceThumbnailUpdating:u,initialBbox:null==a?void 0:a.bbox,enableMapViewer:l,downloading:c,resourceId:e.pk}})),{closePanel:y.Xg.bind(null,"rightOverlay","enabled",!1),onFavorite:f.gw,onMapThumbnail:f.CB,onResourceThumbnail:f.e5,onClose:f.qs,onSetExtent:f.rg})(c.Z),x=(0,u.connect)((0,a.P1)([p.V$,p.fg,p.L4],(function(e,t,r){return{hide:e||!t,resourceType:r}})),{onClick:y.Xg.bind(null,"rightOverlay","enabled","DetailViewer")})((function(e){var t=e.onClick,r=e.hide,n=e.variant,i=e.size,u=e.showMessage,a=e.resourceType,l=((0,D.NN)()[a]||{}).icon,c=void 0===l?"info-circle":l;return r?null:o().createElement(g.Z,{variant:n,size:i,onClick:function(){t()}},u?o().createElement(j.Z,{msgId:"gnviewer.viewInfo"}):o().createElement(b.Z,{name:c}))}));function B(e,t){var r=e.location,n=e.enabled,i=e.onEditResource,u=e.onEditAbstractResource,a=e.onEditThumbnail,l=e.canEdit,c=e.user,s=e.onClose,f=e.monitoredState,d=e.queryPathname,b=void 0===d?"/":d,v=e.tabs,y=void 0===v?[]:v,m=e.items,p=e.resourceId,g=(0,k._y)(f,{tabs:y}),w=(0,O.Z)({disabled:!n,onClickOut:function(){s()}}),j=t.loadedPlugins,S=(0,T.Z)({items:m,loadedPlugins:j},[p]).filter((function(e){return"toolbar"===e.target}));return o().createElement(h.Z,{enabled:n,ref:w,className:"gn-overlay-wrapper"},o().createElement(M,{editTitle:function(e){i(e)},editAbstract:function(e){u(e)},editThumbnail:function(e){a(e,!0)},activeEditMode:n&&l,enableFavorite:!!c,formatHref:function(e){return(0,P.nz)(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?R(Object(r),!0).forEach((function(t){Z(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({location:r},e))},tabs:g.tabs,pathname:b,toolbarItems:S}))}var L=(0,u.connect)((0,a.P1)([function(e){var t,r;return"DetailViewer"===(null==e||null===(t=e.controls)||void 0===t||null===(r=t.rightOverlay)||void 0===r?void 0:r.enabled)},p.il,p.V$,p.fg,s.np,function(e){return(0,i.bh)(e,(0,l.u8)("monitorState"))},function(e){var t;return(null==e||null===(t=e.gnresource)||void 0===t?void 0:t.data)||null}],(function(e,t,r,n,o,i,u){return{enabled:e,canEdit:t,hide:r||!n,user:o,monitoredState:i,resourceId:null==u?void 0:u.pk}})),{onEditResource:f.Br,onEditAbstractResource:f.bI,onEditThumbnail:f.U5,onClose:y.Xg.bind(null,"rightOverlay","enabled",!1)})((0,w.EN)((function(e){var t=e.hide,r=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,A);return t?null:o().createElement(B,r)})));const V=(0,i.rx)("DetailViewer",{component:L,containers:{ActionNavbar:{name:"DetailViewerButton",Component:x}},epics:C.Z,reducers:{gnresource:m.Z,controls:v.Z}})},969438:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>$});var n=r(124852),o=r.n(n),i=r(322843),u=r(171703),a=r(22222),l=r(737275),c=r(398288),s=r(274621),f=r(643892),d=r(452992),b=r(17594),v=r(925108),y=r(782904),m=r(572036),p=r(805207),g=r(482100),O=r(893222),h=r(303744),w=r(650079),P=r(100824),j=r(625635),S=r(877593),E=r(805346),k=r(800827),C=r(535721),T=r(770058),D=r(815135),A=r(49977),I=r(441609),R=r.n(I),Z=r(337326);const M={gnGetLayerLinkedResources:function(e,t){return e.ofType(f.ac).filter((function(e){var r,n;return!e.pending&&(null===(r=e.data)||void 0===r?void 0:r.pk)&&R()(null===(n=(0,g.Js)(t.getState()))||void 0===n?void 0:n.linkedResources)})).switchMap((function(e){return A.Observable.defer((function(){return(0,Z.NH)(e.data.pk).then((function(e){var t,r,n=null!==(t=e.linked_to)&&void 0!==t?t:[],o=null!==(r=e.linked_by)&&void 0!==r?r:[];return R()(n)&&R()(o)?{}:{linkedTo:n,linkedBy:o}})).catch((function(){return[]}))})).switchMap((function(e){return A.Observable.of((0,f.Ao)({linkedResources:e}))}))}))}};function x(e){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(e)}function B(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function L(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=x(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=x(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==x(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var V=(0,D.Z)(h.Z),_=(0,u.connect)((0,a.P1)([function(e){var t;return(null==e||null===(t=e.gnresource)||void 0===t?void 0:t.layerDataset)||null},function(e){var t;return(null==e||null===(t=e.gnresource)||void 0===t?void 0:t.loading)||!1},function(e){var t,r;return(null==e||null===(t=e.gnresource)||void 0===t||null===(r=t.layerDataset)||void 0===r?void 0:r.favorite)||!1},function(e){var t;return(null==e||null===(t=e.gnsave)||void 0===t?void 0:t.savingThumbnailMap)||!1},g.km,g.Bs,k.Od,function(e){var t;return(null==e||null===(t=e.gnresource)||void 0===t?void 0:t.showMapThumbnail)||!1},d.WB],(function(e,t,r,n,o,i,u,a,l){return{resource:e,loading:t,savingThumbnailMap:n,favorite:r,isThumbnailChanged:o,resourceThumbnailUpdating:i,initialBbox:null==u?void 0:u.bbox,enableMapViewer:a,downloading:l,canDownload:(0,C.sH)(e,"download_resourcebase"),resourceId:e.pk}})),{closePanel:y.Xg.bind(null,"rightOverlay","enabled",!1),onFavorite:f.gw,onMapThumbnail:f.CB,onResourceThumbnail:f.e5,onClose:f.qs,onAction:f.Rk})(c.Z),N=(0,u.connect)((0,a.P1)([O.Vf],(function(e){return{layer:e}})),{onClick:y.Xg.bind(null,"rightOverlay","enabled","LayerDetailViewer")})((function(e){var t,r=e.onClick,n=e.layer,i=e.size,u=e.status,a=e.showMessage;return(null==n||null===(t=n.extendedParams)||void 0===t?void 0:t.pk)&&"LAYER"===u?o().createElement(V,{variant:"primary",className:"square-button-md",size:i,onClick:function(){r()},tooltipId:o().createElement(E.Z,{msgId:"gnviewer.info"})},a?o().createElement(E.Z,{msgId:"gnviewer.editInfo"}):o().createElement(b.Z,{name:"info-circle"})):null})),z=(0,u.connect)((0,a.P1)([function(e){var t,r;return"LayerDetailViewer"===(null==e||null===(t=e.controls)||void 0===t||null===(r=t.rightOverlay)||void 0===r?void 0:r.enabled)},g.il,O.Vf,g.fg,s.np,function(e){return(0,i.bh)(e,(0,l.u8)("monitorState"))}],(function(e,t,r,n,o){return{enabled:e,canEdit:t,layer:r,user:n,monitoredState:o}})),{onEditResource:f.Br,onEditAbstractResource:f.bI,onEditThumbnail:f.U5,onClose:y.Xg.bind(null,"rightOverlay","enabled",!1)})((0,j.EN)((function(e){var t=e.location,r=e.enabled,n=e.onEditResource,i=e.onEditAbstractResource,u=e.onEditThumbnail,a=e.canEdit,l=e.user,c=e.onClose,s=e.monitoredState,f=e.queryPathname,d=void 0===f?"/":f,b=e.tabs,v=void 0===b?[]:b,y=(0,T._y)(s,{tabs:v}),m=(0,w.Z)({disabled:!r,onClickOut:function(){c()}});return o().createElement(P.Z,{enabled:r,ref:m,className:"gn-overlay-wrapper"},o().createElement(_,{editTitle:function(e){n(e)},editAbstract:function(e){i(e)},editThumbnail:function(e){u(e,!0)},activeEditMode:r&&a,enableFavorite:!!l,formatHref:function(e){return(0,S.nz)(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?B(Object(r),!0).forEach((function(t){L(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({location:t},e))},tabs:y.tabs,pathname:d}))})));const $=(0,i.rx)("LayerDetailViewer",{component:z,containers:{TOC:{target:"toolbar",Component:N}},epics:M,reducers:{gnresource:m.Z,gnsearch:p.Z,controls:v.Z}})},572036:(e,t,r)=>{"use strict";r.d(t,{Z:()=>P});var n=r(618446),o=r.n(n),i=r(441609),u=r.n(i),a=r(414293),l=r.n(a),c=r(643892),s=r(535721),f=["data"],d=["data"],b=["features"],v=["features"],y=["features"];function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function p(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){h(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function h(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=m(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==m(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var w={selectedLayerPermissions:[],data:{},permissions:[]};const P=function(){var e,t,r,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,i=arguments.length>1?arguments[1]:void 0;switch(i.type){case c.$X:return w;case c.ql:return O(O({},n),{},{configError:void 0,loadingResourceConfig:i.loading});case c.nS:return O(O({},n),{},{loading:!1,configError:i.message});case c.W:return O(O({},n),{},{loading:!0});case c.Zf:var a,m,g=i.data||{},h=(g.data,O({},p(g,f))),P=null===(a=n.data)||void 0===a?void 0:a.linkedResources;return u()(P)||h.pk!==(null===(m=n.data)||void 0===m?void 0:m.pk)||(h.linkedResources=P),O(O({},n),{},{error:null,initialResource:O({},i.data),data:h,loading:!1,isNew:!1});case c.ac:var j,S,E=i.data||{},k=(E.data,O({},p(E,d))),C=null===(j=n.layerDataset)||void 0===j?void 0:j.linkedResources;return u()(C)||k.pk!==(null===(S=n.layerDataset)||void 0===S?void 0:S.pk)||(k.linkedResources=C),O(O({},n),{},{error:null,initialLayerResource:O({},i.data),layerDataset:k,loading:!1});case c.Eu:return O(O({},n),{},{initialResource:null,data:null,error:i.error,loading:!1});case c.Vy:return O(O({},n),{},{data:O(O({},n.data),i.properties)});case c.I:return O(O({},n),{},{layerDataset:O(O({},n.layerDataset),i.properties)});case c.YB:return O(O({},n),{},{type:i.resourceType});case c.xm:return O(O({},w),{},{isNew:!0});case c._f:return O(O({},n),{},{id:i.id});case c.ek:return O(O({},n),{},{permissions:i.permissions});case c.cd:return O(O({},n),{},{data:O(O({},null==n?void 0:n.data),{},{title:null==i?void 0:i.title,name:null==i?void 0:i.title})});case c.pt:return O(O({},n),{},{data:O(O({},null==n?void 0:n.data),{},{abstract:null==i?void 0:i.abstract})});case c.ww:return O(O({},n),{},{data:O(O({},null==n?void 0:n.data),{},{thumbnail_url:null==i?void 0:i.thumbnailUrl,thumbnailChanged:null==i?void 0:i.thumbnailChanged})});case c._Z:return O(O({},n),{},{data:O(O({},null==n?void 0:n.data),{},{updatingThumbnail:!0})});case c.dh:return O(O({},n),{},{showMapThumbnail:i.enabled});case c.p2:return O(O({},n),{},{selectedLayerPermissions:i.permissions});case c.ih:return O(O({},n),{},{initialCompactPermissions:i.compactPermissions,compactPermissions:i.compactPermissions,isCompactPermissionsChanged:!1,geoLimits:[]});case c.J5:return O(O({},n),{},{compactPermissions:i.compactPermissions,isCompactPermissionsChanged:!o()((0,s.go)(n.initialCompactPermissions),(0,s.go)(i.compactPermissions)),geoLimits:(0,s.vB)(i.compactPermissions)});case c.uA:if(n.compactPermissions){var T=n.compactPermissions,D=T.users,A=T.organizations,I=T.groups;return O(O({},n),{},{compactPermissions:{users:D.map((function(e){return e.features,p(e,b)})),organizations:A.map((function(e){return e.features,p(e,v)})),groups:I.map((function(e){return e.features,p(e,y)}))},geoLimits:[]})}return n;case c.Y0:return O(O({},n),{},{data:O(O({},n.data),{},{extent:O(O({},null===(e=n.data)||void 0===e?void 0:e.extent),{},{coords:i.coords})})});case c.sA:return O(O({},n),{},{params:i.params});case c.ip:return O(O({},n),{},{viewerLinkedResource:i.resource});case c.F_:return O(O({},n),{},{defaultViewerPlugins:i.plugins});case c.pG:return O(O({},n),{},{selectedLayerIsDataset:!l()(null===(t=i.layer)||void 0===t||null===(r=t.extendedParams)||void 0===r?void 0:r.pk)});default:return n}}},770058:(e,t,r)=>{"use strict";r.d(t,{gj:()=>d,QH:()=>b,mk:()=>v,BK:()=>y,bH:()=>m,_y:()=>p});var n=r(227361),o=r.n(n),i=r(414293),u=r.n(i),a=r(322843),l=r(368523);function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,u,a=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(a.push(n.value),a.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(u=r.return(),Object(u)!==u))return}finally{if(c)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function d(e,t,r){var n=t?t.filter((function(e){return e.type===r})):void 0;return void 0===n||n&&0===n.length||n&&n.some((function(t){return e&&e.includes(null==t?void 0:t.value)}))}function b(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",n=t.split(r).map((function(t){return function(e,t){return 0===(null==t?void 0:t.indexOf("${"))?o()(e,t.replace(/^\$\{(.*)\}$/,"$1")):t}(e,t)}));return n.join(r)}var v=function(e){return!(""===e||u()(e))},y=function(e){return function t(r){return r&&"object"===f(r)?Array.isArray(r)?r.map(t):Object.fromEntries(Object.entries(r).map((function(e){var r=c(e,2),n=r[0],o=r[1];return[n,t(o)]}))):e(r)}},m=function e(t,r){return t&&t.reduce((function(t,n){var o=n;return Object.entries(n).forEach((function(t){var i=c(t,2),u=i[0],a=i[1];Array.isArray(a)&&(o[u]=e(n[u],r))})),r(o)&&t.push(o),t}),[])},p=function(e,t){var r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).filterFunc,n=void 0===r?function(e){return!e.disableIf}:r;return c(m([y((function(t){return(0,a.CU)((function(t){return o()(e,t)}),(0,l.z)(),t)}))(t)],n),1)[0]}}}]);