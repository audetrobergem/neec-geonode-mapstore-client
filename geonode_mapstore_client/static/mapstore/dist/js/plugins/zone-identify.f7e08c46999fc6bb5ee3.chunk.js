(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[15014,47310],{460604:(e,t,n)=>{"use strict";n.d(t,{hn:()=>r,yg:()=>o,vD:()=>i,jJ:()=>l,oy:()=>u,am:()=>a,W:()=>c,B1:()=>f,YP:()=>s,fU:()=>y,cY:()=>d});var r="ADDITIONALLAYER:ADD_ADDITIONAL_LAYERS",o="ADDITIONALLAYER:REMOVE_ADDITIONAL_LAYER",i="ADDITIONALLAYER:REMOVE_ALL_ADDITIONAL_LAYERS",l="ADDITIONALLAYER:UPDATE_ADDITIONAL_LAYER",u="ADDITIONALLAYER:UPDATE_OPTIONS_BY_OWNER",a="ADDITIONALLAYER:MERGE_OPTIONS_BY_OWNER",c=function(e,t){return{type:l,id:e,owner:t,actionType:arguments.length>2&&void 0!==arguments[2]?arguments[2]:"override",options:arguments.length>3?arguments[3]:void 0}},f=function(e,t){return{type:u,owner:e,options:t}},s=function(e,t){return{type:a,owner:e,options:t}},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,n=e.owner;return{type:o,id:t,owner:n}},d=function(e){return{type:i,owner:e}}},604206:(e,t,n)=>{"use strict";n.d(t,{hZ:()=>r,pb:()=>o,kD:()=>i,DI:()=>l,IC:()=>u,uB:()=>f,Rh:()=>s,G_:()=>y,vU:()=>d,Vw:()=>p,KD:()=>m,uj:()=>E,lo:()=>v,Yf:()=>b,fo:()=>g,PY:()=>O,bp:()=>I,oJ:()=>T,k4:()=>h,sc:()=>N,Li:()=>_});var r="CHANGE_DRAWING_STATUS",o="DRAW:END_DRAWING",i="DRAW:SET_CURRENT_STYLE",l="DRAW:GEOMETRY_CHANGED",u="DRAW:DRAW_SUPPORT_STOPPED",a="DRAW:FEATURES_SELECTED",c="DRAW:DRAWING_FEATURES",f="DRAW:SET_SNAPPING_LAYER",s="DRAW:SNAPPING_IS_LOADING",y="DRAW:TOGGLE_SNAPPING",d="DRAW:SET_SNAPPING_CONFIG";function p(e,t,n,r,o){return{type:l,features:e,owner:t,enableEdit:n,textChanged:r,circleChanged:o}}function m(){return{type:a,features:arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]}}function E(){return{type:c,features:arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]}}function v(){return{type:u}}function b(e,t,n,o,i,l){return{type:r,status:e,method:t,owner:n,features:o,options:i,style:l}}function g(e,t){return{type:o,geometry:e,owner:t}}function O(e){return{type:i,currentStyle:e}}var I=function(e){return b("clean","",e,[],{})};function T(){return{type:y}}function h(e){return{type:f,snappingLayer:e}}function N(){return{type:s}}function _(e,t,n){return{type:d,value:e,prop:t,pluginCfg:n}}},921914:(e,t,n)=>{"use strict";n.d(t,{XL:()=>o,km:()=>i,Ih:()=>l,Xw:()=>u,Pn:()=>a,DZ:()=>c,e8:()=>f,E0:()=>s,F9:()=>y,X_:()=>d,pb:()=>p,Re:()=>m,ih:()=>E,xy:()=>v,jL:()=>b,oz:()=>g,ph:()=>O,lF:()=>I,gG:()=>T,cb:()=>h,GI:()=>N,B1:()=>_,fv:()=>A,gc:()=>S,zX:()=>P,ZF:()=>D,Zb:()=>F,DW:()=>R,Xp:()=>L,Fm:()=>w,sV:()=>z,LU:()=>j,XP:()=>M,WU:()=>G,mK:()=>Y,g:()=>C,ws:()=>U,HP:()=>Z,aN:()=>k,Pg:()=>H,u0:()=>x,TM:()=>q,PM:()=>V,lK:()=>K,sv:()=>Q,MO:()=>X,oO:()=>B,Mc:()=>J,Zw:()=>$,RA:()=>ee,am:()=>te,ZM:()=>ne,wm:()=>re,Y$:()=>oe,Qu:()=>ie,kT:()=>le});var r=n(647310),o="LOAD_FEATURE_INFO",i="ERROR_FEATURE_INFO",l="EXCEPTIONS_FEATURE_INFO",u="CHANGE_MAPINFO_STATE",a="NEW_MAPINFO_REQUEST",c="PURGE_MAPINFO_RESULTS",f="CHANGE_MAPINFO_FORMAT",s="SHOW_MAPINFO_MARKER",y="HIDE_MAPINFO_MARKER",d="SHOW_REVERSE_GEOCODE",p="HIDE_REVERSE_GEOCODE",m="NO_QUERYABLE_LAYERS",E="CLEAR_WARNING",v="FEATURE_INFO_CLICK",b="IDENTIFY:UPDATE_FEATURE_INFO_CLICK_POINT",g="IDENTIFY:TOGGLE_HIGHLIGHT_FEATURE",O="TOGGLE_MAPINFO_STATE",I="UPDATE_CENTER_TO_MARKER",T="IDENTIFY:CHANGE_PAGE",h="IDENTIFY:CLOSE_IDENTIFY",N="IDENTIFY:CHANGE_FORMAT",_="IDENTIFY:TOGGLE_SHOW_COORD_EDITOR",A="IDENTIFY:EDIT_LAYER_FEATURES",S="IDENTIFY:CURRENT_EDIT_FEATURE_QUERY",P="IDENTIFY:SET_MAP_TRIGGER",D="IDENTIFY:TOGGLE_EMPTY_MESSAGE_GFI",F="IDENTIFY:SET_SHOW_IN_MAP_POPUP",R="IDENTIFY:IDENTIFY_IS_MOUNTED",L="IDENTIFY:INIT_PLUGIN";function w(e,t,n,r,i){return{type:o,data:t,reqId:e,requestParams:n,layerMetadata:r,layer:i}}function z(e,t,n,r){return{type:i,error:t,reqId:e,requestParams:n,layerMetadata:r}}function j(){return{type:m}}function M(){return{type:E}}function G(e,t){return{type:a,reqId:e,request:t}}function Y(e){return{type:u,enabled:e}}function C(){return{type:c}}function U(e){return{type:f,infoFormat:e}}function Z(){return{type:s}}function k(){return{type:y}}function W(e){return{type:d,reverseGeocodeData:e.data}}function H(e){return function(t){r.Z.reverseGeocode(e).then((function(e){t(W(e))})).catch((function(e){t(W(e))}))}}function x(){return{type:p}}function q(){return{type:O}}function V(e){return{type:I,status:e}}function K(e,t){return{type:v,point:e,layer:t,filterNameList:arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],overrideParams:arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},itemId:arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,ignoreVisibilityLimits:arguments.length>5&&void 0!==arguments[5]&&arguments[5]}}function Q(e){return{type:b,point:e}}function X(e){return{type:g,enabled:e}}function B(e){return{type:T,index:e}}var J=function(){return{type:h}},$=function(e){return{type:N,format:e}},ee=function(e){return{type:_,showCoordinateEditor:e}},te=function(e){return{type:A,layer:e}},ne=function(e){return{type:S,query:e}},re=function(e){return{type:P,trigger:e}},oe=function(e){return{type:F,value:e}},ie=function(e){return{type:R,isMounted:e}},le=function(e){return{type:L,cfg:e}}},362520:(e,t,n)=>{"use strict";n.d(t,{dn:()=>r,NS:()=>o,Kn:()=>i,FV:()=>l,Vd:()=>u,yS:()=>a});var r="MAP_LAYOUT:UPDATE_MAP_LAYOUT",o="MAP_LAYOUT:UPDATE_DOCK_PANELS",i="MAP_LAYOUT:FORCE_UPDATE_MAP_LAYOUT";function l(e){return{type:r,layout:e}}function u(e){return{type:o,name:e,action:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"add",location:arguments.length>2&&void 0!==arguments[2]?arguments[2]:"right"}}function a(){return{type:i}}},647310:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var r=n(375875),o=n.n(r),i=n(472500),l=n.n(i),u=n(727418),a=n.n(u),c={format:"json",bounded:0,polygon_geojson:1,priority:5};const f={geocode:function(e,t){var n=a()({q:e},c,t||{}),r=l().format({protocol:"https",host:"nominatim.openstreetmap.org",query:n});return o().get(r)},reverseGeocode:function(e,t){var n=a()({lat:e.lat,lon:e.lng},t||{},c),r=l().format({protocol:"https",host:"nominatim.openstreetmap.org/reverse",query:n});return o().get(r)}}},55105:(e,t,n)=>{"use strict";n.d(t,{Ss:()=>p,Nr:()=>m,QJ:()=>E,ic:()=>v,Jz:()=>b,VM:()=>g,CF:()=>O,Ju:()=>I,Fc:()=>T,gQ:()=>h});var r=n(91175),o=n.n(r),i=n(288306),l=n.n(i),u=n(800827),a=n(552259),c=n(737275);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return(t=function(e){var t=function(e){if("object"!=f(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==f(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=function(e){return e.maplayout&&e.maplayout.layout||{}},m=function(e){return e.maplayout&&e.maplayout.boundingMapRect||{}},E=function(e){return e.maplayout&&e.maplayout.boundingSidebarRect||{}},v=l()((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=p(e),o=E(e);return r&&Object.keys(r).filter((function(e){return t[e]})).reduce((function(e,t){var i;return y(y({},e),{},d({},t,n&&null!==(i=o[t])&&void 0!==i?i:r[t]))}),{})||{}}),(function(e,t,n){return JSON.stringify(p(e))+JSON.stringify(E(e))+JSON.stringify(t)+(n?"_isDock":"")})),b=function(e){var t;return!(null===(t=p(e))||void 0===t||!t.rightPanel)},g=function(e){var t,n=c.ZP.getConfigProp("mapLayout")||a.Ur;return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=p(e);return!!o()(t.filter((function(e){return n[e.key]})).map((function(e){return"not"===e.type?n[e.key]!==e.value&&n[e.key]:n[e.key]===e.value})))}(e,[{key:"bottom",value:null!==(t=null==n?void 0:n.bottom.sm)&&void 0!==t?t:0,type:"not"}])},O=function(e){var t=(0,u.Od)(e),n=m(e);return n&&t&&t.size&&{left:(0,a.pb)(n.left,t.size.width),bottom:(0,a.pb)(n.bottom,t.size.height),right:(0,a.pb)(n.right,t.size.width),top:(0,a.pb)(n.top,t.size.height)}},I=function(e){var t,n;return null!==(t=null==e||null===(n=e.maplayout)||void 0===n?void 0:n.dockPanels)&&void 0!==t?t:{left:[],right:[]}},T=function(e){return v(e,{height:!0,right:!0},!0)},h=function(e){return v(e,{right:!0},!0)}},228261:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var r=n(124852),o=n.n(r),i=n(45697),l=n.n(i),u=["id","className","style","children"];function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a.apply(null,arguments)}function c(e){var t=e.id,n=e.className,r=e.style,i=e.children,l=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,u),c=n?" "+n:"";return o().createElement(o().Fragment,null,o().createElement("div",a({},l,{id:t,className:"gn-spinner".concat(c),style:r}),o().createElement("div",null)),i)}c.propTypes={id:l().string,className:l().string,style:l().object},c.defaultProps={};const f=c},51605:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r.Z});var r=n(228261)},684751:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>de});var r=n(124852),o=n.n(r),i=n(45697),l=n.n(i),u=n(322843),a=n(171703),c=n(480681),f=n(200020),s=n(815135),y=n(303744),d=n(22222),p=n(805346),m=n(782904),E=n(55105),v=n(49977),b=n.n(v),g=n(813292),O=n.n(g),I=n(455877),T=n.n(I),h=n(362520),N=n(604206),_="ZONEIDENTIFY:SELECT_FEATURES",A="ZONEIDENTIFY:SELECT_LAYER",S="ZONEIDENTIFY:FORMAT_SELECTION",P="ZONEIDENTIFY:HIGHLIGHT_SELECTED_FEATURE",D="ZONEIDENTIFY:ZOOM_TO_SELECTED_FEATURE",F="ZONEIDENTIFY:ADD_LAYER_TO_MAP",R="ZONEIDENTIFY:SET_ZONE_IDENTIFY_LOADING",L=function(e){return{type:_,selectedFeatures:e}},w=function(e){return{type:A,selectedLayer:e}},z=function(e){return{type:S,formattedFeatures:e}},j=function(e){return{type:R,loading:e}},M=n(737275),G=n(226735),Y=n(921914),C=n(432420),U=n(801550),Z=n(460604),k=n(580416),W=n(916651);function H(e){return H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},H(e)}function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){V(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function V(e,t,n){return(t=function(e){var t=function(e){if("object"!=H(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=H(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==H(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var K={radius:10,weight:3,color:"#33eeff",opacity:1,fillColor:"#33eeff",fillOpacity:.8},Q={weight:8,color:"#33eeff",opacity:.8,fillColor:"#33eeff",fillOpacity:.8},X={weight:3,color:"#33eeff",opacity:.8,fillColor:"#33eeff",fillOpacity:.8};const B={gnUpdateZoneIdentifyMapLayoutEpic:function(e,t){return e.ofType(h.dn).filter((function(){var e,n,r;return null===(e=t.getState())||void 0===e||null===(n=e.controls)||void 0===n||null===(r=n.zoneIdentify)||void 0===r?void 0:r.enabled})).filter((function(e){return e.source!==G.O.PANEL})).map((function(e){var n,r,o,i=e.layout,l=(0,M.u8)("mapLayout")||{left:{sm:300,md:500,lg:600},right:{md:658},bottom:{sm:30}},u=(0,E.QJ)(t.getState()),a=null!==(n=t.getState())&&void 0!==n&&null!==(r=n.controls)&&void 0!==r&&null!==(o=r.drawer)&&void 0!==o&&o.enabled?l.left.sm:null,c=(0,h.FV)(q(q(q(q({},(0,E.Ss)(t.getState())),i),{},{right:l.right.md},a&&{left:a}),{},{boundingMapRect:q(q({},(null==i?void 0:i.boundingMapRect)||{}),{},{right:l.right.md},a&&{left:a}),boundingSidebarRect:q(q({},u),i.boundingSidebarRect)}));return q(q({},c),{},{source:G.O.PANEL})}))},openZoneIdentifyEpic:function(e,t){return e.ofType(m.At).filter((function(e){return"zoneIdentify"===e.control})).filter((function(){var e,n,r;return null===(e=t.getState())||void 0===e||null===(n=e.controls)||void 0===n||null===(r=n.zoneIdentify)||void 0===r?void 0:r.enabled})).switchMap((function(){return b().Observable.of((0,Y.g)(),(0,Y.aN)(),(0,Y.TM)(),L(null),w("visible_layers"),z(null))}))},closeZoneIdentifyEpic:function(e){return e.ofType(m.At).filter((function(e){return"zoneIdentify"===e.control})).filter((function(e){return"enabled"===e.property&&!1===e.value})).switchMap((function(){return b().Observable.of((0,Y.TM)(),L(null),w(null),z(null),(0,Z.fU)({owner:"ZoneIdentify"}),(0,N.Yf)("clean","","zoneIdentify",[],{}))}))},getFeaturesInfoClickEpic:function(e,t){return e.ofType(N.hZ).filter((function(e){return"zoneIdentify"===e.owner&&"stop"===e.status})).switchMap((function(e){var n,r,o,i,l,u=e.features,a=t.getState();l="visible_layers"===a.zoneIdentify.selectedLayer?a.layers.flat.filter((function(e){return!0===e.visibility&&"wms"===e.type&&"background"!==e.group&&e.name.includes("neec_geodb")&&"Error"!==e.loadingError})).map((function(e){return e.name})):a.zoneIdentify.selectedLayer;var c=null===(n=a.security)||void 0===n||null===(r=n.user)||void 0===r||null===(o=r.info)||void 0===o?void 0:o.access_token,f=a.map.present.projection,s=null===(i=a.gnsettings)||void 0===i?void 0:i.geoserverUrl,y="".concat(s,"wfs"),d={service:"WFS",version:"1.1.0",request:"GetFeature",outputFormat:"application/json",bbox:u[0].extent.join(",")+","+f,access_token:c};return b().Observable.fromPromise((0,C.Bm)(y,l.toString(),d)).map((function(e){return L(e.data.features)}))}))},cleanSelectionEpic:function(e){return e.ofType(N.hZ).filter((function(e){return"zoneIdentify"===e.owner&&"clean"===e.status})).switchMap((function(){return b().Observable.of(L(null),z(null),(0,Z.fU)({owner:"ZoneIdentify"}))}))},convertFeaturesForTreeEpic:function(e,t){return e.ofType(_).filter((function(e){return null!=e.selectedFeatures})).switchMap((function(e){var n=t.getState(),r=e.selectedFeatures,o=n.layers.flat.filter((function(e){return!0===e.visibility&&"wms"===e.type&&"background"!==e.group})),i=[],l=1;return o.forEach((function(e){var t=1,o=e.name.split(":")[1],u=e.title,a=[];if(r.forEach((function(e){if(e.id.includes(o)){var r;r="en-US"===n.locale.current?e.properties.label_en&&null!==e.properties.label_en?e.properties.label_en:e.properties.name_en:e.properties.label_fr&&null!==e.properties.label_fr?e.properties.label_fr:e.properties.name_fr;var i={id:l+"-"+t,title:r,geometry:e.geometry,properties:e.properties};t++,a.push(i)}})),a.length>0){var c={id:l,name:o,title:u,children:a};l++,i.push(c)}})),b().Observable.of(z(i))}))},highlightSelectedFeatureEpic:function(e){return e.ofType(P).switchMap((function(e){var t;return["Point","POINT","MultiPoint"].includes(e.selectedFeature.type)?t=K:["LINE","Line","MultiLineString"].includes(e.selectedFeature.type)?t=Q:["POLYGON","Polygon","MultiPolygon"].includes(e.selectedFeature.type)&&(t=X),b().Observable.of((0,Z.W)("zone-identify-selected-feature","ZoneIdentify","overlay",{id:"zone-identify-selected-feature",name:"zone-identify-selected-feature",type:"vector",features:[{type:"Feature",properties:{},geometry:{type:e.selectedFeature.type,coordinates:e.selectedFeature.coordinates},style:t}]}))}))},zoomToSelectedFeatureEpic:function(e){return e.ofType(D).switchMap((function(e){return b().Observable.of((0,U.Px)(O()(e.selectedFeature),"EPSG:4326",17))}))},addExtentToMapEpic:function(e){return e.ofType(F).switchMap((function(e){var t={id:"zoneidentify:"+T()(),title:"Query Extent",type:"vector",features:[{type:"Feature",id:T()(),properties:{name:"Query Extent"},geometry:{type:"Polygon",coordinates:[e.layer.coordinates[0].map((function(e){return(0,W.reproject)(e,"EPSG:3857","EPSG:4326")})).map((function(e){return[e.x,e.y]}))]}}],style:{format:"geostyler",body:{rules:[{name:"Query Extent",symbolizers:[{symbolizerId:"d4f18121-501f-11ef-952e-5f52f1343b22",kind:"Fill",color:"#eb0951",fillOpacity:.1,outlineColor:"#eb0951",outlineWidth:2,msClassificationType:"both"}]}]}},visibility:!0,invalidFeatures:null};return b().Observable.of((0,k.A4)(t))}))},zoneIdentifyStartLoadingEpic:function(e){return e.ofType(N.hZ).filter((function(e){return"zoneIdentify"===e.owner&&"stop"===e.status})).switchMap((function(){return b().Observable.of(j(!0))}))},zoneIdentifyStopLoadingEpic:function(e,t){return e.ofType(S).filter((function(){var e,n;return null===(e=t.getState().controls)||void 0===e||null===(n=e.zoneIdentify)||void 0===n?void 0:n.enabled})).switchMap((function(){return b().Observable.of(j(!1))}))}};function J(e){return J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},J(e)}function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach((function(t){te(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function te(e,t,n){return(t=function(e){var t=function(e){if("object"!=J(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=J(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==J(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ne=n(51605),re=n(86638),oe=["enabled"];function ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var le=(0,s.Z)(y.Z),ue=(0,a.connect)((0,d.P1)([function(e){var t;return null==e||null===(t=e.draw)||void 0===t?void 0:t.features[0]},function(e){var t;return null==e||null===(t=e.zoneIdentify)||void 0===t?void 0:t.selectedFeatures}],(function(e,t){return{extent:e,selectedFeatures:t}})),{onchangeDrawingStatus:N.Yf,onAddLayerToMap:function(e){return{type:F,layer:e}}})((function(e){var t=e.extent,n=e.selectedFeatures,r=e.onchangeDrawingStatus,i=e.onAddLayerToMap;return o().createElement("div",{className:"zone-identify-menu-buttons"},o().createElement(le,{className:"btn-primary",tooltipId:o().createElement(p.Z,{msgId:"zoneIdentify.drawPolygon"}),onClick:function(){r("start","BBOX","zoneIdentify",[],{stopAfterDrawing:!0})}},o().createElement(c.gG,{glyph:"polygon-plus"})),o().createElement(le,{className:"btn-primary",tooltipId:o().createElement(p.Z,{msgId:"zoneIdentify.removePolygon"}),disabled:null===n,onClick:function(){r("clean","","zoneIdentify",[],{})}},o().createElement(c.gG,{glyph:"polygon-trash"})),o().createElement(le,{className:"btn-primary",tooltipId:o().createElement(p.Z,{msgId:"zoneIdentify.addLayer"}),disabled:null===n,onClick:function(){i(t)}},o().createElement(c.gG,{glyph:"add-layer"})))})),ae=(0,a.connect)((0,d.P1)([],(function(){return{}})),{onHighlightSelectedFeature:function(e){return{type:P,selectedFeature:e}},onZoomToSelectedFeature:function(e){return{type:D,selectedFeature:e}}})((function(e){var t,n,i=e.node,l=e.onHighlightSelectedFeature,u=e.onZoomToSelectedFeature,a=(t=(0,r.useState)(!1),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,l,u=[],a=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;a=!1}else for(;!(a=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);a=!0);}catch(e){c=!0,o=e}finally{try{if(!a&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(c)throw o}}return u}}(t,n)||function(e,t){if(e){if("string"==typeof e)return ie(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ie(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),f=a[0],s=a[1];return o().createElement("div",{className:"zone-identify-tree-node"},o().createElement(le,{onClick:function(){return s(!f)},className:"zone-identify-toggle-icon",tooltipId:o().createElement(p.Z,{msgId:"zoneIdentify.expandFeature"})},o().createElement(c.gG,{glyph:f?"bottom":"next"})),o().createElement("span",{className:"zone-identify-layer-title"},i.title),null==i.children&&o().createElement("div",{className:"zone-identify-navigation-buttons"},o().createElement(le,{onClick:function(){return l(i.geometry)},className:"zone-identify-navigation-icon",tooltipId:o().createElement(p.Z,{msgId:"zoneIdentify.highlightFeature"})},o().createElement(c.gG,{glyph:"map-filter"})),o().createElement(le,{onClick:function(){return u(i.geometry)},className:"zone-identify-navigation-icon",tooltipId:o().createElement(p.Z,{msgId:"zoneIdentify.zoomToFeature"})},o().createElement(c.gG,{glyph:"zoom-to"}))),i.children&&f&&o().createElement(ce,{data:null==i?void 0:i.children}),null==i.children&&f&&o().createElement(fe,{data:i}))})),ce=function(e){var t=e.data;return o().createElement("div",{className:"zone-identify-tree-view"},t.map((function(e){return o().createElement(ae,{key:e.id,node:e})})))},fe=function(e){var t=e.data,n=Object.entries(t.properties);return o().createElement("div",{className:"zone-identify-attribute-table"},o().createElement("div",{className:"zone-identify-info-table"},o().createElement("div",{className:"zone-identify-info-fields"},n.map((function(e){return o().createElement("div",{className:"zone-identify-info-row"},o().createElement("div",{className:"zone-identify-info-label"},e[0]),o().createElement("div",{className:"zone-identify-info-value"},e[1]))})))))};function se(e){var t=e.style,n=e.formattedFeatures,i=e.layers,l=e.loading,u=e.messages,a=e.onClose,s=e.onSelectLayer,y=(0,r.useRef)(!1);(0,r.useEffect)((function(){return y.current=!0,function(){y.current=!1}}),[]);var d=i.filter((function(e){return!0===e.visibility&&"wms"===e.type&&"background"!==e.group&&e.name.includes("neec_geodb")&&"Error"!==e.loadingError})),m=[{layerName:"visible_layers",layerTitle:(0,re.S$)(u,"zoneIdentify.visibleLayers")}];return d.forEach((function(e){m.push({layerName:e.name,layerTitle:e.title})})),o().createElement("div",{className:"zone-identify",style:t},o().createElement("div",{className:"zone-identify-head"},o().createElement("div",{className:"zone-identify-title"},o().createElement(p.Z,{msgId:"zoneIdentify.title"})),o().createElement(le,{className:"square-button",onClick:function(){return a()}},o().createElement(c.gG,{glyph:"1-close"}))),o().createElement("div",{className:"zone-identify-body"},o().createElement("div",{className:"zone-identify-menu"},o().createElement(f.DropdownList,{className:"zone-identify-menu-dropdown",defaultValue:"visible_layers",onChange:function(e){s(e.layerName)},data:m,textField:"layerTitle",valueField:"layerName"}),o().createElement(ue,null)),o().createElement("div",{className:"zone-identify-body-content"},l&&o().createElement("div",{className:"zone-identify-spinner-container"},o().createElement(ne.Z,null)),n&&o().createElement(ce,{data:n}))))}se.propTypes={onClose:l().func,onSelectLayer:l().func},se.defaultProps={onClose:function(){},onSelectLayer:function(){}};var ye=(0,a.connect)((0,d.P1)([function(e){return(0,E.ic)(e,{height:!0})},function(e){var t,n;return null==e||null===(t=e.controls)||void 0===t||null===(n=t.zoneIdentify)||void 0===n?void 0:n.enabled},function(e){var t;return null==e||null===(t=e.zoneIdentify)||void 0===t?void 0:t.formattedFeatures},function(e){var t;return null==e||null===(t=e.layers)||void 0===t?void 0:t.flat},function(e){var t;return(null==e||null===(t=e.zoneIdentify)||void 0===t?void 0:t.loading)||!1},function(e){var t;return null==e||null===(t=e.locale)||void 0===t?void 0:t.messages}],(function(e,t,n,r,o,i){return{style:e,enabled:t,formattedFeatures:n,layers:r,loading:o,messages:i}})),{onClose:m.Xg.bind(null,"zoneIdentify","enabled",!1),onSelectLayer:w})((function(e){var t=e.enabled,n=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,oe);return t?o().createElement(se,n):null}));const de=(0,u.rx)("ZoneIdentify",{component:ye,containers:{SidebarMenu:{name:"ZoneIdentify",position:15,tooltip:"zoneIdentify.title",icon:o().createElement(c.gG,{glyph:"layer-info"}),action:m.Xg.bind(null,"zoneIdentify","enabled","true"),doNotHide:!0,priority:2}},epics:B,reducers:{zoneIdentify:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _:return ee(ee({},e),{},{selectedFeatures:t.selectedFeatures});case A:return ee(ee({},e),{},{selectedLayer:t.selectedLayer});case S:return ee(ee({},e),{},{formattedFeatures:t.formattedFeatures});case P:case D:return ee(ee({},e),{},{selectedFeature:t.selectedFeature});case F:return ee(ee({},e),{},{layer:t.layer});case R:return ee(ee({},e),{},{loading:t.loading});default:return e}}}})},226735:(e,t,n)=>{"use strict";n.d(t,{O:()=>r});var r={PANEL:"PANEL"}}}]);