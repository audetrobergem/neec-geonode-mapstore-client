(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[62431],{80416:(e,t,r)=>{"use strict";r.d(t,{yS:()=>n,Zz:()=>o,ms:()=>i,ih:()=>a,OX:()=>c,sb:()=>u,K$:()=>s,k7:()=>f,cX:()=>p,x9:()=>y,vs:()=>d,oE:()=>m,Po:()=>b,qv:()=>v,cI:()=>g,g6:()=>h,I4:()=>O,l$:()=>E,Xv:()=>S,k3:()=>w,CQ:()=>j,R8:()=>P,HN:()=>L,sH:()=>R,c7:()=>N,_7:()=>A,eF:()=>C,O6:()=>T,ED:()=>x,RP:()=>D,sF:()=>_,VP:()=>I,He:()=>k,vO:()=>M,WO:()=>B,bh:()=>F,pV:()=>G,MK:()=>Y,ZF:()=>Z,tV:()=>q,Dv:()=>z,Yz:()=>U,kI:()=>$,XG:()=>W,A4:()=>H,Rp:()=>X,$o:()=>V,ct:()=>K,oh:()=>Q,$h:()=>J,ud:()=>ee,Qr:()=>te,LR:()=>re,nN:()=>ne,UG:()=>oe,F5:()=>ie,c9:()=>ae,Jh:()=>le,Xy:()=>ce});var n="CHANGE_LAYER_PROPERTIES",o="LAYERS:CHANGE_LAYER_PARAMS",i="CHANGE_GROUP_PROPERTIES",a="TOGGLE_NODE",l="CONTEXT_NODE",c="SORT_NODE",u="REMOVE_NODE",s="UPDATE_NODE",f="MOVE_NODE",p="LAYER_LOADING",y="LAYER_LOAD",d="LAYER_ERROR",m="ADD_LAYER",b="ADD_GROUP",v="REMOVE_LAYER",g="SHOW_SETTINGS",h="HIDE_SETTINGS",O="UPDATE_SETTINGS",E="REFRESH_LAYERS",S="LAYERS:UPDATE_LAYERS_DIMENSION",w="LAYERS_REFRESHED",j="LAYERS_REFRESH_ERROR",P="LAYERS:BROWSE_DATA",L="LAYERS:DOWNLOAD",R="LAYERS:CLEAR_LAYERS",N="LAYERS:SELECT_NODE",A="LAYERS:FILTER_LAYERS",C="LAYERS:SHOW_LAYER_METADATA",T="LAYERS:HIDE_LAYER_METADATA",x="LAYERS:UPDATE_SETTINGS_PARAMS";function D(e,t,r){return{type:g,node:e,nodeType:t,options:r}}function _(){return{type:h}}function I(e){return{type:O,options:e}}function k(e,t){return{type:n,newProperties:t,layer:e}}function M(e,t){return{type:o,layer:e,params:t}}function B(e,t){return{type:i,newProperties:t,group:e}}function F(e,t,r){return{type:a,node:e,nodeType:t,status:!r}}function G(e){return{type:l,node:e}}function Y(e,t){return{type:c,node:e,order:t,sortLayers:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null}}function Z(e,t){return{type:u,node:e,nodeType:t,removeEmpty:arguments.length>2&&void 0!==arguments[2]&&arguments[2]}}function q(e,t,r){return{type:s,node:e,nodeType:t,options:r}}function z(e,t,r){return{type:f,node:e,groupId:t,index:r}}function U(e){return{type:p,layerId:e}}function $(e,t){return{type:y,layerId:e,error:t}}function W(e,t,r){return{type:d,layerId:e,tilesCount:t,tilesErrorCount:r}}function H(e){return{type:m,layer:e,foreground:!(arguments.length>1&&void 0!==arguments[1])||arguments[1]}}function X(e,t,r){return{type:b,group:e,parent:t,options:r}}function V(e){return{type:v,layerId:e}}function K(e,t){return{type:n,layer:e,newProperties:{_v_:t||(new Date).getTime()}}}function Q(e){return{type:w,layers:e}}function J(e,t){return{type:j,layers:e,error:t}}function ee(e,t,r,n){return{type:S,dimension:e,value:t,options:r,layers:n}}function te(e){return{type:P,layer:e}}function re(e){return{type:L,layer:e}}function ne(){return{type:R}}function oe(e,t,r){return{type:N,id:e,nodeType:t,ctrlKey:r}}function ie(e){return{type:A,text:e}}function ae(e,t){return{type:C,metadataRecord:e,maskLoading:t}}function le(){return{type:T}}function ce(e,t){return{type:x,newParams:e,update:t}}},67007:(e,t,r)=>{"use strict";r.d(t,{en:()=>T,FU:()=>I,gs:()=>M,tt:()=>B,jY:()=>F,QQ:()=>G,B8:()=>Y,T6:()=>Z,ZP:()=>q});var n=r(72500),o=r.n(n),i=r(1469),a=r.n(i),l=r(84596),c=r.n(l),u=r(27361),s=r.n(u),f=r(41609),p=r.n(f),y=r(64721),d=r.n(y),m=r(44908),b=r.n(m),v=r(27418),g=r.n(v),h=r(5055),O=r.n(h),E=r(75875),S=r.n(E),w=r(37275),j=r(86267),P=r(96606);function L(e){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L(e)}function R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function N(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?R(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function A(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==L(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==L(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===L(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var C={},T=function(e){var t=(a()(e)&&e||e.split(","))[0],r=o().parse(t,!0);return o().format(g()({},r,{search:null},{query:g()({service:"WMS",version:"1.3.0",request:"GetCapabilities"},r.query)}))},x=function(e){var t=e&&e.Title,r=e.LogoURL&&N(N({},s()(e,"LogoURL.$")||{}),{},{format:s()(e,"LogoURL.Format")}),n=s()(e,'OnlineResource.$["xlink:href"]');return{title:t,logo:r,imageUrl:s()(e,'LogoURL.OnlineResource.$["xlink:href"]'),link:n}},D=function e(t){return t.Layer?(a()(t.Layer)&&t.Layer||[t.Layer]).reduce((function(t,r){return t.concat(e(r)).concat(r.Layer&&r.Name?[r]:[])}),[]):t.Name&&[t]||[]},_=function(){var e,t,r,n,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0,l=arguments.length>2?arguments[2]:void 0,c=arguments.length>3?arguments[3]:void 0,u=(o.WMS_Capabilities||o.WMT_MS_Capabilities||{}).Capability,s=(o.WMS_Capabilities||o.WMT_MS_Capabilities||{}).Service,f=(n=u).Request&&n.Request.GetMap&&n.Request.GetMap.DCPType&&n.Request.GetMap.DCPType.HTTP&&n.Request.GetMap.DCPType.HTTP.Get&&n.Request.GetMap.DCPType.HTTP.Get.OnlineResource&&n.Request.GetMap.DCPType.HTTP.Get.OnlineResource.$||void 0,p=u.Layer&&(null===(e=u.Layer.SRS||u.Layer.CRS)||void 0===e?void 0:e.map((function(e){return e.toUpperCase()})))||[],y=u.Layer&&u.Layer.Attribution&&x(u.Layer.Attribution),d=u.Request&&u.Request.GetMap&&u.Request.GetMap.Format||[],m=D(u),b=(a()(m)?m:[m]).filter((function(e){return!c||-1!==e.Name.toLowerCase().indexOf(c.toLowerCase())||e.Title&&-1!==e.Title.toLowerCase().indexOf(c.toLowerCase())||e.Abstract&&-1!==e.Abstract.toLowerCase().indexOf(c.toLowerCase())}));return{numberOfRecordsMatched:b.length,numberOfRecordsReturned:Math.min(l,b.length),nextRecord:i+Math.min(l,b.length)+1,service:s,layerOptions:{version:(null===(t=o.WMS_Capabilities||o.WMT_MS_Capabilities)||void 0===t||null===(r=t.$)||void 0===r?void 0:r.version)||"1.3.0"},records:b.filter((function(e,t){return t>=i-1&&t<i-1+l})).map((function(e){return g()({},e,{formats:d,onlineResource:f,SRS:p,credits:e.Attribution?x(e.Attribution):y})}))}},I=function(e,t){var n=o().parse(e,!0),i=o().format(g()({},n,{query:g()({service:"WMS",version:"1.1.1",request:"GetCapabilities"},n.query)}));return new Promise((function(e){Promise.all([r.e(99942),r.e(67260)]).then(function(){var n=r(67260).unmarshaller;e(S().get(T(i)).then((function(e){var r;if(t)return O().parseString(e.data,{explicitArray:!1},(function(e,t){r=t})),r;var o=n.unmarshalString(e.data);return o&&o.value})))}.bind(null,r)).catch(r.oe)}))},k=function(e,t,r,n){var o=C[e];return o&&(new Date).getTime()<o.timestamp+1e3*((0,w.u8)("cacheExpire")||60)?new Promise((function(e){e(_(o.data,t,r,n))})):S().get(T(e)).then((function(o){var i;return O().parseString(o.data,{explicitArray:!1},(function(e,t){i=t})),C[e]={timestamp:(new Date).getTime(),data:i},_(i,t,r,n)}))},M=function(e,t){var r=o().parse(e,!0),n=o().format(g()({},r,{query:g()({service:"WMS",version:"1.1.1",layers:t,request:"DescribeLayer"},r.query)}));return S().get(T(n)).then((function(e){var t;return O().parseString(e.data,{explicitArray:!1},(function(e,r){t=r&&r.WMS_DescribeLayerResponse&&r.WMS_DescribeLayerResponse.LayerDescription})),(t=Array.isArray(t)?t:[t]).map((function(e){return N(N({},e&&e.$||{}),{},{layerName:e&&e.$&&e.$.name,query:N({},e&&e.query&&e.query.$||{})})}))}))},B=function(e,t,r,n){return k(e,t,r,n)},F=function(e,t){for(var r=e,n=r.EX_GeographicBoundingBox||r.exGeographicBoundingBox||(0,j.getWMSBoundingBox)(r.BoundingBox)||r.LatLonBoundingBox&&r.LatLonBoundingBox.$||r.latLonBoundingBox;!n&&r.Layer&&r.Layer.length;)n=(r=r.Layer[0]).EX_GeographicBoundingBox||r.exGeographicBoundingBox||(0,j.getWMSBoundingBox)(r.BoundingBox)||r.LatLonBoundingBox&&r.LatLonBoundingBox.$||r.latLonBoundingBox;n||(n={westBoundLongitude:-180,southBoundLatitude:-90,eastBoundLongitude:180,northBoundLatitude:90});var o={extent:[n.westBoundLongitude||n.minx,n.southBoundLatitude||n.miny,n.eastBoundLongitude||n.maxx,n.northBoundLatitude||n.maxy],crs:"EPSG:4326"};return t?{crs:o.crs,bounds:{minx:o.extent[0],miny:o.extent[1],maxx:o.extent[2],maxy:o.extent[3]}}:o},G=[{label:"image/png",value:"image/png"},{label:"image/png8",value:"image/png8"},{label:"image/jpeg",value:"image/jpeg"},{label:"image/vnd.jpeg-png",value:"image/vnd.jpeg-png"},{label:"image/vnd.jpeg-png8",value:"image/vnd.jpeg-png8"},{label:"image/gif",value:"image/gif"}],Y=function(){return b()(Object.values((0,P.eq)()))},Z=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return I(e).then((function(e){var r,n,o=s()(e,"capability.request.getMap.format",[]);if(p()(o))r=G;else{var i=G.map((function(e){return e.value}));r=(o=o.map((function(e){var t=e.value;return{label:t,value:t}}))).filter((function(e){var t=e.value;return d()(i,t)}))||[]}if(t){var a=s()(e,"capability.request.getFeatureInfo.format",[]),l=Y();p()(a)?n=l:(a=a.map((function(e){return e.value})),n=b()(a.filter((function(e){return d()(l,e)})))||[])}return t?{imageFormats:r,infoFormats:n}:r})).catch((function(){return t?{imageFormats:G,infoFormats:Y()}:G}))};const q={flatLayers:D,parseUrl:T,getDimensions:function(e){return c()(e.Dimension||e.dimension||[]).map((function(t,r){var n=e.Extent&&c()(e.Extent)[r]||e.extent&&c()(e.extent)[r];return{name:t.$.name,units:t.$.units,unitSymbol:t.$.unitSymbol,default:t.$.default||n&&n.$.default,values:t._&&t.split(",")||n&&n._&&n.split(",")}}))},getCapabilities:I,describeLayer:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=o().parse(e,!0),a=o().format(g()({},i,{query:g()({service:"WMS",version:"1.1.1",layers:t,request:"DescribeLayer"},i.query,n.query||{})}));return new Promise((function(e){Promise.all([r.e(99942),r.e(67260)]).then(function(){var t=r(67260).unmarshaller;e(S().get(T(a)).then((function(e){var r=t.unmarshalString(e.data);return r&&r.value&&r.value.layerDescription&&r.value.layerDescription[0]})))}.bind(null,r)).catch(r.oe)}))},getRecords:k,describeLayers:M,textSearch:B,parseLayerCapabilities:function e(t,r,n){return c()(n||s()(t,"capability.layer.layer")).reduce((function(n,o){return n||(!o.name&&o.layer?e(t,r,c()(o.layer)):2===r.name.split(":").length&&o.name&&2===o.name.split(":").length?r.name===o.name&&o:o.name&&2===o.name.split(":").length?r.name===o.name.split(":")[1]&&o:2===r.name.split(":").length?r.name.split(":")[1]===o.name&&o:r.name===o.name&&o)}),null)},getBBox:F,reset:function(){Object.keys(C).forEach((function(e){delete C[e]}))},getUniqueInfoFormats:Y,getSupportedFormat:Z}},7472:(e,t,r)=>{"use strict";r.d(t,{Z:()=>j});var n=r(27418),o=r.n(n),i=r(75263),a=r.n(i),l=r(24852),c=r.n(l),u=r(85294),s=r.n(u),f=r(72986),p=r.n(f),y=r(5346);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){E(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,S(n.key),n)}}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e){return O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},O(e)}function E(e,t,r){return(t=S(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S(e){var t=function(e,t){if("object"!==d(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===d(t)?t:String(t)}var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(l,e);var t,r,n,i,a=(n=l,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=O(n);if(i){var r=O(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return h(e)}(this,e)});function l(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return E(h(e=a.call.apply(a,[this].concat(r))),"renderLoading",(function(){return e.props.maskLoading?c().createElement("div",{style:{width:"100%",height:"100%",position:"absolute",overflow:"visible",margin:"auto",verticalAlign:"center",left:"0",background:"rgba(255, 255, 255, 0.5)",zIndex:2}},c().createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -40%)"}},c().createElement(y.Z,{msgId:"loading"}),c().createElement(p(),{spinnerName:"circle",noFadeIn:!0,overrideSpinnerClassName:"spinner"}))):null})),E(h(e),"renderRole",(function(t){return c().Children.toArray(e.props.children).filter((function(e){return e.props.role===t}))})),E(h(e),"hasRole",(function(t){return c().Children.toArray(e.props.children).filter((function(e){return e.props.role===t})).length>0})),E(h(e),"onClickOut",(function(t){e.props.onClickOut&&e.mask===t.target&&e.props.onClickOut(t)})),e}return t=l,(r=[{key:"render",value:function(){var e=this,t=c().createElement("div",{id:this.props.id,style:b({},this.props.style),className:"".concat(this.props.draggable?"modal-dialog-draggable":""," ").concat(this.props.className," modal-dialog-container")},c().createElement("div",{className:this.props.headerClassName+" draggable-header"},this.renderRole("header")),c().createElement("div",{className:this.props.bodyClassName},this.renderLoading(),this.renderRole("body")),this.hasRole("footer")?c().createElement("div",{className:this.props.footerClassName},this.renderRole("footer")):c().createElement("span",null)),r=this.props.draggable?c().createElement(s(),{defaultPosition:this.props.start,bounds:this.props.bounds,handle:".draggable-header, .draggable-header *"},t):t,n=o()({},this.props.style.display?{display:this.props.style.display}:{},this.props.backgroundStyle);return this.props.modal?c().createElement("div",{ref:function(t){e.mask=t},onClick:this.onClickOut,style:n,className:"fade in modal "+this.props.containerClassName,role:"dialog"},r):r}}])&&v(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(c().Component);E(w,"propTypes",{id:a().string.isRequired,style:a().object,backgroundStyle:a().object,className:a().string,maskLoading:a().bool,containerClassName:a().string,headerClassName:a().string,bodyClassName:a().string,footerClassName:a().string,onClickOut:a().func,modal:a().bool,start:a().object,draggable:a().bool,bounds:a().oneOfType([a().string,a().object])}),E(w,"defaultProps",{style:{},backgroundStyle:{background:"rgba(0,0,0,.5)"},start:{x:0,y:150},className:"modal-dialog modal-content",maskLoading:!1,containerClassName:"",headerClassName:"modal-header",bodyClassName:"modal-body",footerClassName:"modal-footer",modal:!1,draggable:!0,bounds:"parent"});const j=w},35400:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(24852),o=r.n(n),i=r(14471);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==a(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===a(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.style,r=void 0===t?{}:t,n=e.mainViewStyle,a=void 0===n?{}:n,l=e.contentStyle,u=void 0===l?{}:l,s=e.imageStyle,f=void 0===s?{}:s,p=e.glyph,y=void 0===p?"info-sign":p,d=e.iconFit,m=e.title,b=e.tooltip,v=e.tooltipId,g=e.description,h=e.content;return o().createElement("div",{className:"empty-state-container",style:c({height:d?"100%":void 0},r)},o().createElement("div",{key:"main-view",className:"empty-state-main-view",style:c({height:d?"100%":void 0},a)},y?o().createElement("div",{key:"glyph",className:"empty-state-image",style:c({height:d?"100%":void 0},f)},o().createElement(i.Z,{iconFit:d,tooltip:b,tooltipId:v,glyph:y})):null,m?o().createElement("h1",{key:"title"},m):null,g?o().createElement("p",{key:"description",className:"empty-state-description"},g):null),o().createElement("div",{key:"content",className:"empty-state-content",style:u},h))}},14471:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(24852),o=r.n(n),i=r(80681),a=r(96259),l=(0,r(15135).Z)(i.Glyphicon);const c=function(e){var t=e.glyph,r=void 0===t?"info-sign":t,n=e.tooltip,i=e.tooltipId,c=e.iconFit,u=e.padding,s=void 0===u?0:u,f=e.margin,p=void 0===f?0:f;return o().createElement(a.Z,null,(function(e){var t=e.width,a=e.height;return o().createElement(l,{glyph:r,tooltip:n,tooltipId:i,style:{display:"inline-block",padding:s+"px",margin:p+"px",textAlign:"center",fontSize:c?Math.min(t,a)-2*s-2*p:t-2*s-2*p}})}))}},75480:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(24852),o=r.n(n);const i=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).style,t=void 0===e?{display:"inline-block"}:e;return o().createElement("div",{style:t,className:"mapstore-inline-loader"})}},94745:(e,t,r)=>{"use strict";r.d(t,{Z:()=>b});var n=r(24852),o=r.n(n),i=r(94184),a=r.n(i),l=r(80681),c=r(7472),u=r(80717),s=r(67076),f=r(19081),p=r.n(f),y=r(75480),d={xs:" ms-xs",sm:" ms-sm",md:"",lg:" ms-lg"},m={className:{vertical:" ms-fullscreen-v",horizontal:" ms-fullscreen-h",full:" ms-fullscreen"},glyph:{expanded:{vertical:"resize-vertical",horizontal:"resize-horizontal",full:"resize-small"},collapsed:{vertical:"resize-vertical",horizontal:"resize-horizontal",full:"resize-full"}}};const b=(0,s.withState)("fullscreenState","onFullscreen",(function(e){var t=e.initialFullscreenState;return void 0===t?"collapsed":t}))((function(e){var t=e.show,r=void 0!==t&&t,n=e.loading,i=e.loadingText,s=e.onClose,f=void 0===s?function(){}:s,b=e.title,v=void 0===b?"":b,g=e.clickOutEnabled,h=void 0===g||g,O=e.showClose,E=void 0===O||O,S=e.disabledClose,w=void 0!==S&&S,j=e.showFullscreen,P=void 0!==j&&j,L=e.fullscreenType,R=void 0===L?"full":L,N=e.buttons,A=void 0===N?[]:N,C=e.size,T=void 0===C?"":C,x=e.bodyClassName,D=void 0===x?"":x,_=e.children,I=e.draggable,k=void 0!==I&&I,M=e.fullscreenState,B=e.onFullscreen,F=e.fade,G=void 0!==F&&F,Y=e.fitContent,Z=e.modalClassName,q=void 0===Z?"":Z,z=e.dialogClassName,U=void 0===z?"":z,$=e.enableFooter,W=void 0===$||$,H=d[T]||"",X=P&&"expanded"===M&&m.className[R]||"",V=r?o().createElement("div",{className:"modal-fixed ".concat(q," ")+(k?"ms-draggable":"")},o().createElement(c.Z,{id:"ms-resizable-modal",style:{display:"flex"},onClickOut:h?f:function(){},containerClassName:"ms-resizable-modal",draggable:k,modal:!0,className:a()("modal-dialog modal-content",H,X,U,{"ms-fit-content":Y})},o().createElement("span",{role:"header"},o().createElement("h4",{className:"modal-title"},o().createElement("div",{className:"ms-title"},v),P&&m.className[R]&&o().createElement(l.Glyphicon,{className:"ms-header-btn",onClick:function(){return B("expanded"===M?"collapsed":"expanded")},glyph:m.glyph[M][R]}),E&&f&&o().createElement(l.Glyphicon,{glyph:"1-close",className:"ms-header-btn",onClick:f,disabled:w}))),o().createElement("div",{role:"body",className:D},_),W&&o().createElement("div",{style:{display:"flex"},role:"footer"},o().createElement("div",{className:"ms-resizable-modal-loading-spinner-container"},n?o().createElement(y.Z,null):null),o().createElement("div",{className:"ms-resizable-modal-loading-text"},n?i:null),o().createElement(u.Z,{buttons:A})))):null;return G?o().createElement(p(),{transitionName:"ms-resizable-modal-fade",transitionEnterTimeout:300,transitionLeaveTimeout:300},V):V}))},76424:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(24852),o=r.n(n),i=r(13218),a=r.n(i),l=r(32425);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}var u=["body","caption","infoExtra","className","description","fullText","onClick","onMouseEnter","onMouseLeave","preview","selected","size","style","stylePreview","styleTools","title","loading","dragSymbol","tools"];function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==c(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===c(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.body,r=e.caption,n=e.infoExtra,i=e.className,c=void 0===i?"":i,p=e.description,y=e.fullText,d=e.onClick,m=void 0===d?function(){}:d,b=e.onMouseEnter,v=void 0===b?function(){}:b,g=e.onMouseLeave,h=void 0===g?function(){}:g,O=e.preview,E=e.selected,S=e.size,w=e.style,j=void 0===w?{}:w,P=e.stylePreview,L=void 0===P?{}:P,R=e.styleTools,N=void 0===R?{}:R,A=e.title,C=e.loading,T=e.dragSymbol,x=void 0===T?"+":T,D=e.tools,_=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,u);return o().createElement("div",{className:"mapstore-side-card".concat(E?" selected":"").concat(S?" ms-"+S:"").concat(c?" ".concat(c):"").concat(y?" full-text":""),onClick:function(e){return m(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({title:A,preview:O,description:p,caption:r,tools:D},_),e)},onMouseEnter:v,onMouseLeave:h,style:j},o().createElement("div",{className:"ms-head"},_.isDraggable&&_.connectDragSource&&_.connectDragSource(o().createElement("div",{className:"mapstore-side-card-tool text-center"},o().createElement("div",{style:{width:10,overflow:"hidden"}},x))),O&&o().createElement("div",{className:"mapstore-side-preview",style:L},O),o().createElement("div",{className:"mapstore-side-card-container"},o().createElement("div",{className:"mapstore-side-card-inner"},o().createElement("div",{className:"mapstore-side-card-left-container"},o().createElement("div",{className:"mapstore-side-card-info"},A&&o().createElement("div",{className:"mapstore-side-card-title"},o().createElement("span",null,A)),p&&o().createElement("div",{className:"mapstore-side-card-desc"},a()(p)?p:o().createElement("span",null,p)),r&&o().createElement("div",{className:"mapstore-side-card-caption"},o().createElement("span",null,r))),n),o().createElement("div",{className:"mapstore-side-card-right-container"},o().createElement("div",{className:"mapstore-side-card-tool text-center",style:N},D),"sm"!==S&&o().createElement("div",{className:"mapstore-side-card-loading"},o().createElement(l.Z,{className:"mapstore-side-card-loader",size:12,hidden:!C})))))),t&&o().createElement("div",{className:"ms-body"},t))}},82030:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(24852),o=r.n(n),i=r(23560),a=r.n(i),l=r(67076),c=r(35400);const u=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c.Z;return(0,l.branch)(e,(function(){return function(e){return o().createElement(r,t&&a()(t)?t(e):t)}}))}},80833:(e,t,r)=>{"use strict";r.d(t,{kB:()=>v,HI:()=>g});var n=r(72500),o=r.n(n),i=(r(91175),r(90173)),a=r(49977),l=r(67007),c=r(75875),u=r.n(c),s=(r(86267),r(24262)),f=r(10284),p=r(33044);function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==y(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===y(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}i.default;var v=function(e){return a.Observable.defer((function(){return l.ZP.getCapabilities((0,s.Fh)(e))})).let(f.oB).map((function(t){return l.ZP.parseLayerCapabilities(t,e)}))},g=function(e){return function(e){return a.Observable.defer((function(){return u().get(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,r=e.search,n=void 0===r?{}:r,i=e.url,a=o().parse(n.url||i,!0);return o().format(m(m({},a),{},{search:void 0,query:m(m({},a.query),{},{service:"WMS",version:"1.1.1",layers:t,outputFormat:"application/json",request:"DescribeLayer"})}))}(e))})).let(f.oB)}(e).map((function(e){var t=e.data,r=void 0===t?{}:t;return r&&r.layerDescriptions[0]})).map((function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).owsURL;return m(m({},e),{},{params:{},search:t?{type:"wfs",url:(0,p.cleanAuthParamsFromURL)(t)}:void 0})}))}},37277:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>je});var n={};r.r(n),r.d(n,{layerInfoSetupLayersEpic:()=>Se,layerInfoSyncLayersEpic:()=>we});var o=r(24852),i=r.n(o),a=r(71703),l=r(22222),c=r(80681),u=r(711),s=r.n(u),f=r(38560),p=r(76424),y=r(80717),d=r(82030),m=r(50966);function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function v(){return v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},v.apply(this,arguments)}function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){O(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function O(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==b(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==b(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===b(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const S=(0,d.Z)((function(e){var t=e.items;return!(void 0===t?[]:t).length}),(function(e){return e.emptyStateProps}))((function e(t){var r=t.items,n=void 0===r?[]:r,o=t.side,a=t.selectedItems,l=void 0===a?[]:a,u=t.selectedSide,s=t.allowCtrlMultiSelect,f=void 0!==s&&s,d=t.onSelect,b=void 0===d?function(){}:d,g=t.isRoot,O=void 0===g||g;return i().createElement("div",{className:"ms2-transfer-sidegrid"},n.map((function(t,r){var a=t.id&&l.reduce((function(e,r){return e||r.id===t.id}),!1);return i().createElement(p.Z,v({onClick:function(e,r){return O?b(a?l.filter((function(e){return e.id!==t.id})):f&&r.ctrlKey&&o===u?[].concat(function(e){if(Array.isArray(e))return E(e)}(n=l)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||function(e,t){if(e){if("string"==typeof e)return E(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?E(e,t):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[t]):[t],o):{};var n}},t,{key:t.id||r,size:t.cardSize,className:(t.className?"".concat(t.className," "):" ")+(r===n.length-1?"ms2-transfer-lastcard":""),selected:null!=a?a:t.selected,tools:t.tools&&t.tools.length>0?i().createElement(y.Z,{buttons:t.tools.map((function(e){return h(h({},e),{},{className:"square-button-md no-border",onClick:function(t){t.stopPropagation(),e.onClick&&e.onClick()}})}))}):void 0,preview:t.preview,description:t.showDescriptionTooltip&&t.description?i().createElement(m.Z,{delayShow:t.descriptionTooltipDelay,placement:"top",overlay:i().createElement(c.Tooltip,{id:t.id},t.description)},i().createElement("span",null,t.description)):t.description,body:i().createElement("div",{className:"ms2-transfer-body-container"},t.component&&i().createElement("div",{className:"ms2-transfer-bodycomponent-container",onClick:function(e){return e.stopPropagation()}},t.component),t.children&&i().createElement("div",{className:"ms2-transfer-children-container"},i().createElement(e,{items:t.children,side:o,selectedItems:l,selectedSide:u,allowCtrlMultiSelect:f,onSelect:b,isRoot:!1})))}))})))}));var w=r(32425),j=r(5346),P=r(24262);function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const R=function(e){var t=e.loading,r=void 0!==t&&t,n=e.loadFlags,o=void 0===n?{}:n,a=e.error,l=e.layers,u=void 0===l?[]:l,p=e.currentLocale,y=void 0===p?"default":p,d=e.onSelectLayers,b=void 0===d?function(){}:d,v=u.map((function(e){return e.id})),g=u.filter((function(e){return e.selected})).map((function(e){return e.id})),h=u.map((function(e){var t=e.title,r=e.name,n=e.type,o=e.selected,a=e.id,l=e.syncStatus;return{title:(0,P.in)({title:t,name:r},y),description:i().createElement(j.Z,{msgId:"layerInfo.layerType",msgParams:{type:n}}),cardSize:"sm",selected:o,tools:l&&"none"!==l?[{tooltipId:"success"===l?"layerInfo.tooltips.syncSuccess":"error"===l?"layerInfo.tooltips.syncError":void 0,glyph:"success"===l?"ok-sign":"error"===l?"exclamation-mark":void 0,Element:function(e){return"updating"===l?i().createElement(w.Z,{size:16}):i().createElement(m.Z,{placement:"top",overlay:i().createElement(c.Tooltip,{id:"layerinfo-syncstatus-tooltip"},i().createElement(j.Z,{msgId:e.tooltipId}))},i().createElement(c.Glyphicon,{glyph:e.glyph}))}}]:[],preview:i().createElement("div",{className:"layerinfo-layeritem-preview"},i().createElement(c.Glyphicon,{glyph:o?"check":"unchecked"})),onClick:function(){return b(o?g.filter((function(e){return e!==a})):[].concat(function(e){if(Array.isArray(e))return L(e)}(e=g)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return L(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?L(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[a]));var e}}})),O=s()(u,{selected:!0});return i().createElement("div",{className:"layerinfo-content"},!r&&a?i().createElement("div",{className:"layerinfo-error-box alert-danger"},i().createElement("div",{className:"layerinfo-error-title"},i().createElement(j.Z,{msgId:a.title})),i().createElement("div",{className:"layerinfo-error-message"},i().createElement(j.Z,{msgId:a.message}))):null,(!r||o.syncingLayers)&&u.length>0?i().createElement("div",{className:"layerinfo-selectbutton-container"},i().createElement(f.Z,{className:"no-border",onClick:function(){return b(O?[]:v)}},i().createElement(c.Glyphicon,{glyph:O?"check":"unchecked"}),i().createElement(j.Z,{msgId:"layerInfo.".concat(O?"deselect":"select","All")}))):null,!r||o.syncingLayers?i().createElement("div",{className:"layerinfo-layerlist".concat(u.length>0?"":"-empty")},i().createElement(S,{items:h,emptyStateProps:{glyph:"1-layer",title:i().createElement(j.Z,{msgId:"layerInfo.noLayers"})}})):null,r&&!o.syncingLayers?i().createElement(w.Z,{size:100}):null)};var N=r(94745),A=r(22843),C=r(82904),T=function(e){var t,r;return null===(t=e.controls)||void 0===t||null===(r=t.layerinfo)||void 0===r?void 0:r.enabled},x=function(e){var t;return null===(t=e.layerinfo)||void 0===t?void 0:t.layers},D=r(8316),_="LAYERINFO:SYNC_LAYERS",I="LAYERINFO:SELECT_LAYERS",k="LAYERINFO:SET_LAYERS",M="LAYERINFO:UPDATE_LAYER",B="LAYERINFO:RESET_SYNC_STATUS",F="LAYERINFO:UPDATE_SYNC_STATUS",G="LAYERINFO:SET_ERROR",Y="LAYERINFO:LOADING",Z=function(e){return{type:M,layer:e}},q=function(e){return{type:G,error:e}},z=function(e){return{type:Y,name:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"loading",value:e}},U=r(30998),$=r.n(U),W=r(61868);function H(e){return H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},H(e)}function X(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function V(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?X(Object(r),!0).forEach((function(t){K(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function K(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==H(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==H(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===H(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Q=r(49977),J=r(3674),ee=r.n(J),te=r(78718),re=r.n(te),ne=r(84596),oe=r.n(ne),ie=r(13311),ae=r.n(ie),le=r(13218),ce=r.n(le),ue=r(80416),se=r(75110),fe=r(80833),pe=r(59551),ye=r(3475);function de(e){return de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},de(e)}function me(e){return function(e){if(Array.isArray(e))return ve(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||be(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function be(e,t){if(e){if("string"==typeof e)return ve(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ve(e,t):void 0}}function ve(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ge(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function he(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ge(Object(r),!0).forEach((function(t){Oe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ge(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Oe(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==de(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==de(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===de(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ee=function(e){return re()(e,"id","name","title","description","type")},Se=function(e,t){return e.ofType(C.dc,C.At,C.kM).filter((function(e){var r=e.type,n=e.control,o=e.property,i=e.properties,a=void 0===i?[]:i;return!!T(t.getState())&&"layerinfo"===n&&("enabled"===o||$()(ee()(a),(function(e){return"enabled"===e}))>-1||r===C.kM)})).switchMap((function(){var e=t.getState(),r=(0,se.l2)(e);return Q.Observable.of(z(!0),q(),function(e){return{type:k,layers:e}}(r.filter((function(e){var t=e.type,r=e.group;return("wms"===t||"wmts"===t)&&"background"!==r})).map((function(e){return he(he({layerObj:e},Ee(e)),{},{selected:!1,syncStatus:"none"})})).reverse()),z(!1))}))},we=function(e,t){return e.ofType(_).switchMap((function(e){var r,n=e.layers,o={wms:function(e){return e.catalogURL?Q.Observable.defer((function(){return pe.ZP.getRecordById(e.catalogURL)})):(0,fe.kB)(e)},wmts:function(e){return Q.Observable.defer((function(){return ye.Z.getCapabilities(e.capabilitiesURL||e.url)})).map((function(t){var r,n,o,i=oe()(null!==(r=null===(n=t.Capabilities)||void 0===n||null===(o=n.Contents)||void 0===o?void 0:o.Layer)&&void 0!==r?r:[]),a=ae()(i,{"ows:Identifier":e.name});return{title:null==a?void 0:a["ows:Title"],_abstract:null==a?void 0:a["ows:Abstract"]}}))}};return Q.Observable.of.apply(Q.Observable,[(r=n.length,{type:B,totalCount:r}),z(!0,"syncingLayers"),q()].concat(me(x(t.getState()).map((function(e){return Z({id:e.id,syncStatus:"none"})}))),me(n.map((function(e){return Z({id:e.id,selected:!1,syncStatus:"updating"})}))))).concat(Q.Observable.merge.apply(Q.Observable,me(n.map((function(e){var t=e.layerObj;return o[t.type](t).map((function(e){var r,n,o,i,a,l,c=null!==(r=e.title)&&void 0!==r?r:null===(n=e.dc)||void 0===n?void 0:n.title;return c?["success",he(he({},t),{},{title:ce()(t.title)?he(he({},t.title),{},{default:c}):c,description:null!==(o=null!==(i=e._abstract)&&void 0!==i?i:null===(a=e.dc)||void 0===a?void 0:a.abstract)&&void 0!==o?o:null===(l=e.dc)||void 0===l?void 0:l.description})]:["error",t]})).catch((function(e){return console.error(e),Q.Observable.of(["error",t])}))})))).flatMap((function(e){var t,r,n=(r=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(t,r)||be(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=n[0],i=n[1];return Q.Observable.of(Z(he(he({layerObj:i},Ee(i)),{},{syncStatus:o})),(0,ue.tV)(i.id,"layer",re()(i,"title","description")),{type:F})})).concat(Q.Observable.of(z(!1,"syncingLayers"))).catch((function(){return Q.Observable.of(q({title:"layerInfo.syncingLayersGeneralError.title",message:"layerInfo.syncingLayersGeneralError.message"}),z(!1,"syncingLayers"))})))}))};const je=(0,A.rx)("LayerInfo",{component:(0,a.connect)((0,l.zB)({enabled:T,layers:x,currentLocale:D.Pz,loading:function(e){var t;return null===(t=e.layerinfo)||void 0===t?void 0:t.loading},loadFlags:function(e){var t;return null===(t=e.layerinfo)||void 0===t?void 0:t.loadFlags},syncStatus:function(e){var t;return null===(t=e.layerinfo)||void 0===t?void 0:t.syncStatus},error:function(e){var t;return null===(t=e.layerinfo)||void 0===t?void 0:t.error}}),{onSyncLayers:function(e){return{type:_,layers:e}},onSelectLayers:function(e){return{type:I,layers:e}},onClose:C.Xg.bind(null,"layerinfo","enabled",!1)})((function(e){var t=e.enabled,r=void 0!==t&&t,n=e.layers,o=void 0===n?[]:n,a=e.currentLocale,l=e.loading,c=void 0!==l&&l,u=e.loadFlags,s=void 0===u?{}:u,f=e.syncStatus,p=void 0===f?{}:f,y=e.error,d=e.onSyncLayers,m=void 0===d?function(){}:d,b=e.onSelectLayers,v=e.onClose,g=void 0===v?function(){}:v,h=c&&s.syncingLayers,O=o.filter((function(e){return e.selected}));return i().createElement(N.Z,{bodyClassName:"layerinfo-dialog-body",loading:h,loadingText:c&&i().createElement(j.Z,{msgId:"layerInfo.updatingLayers",msgParams:p}),size:"sm",show:r,clickOutEnabled:!h,showClose:!h,onClose:function(){return g()},title:i().createElement(j.Z,{msgId:"layerInfo.title"}),buttons:[{text:i().createElement(j.Z,{msgId:"layerInfo.syncButton"}),disabled:h||!O.length,onClick:function(){return m(O)}}]},i().createElement(R,{loading:c,loadFlags:s,error:y,layers:o,currentLocale:a,onSelectLayers:b}))})),containers:{TOC:{name:"LayerInfo",doNotHide:!0}},reducers:{layerinfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I:var r;return(0,W.t8)("layers",null===(r=e.layers)||void 0===r?void 0:r.map((function(e){return V(V({},e),{},{selected:$()(t.layers,(function(t){return t===e.id}))>-1})})),e);case k:return(0,W.t8)("layers",t.layers,e);case M:var n,o=e.layers||[],i=null!==(n=t.layer)&&void 0!==n&&n.id?$()(o,{id:t.layer.id}):-1;return(0,W.t8)("layers",o.map((function(e,r){return r===i?V(V({},e),t.layer):e})),e);case B:return(0,W.t8)("syncStatus",{updatedCount:"0",totalCount:"".concat(t.totalCount)},e);case F:var a,l=parseInt(null===(a=e.syncStatus)||void 0===a?void 0:a.updatedCount,10);return(0,W.t8)("syncStatus",V(V({},e.syncStatus),{},{updatedCount:"".concat(l+1)}),e);case G:return(0,W.t8)("error",t.error,e);case Y:return(0,W.t8)("loading"===t.name?"loading":"loadFlags.".concat(t.name),t.value,(0,W.t8)("loading",t.value,e));default:return e}}},epics:n})},10284:(e,t,r)=>{"use strict";r.d(t,{sw:()=>b,oB:()=>v});var n=r(49977),o=r.n(n),i=r(27361),a=r.n(i),l=r(5055),c=r(7526);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function s(e){var t="function"==typeof Map?new Map:void 0;return s=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return f(e,arguments,d(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),y(n,e)},s(e)}function f(e,t,r){return f=p()?Reflect.construct.bind():function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&y(o,r.prototype),o},f.apply(null,arguments)}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function y(e,t){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},y(e,t)}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}r(49843);var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}(i,e);var t,r,n,o=(r=i,n=p(),function(){var e,t=d(r);if(n){var o=d(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e)).name="OGCError",r.code=t,r}return t=i,Object.defineProperty(t,"prototype",{writable:!1}),t}(s(Error)),b=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{tagNameProcessors:[c.stripPrefix],explicitArray:!1,mergeAttrs:!0};return o().Observable.bindNodeCallback((function(e,r){return(0,l.parseString)(e,t,r)}))(e)},v=function(e){return e.switchMap((function(e){return"string"==typeof e.data&&e.data.indexOf("ExceptionReport")>0?o().Observable.bindNodeCallback((function(e,t){return(0,l.parseString)(e,{tagNameProcessors:[c.stripPrefix],explicitArray:!1,mergeAttrs:!0},t)}))(e.data).map((function(e){var t=a()(e,"ExceptionReport.Exception.ExceptionText");throw new m(t||"Undefined OGC Service Error",a()(e,"ExceptionReport.Exception.exceptionCode"))})):o().Observable.of(e)}))}},19081:(e,t,r)=>{"use strict";e.exports=r(1174)}}]);