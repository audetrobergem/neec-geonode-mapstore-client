/*! For license information please see layer-download.9b1ac1877f8dee69dfa0.chunk.js.LICENSE.txt */
(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[62426],{95797:(e,t,r)=>{"use strict";r.d(t,{DR:()=>n,S0:()=>o,u7:()=>i,lj:()=>a,yz:()=>l,lN:()=>u,zW:()=>c,Yx:()=>s,VN:()=>p,Hu:()=>f,VT:()=>d,RD:()=>m,Qq:()=>y,R1:()=>b,_T:()=>v,vO:()=>g,XO:()=>w,jG:()=>h,Xc:()=>O,gT:()=>E,rG:()=>S,t3:()=>P,Fs:()=>j,w_:()=>R,Lm:()=>D,rh:()=>x,rP:()=>A,IO:()=>T}),r(375875);var n="LAYER_SELECTED_FOR_SEARCH",o="FEATURE_TYPE_SELECTED",i="FEATURE_TYPE_LOADED",a="FEATURE_LOADED",l="FEATURE_LOADING",u="FEATURE_TYPE_ERROR",c="FEATURE_ERROR",s="QUERY_CREATE",p="QUERY:UPDATE_QUERY",f="QUERY_RESULT",d="QUERY_ERROR",m="RESET_QUERY",y="QUERY",b="INIT_QUERY_PANEL",v="QUERY:TOGGLE_SYNC_WMS",g="QUERY:TOGGLE_LAYER_FILTER";function w(){return{type:v}}function h(){return{type:g}}function O(){return{type:b}}function E(e,t){return{type:o,url:e,typeName:t}}function S(e,t){return{type:i,typeName:e,featureType:t}}function P(e,t){return{type:u,typeName:e,error:t}}function j(e){return{type:l,isLoading:e}}function R(e,t,r,n,o){return{type:f,searchUrl:t,filterObj:r,result:e,queryOptions:n,reason:o}}function D(e){return{type:d,error:e}}function x(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.updates,r=e.reason,n=e.useLayerFilter;return{type:p,updates:t,reason:r,useLayerFilter:n}}function A(e,t){return{type:s,searchUrl:e,filterObj:t}}function T(e,t,r,n){return{type:y,searchUrl:e,filterObj:t,queryOptions:r,reason:n}}},921533:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(867076),o=r(815135),i=r(159979);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}var l=["renderPopover","popoverOptions"];function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==a(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===a(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const s=(0,n.compose)((0,n.withProps)((function(e){var t=e.renderPopover,r=e.popoverOptions;return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}(t?{renderPopover:t,popoverOptions:r}:{},function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,l))})),(0,n.branch)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.renderPopover,r=e.popoverOptions;return t&&!!r}),i.Z,o.Z))},159979:(e,t,r)=>{"use strict";r.d(t,{Z:()=>v});var n=r(124852),o=r.n(n),i=r(352595),a=r(757588),l=r(957557),u=r.n(l),c=r(180307),s=r.n(c);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}var f=["popoverOptions","keyProp"];function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},d.apply(this,arguments)}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==p(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===p(o)?o:String(o)),n)}var o}function y(e,t){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},y(e,t)}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}const v=function(e){return function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}(g,t);var r,n,l,c,v=(l=g,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=b(l);if(c){var r=b(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function g(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,g),v.apply(this,arguments)}return r=g,(n=[{key:"render",value:function(){var t=null,r=this.props,n=r.popoverOptions,l=r.keyProp,c=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(r,f);return o().createElement("span",{className:"mapstore-info-popover"},o().createElement(e,d({},u()(c,["renderPopover","tooltipId"]),{key:l,ref:function(e){t=e}})),o().createElement(i.Z,{placement:n.placement,shouldUpdatePosition:!0,show:!0,target:function(){return s().findDOMNode(t)}},o().createElement(a.Popover,n.props,n.content)))}}])&&m(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),g}(o().Component)}},656903:(e,t,r)=>{"use strict";r.d(t,{Z:()=>f});var n=r(124852),o=r.n(n),i=r(757588),a=r(282467),l=["disabled","id","visible","onClick","glyph","active","className"];function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},u.apply(this,arguments)}var c={width:0,padding:0,borderWidth:0},s={},p=function(e){return e?s:c};const f=(0,n.forwardRef)((function(e,t){var r=e.disabled,n=e.id,c=e.visible,s=e.onClick,f=e.glyph,d=e.active,m=e.className,y=void 0===m?"square-button-md":m,b=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,l);return o().createElement(a.Z,u({ref:t},b,{bsStyle:d?"success":"primary",disabled:r,id:"fg-".concat(n),style:p(c),className:y,onClick:function(){return!r&&s()}}),o().createElement(i.Glyphicon,{glyph:f}))}))},807472:(e,t,r)=>{"use strict";r.d(t,{Z:()=>P});var n=r(727418),o=r.n(n),i=r(675263),a=r.n(i),l=r(124852),u=r.n(l),c=r(485294),s=r.n(c),p=r(472986),f=r.n(p),d=r(805346);function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){O(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,E(n.key),n)}}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function O(e,t,r){return(t=E(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function E(e){var t=function(e,t){if("object"!==m(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===m(t)?t:String(t)}var S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(l,e);var t,r,n,i,a=(n=l,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=h(n);if(i){var r=h(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===m(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return w(e)}(this,e)});function l(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return O(w(e=a.call.apply(a,[this].concat(r))),"renderLoading",(function(){return e.props.maskLoading?u().createElement("div",{style:{width:"100%",height:"100%",position:"absolute",overflow:"visible",margin:"auto",verticalAlign:"center",left:"0",background:"rgba(255, 255, 255, 0.5)",zIndex:2}},u().createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -40%)"}},u().createElement(d.Z,{msgId:"loading"}),u().createElement(f(),{spinnerName:"circle",noFadeIn:!0,overrideSpinnerClassName:"spinner"}))):null})),O(w(e),"renderRole",(function(t){return u().Children.toArray(e.props.children).filter((function(e){return e.props.role===t}))})),O(w(e),"hasRole",(function(t){return u().Children.toArray(e.props.children).filter((function(e){return e.props.role===t})).length>0})),O(w(e),"onClickOut",(function(t){e.props.onClickOut&&e.mask===t.target&&e.props.onClickOut(t)})),e}return t=l,(r=[{key:"render",value:function(){var e=this,t=u().createElement("div",{id:this.props.id,style:b({},this.props.style),className:"".concat(this.props.draggable?"modal-dialog-draggable":""," ").concat(this.props.className," modal-dialog-container")},u().createElement("div",{className:this.props.headerClassName+" draggable-header"},this.renderRole("header")),u().createElement("div",{className:this.props.bodyClassName},this.renderLoading(),this.renderRole("body")),this.hasRole("footer")?u().createElement("div",{className:this.props.footerClassName},this.renderRole("footer")):u().createElement("span",null)),r=this.props.draggable?u().createElement(s(),{defaultPosition:this.props.start,bounds:this.props.bounds,handle:".draggable-header, .draggable-header *"},t):t,n=o()({},this.props.style.display?{display:this.props.style.display}:{},this.props.backgroundStyle);return this.props.modal?u().createElement("div",{ref:function(t){e.mask=t},onClick:this.onClickOut,style:n,className:"fade in modal "+this.props.containerClassName,role:"dialog"},r):r}}])&&v(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(u().Component);O(S,"propTypes",{id:a().string.isRequired,style:a().object,backgroundStyle:a().object,className:a().string,maskLoading:a().bool,containerClassName:a().string,headerClassName:a().string,bodyClassName:a().string,footerClassName:a().string,onClickOut:a().func,modal:a().bool,start:a().object,draggable:a().bool,bounds:a().oneOfType([a().string,a().object])}),O(S,"defaultProps",{style:{},backgroundStyle:{background:"rgba(0,0,0,.5)"},start:{x:0,y:150},className:"modal-dialog modal-content",maskLoading:!1,containerClassName:"",headerClassName:"modal-header",bodyClassName:"modal-body",footerClassName:"modal-footer",modal:!1,draggable:!0,bounds:"parent"});const P=S},135400:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(124852),o=r.n(n),i=r(379313);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==a(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===a(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.style,r=void 0===t?{}:t,n=e.mainViewStyle,a=void 0===n?{}:n,l=e.contentStyle,c=void 0===l?{}:l,s=e.imageStyle,p=void 0===s?{}:s,f=e.glyph,d=void 0===f?"info-sign":f,m=e.iconFit,y=e.title,b=e.tooltip,v=e.tooltipId,g=e.description,w=e.content;return o().createElement("div",{className:"empty-state-container",style:u({height:m?"100%":void 0},r)},o().createElement("div",{key:"main-view",className:"empty-state-main-view",style:u({height:m?"100%":void 0},a)},d?o().createElement("div",{key:"glyph",className:"empty-state-image",style:u({height:m?"100%":void 0},p)},o().createElement(i.Z,{iconFit:m,tooltip:b,tooltipId:v,glyph:d})):null,y?o().createElement("h1",{key:"title"},y):null,g?o().createElement("p",{key:"description",className:"empty-state-description"},g):null),o().createElement("div",{key:"content",className:"empty-state-content",style:c},w))}},379313:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(124852),o=r.n(n),i=r(757588),a=r(496259),l=(0,r(815135).Z)(i.Glyphicon);const u=function(e){var t=e.glyph,r=void 0===t?"info-sign":t,n=e.tooltip,i=e.tooltipId,u=e.iconFit,c=e.padding,s=void 0===c?0:c,p=e.margin,f=void 0===p?0:p;return o().createElement(a.Z,null,(function(e){var t=e.width,a=e.height;return o().createElement(l,{glyph:r,tooltip:n,tooltipId:i,style:{display:"inline-block",padding:s+"px",margin:f+"px",textAlign:"center",fontSize:u?Math.min(t,a)-2*s-2*f:t-2*s-2*f}})}))}},532425:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(675263),o=r.n(n),i=r(124852),a=r.n(i);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==l(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===l(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=function(e){return e>100?"full":e>40?"medium":"small"},f=function(e){var t=e.size,r=e.style,n=void 0===r?{}:r,o=e.className,i=e.hidden;return a().createElement("div",{className:o,style:c({width:t,height:t,overflow:"hidden"},n)},!i&&a().createElement("div",{className:"mapstore-".concat(p(t),"-size-loader")}))};f.propTypes={size:o().number,className:o().string,style:o().object};const d=f},352595:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=(0,r(461365).Z)(r(757588).Overlay)},399534:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(461365),o=r(569334);const i=(0,n.Z)(o.h_)},982030:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(124852),o=r.n(n),i=r(623560),a=r.n(i),l=r(867076),u=r(135400);const c=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u.Z;return(0,l.branch)(e,(function(){return function(e){return o().createElement(r,t&&a()(t)?t(e):t)}}))}},145869:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var n=r(124852),o=r.n(n),i=r(675263),a=r.n(i);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,f(n.key),n)}}function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(e,t)}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}function p(e,t,r){return(t=f(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e){var t=function(e,t){if("object"!==l(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===l(t)?t:String(t)}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(p,e);var t,r,n,i,a=(n=p,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=s(n);if(i){var r=s(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function p(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),a.apply(this,arguments)}return t=p,(r=[{key:"render",value:function(){var e=this;return o().createElement("label",{className:"mapstore-switch-btn ".concat(this.props.className)},o().createElement("input",{type:"checkbox",disabled:this.props.disabled,checked:this.props.checked,onChange:function(){return e.props.onChange(!e.props.checked)}}),o().createElement("span",{onClick:function(){return e.props.onClick(!e.props.checked)},className:"m-slider"}))}}])&&u(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),p}(o().Component);p(d,"propTypes",{disabled:a().bool,className:a().string,checked:a().bool,onChange:a().func,onClick:a().func}),p(d,"defaultProps",{className:"",checked:!1,onChange:function(){},onClick:function(){}});const m=d},199767:(e,t,r)=>{"use strict";r.d(t,{qP:()=>v,XA:()=>g,fA:()=>w,gN:()=>h,p5:()=>O,Rr:()=>E,DK:()=>S,En:()=>P,Tr:()=>j,t$:()=>R,XJ:()=>D,Dx:()=>x,Jy:()=>T});var n=r(472500),o=r.n(n),i=r(666654),a=r.n(i),l=r(747037),u=r.n(l),c=r(701469),s=r.n(c),p=r(683608),f=r.n(p);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==d(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===d(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var v=function(e,t){return"<wps:Input>"+"<ows:Identifier>".concat(e,"</ows:Identifier>")+t+"</wps:Input>"},g=function(e){return"<wps:Data>".concat(e,"</wps:Data>")},w=function(e,t,r,n){return'<wps:Reference mimeType="'.concat(e,'" xlink:href="').concat(t,'" method="').concat(r,'"').concat("POST"===r?"":"/",">")+("POST"===r?"<wps:Body>".concat(n,"</wps:Body></wps:Reference>"):"")},h=function(e){return"<wps:LiteralData>".concat(e,"</wps:LiteralData>")},O=function(e,t,r){return"<wps:ComplexData".concat(t?' mimeType="'.concat(t,'"'):"").concat(r?' encoding="'.concat(r,'"'):"",">").concat(e,"</wps:ComplexData>")},E=function(e){return/\bCDATA\b/.test(e)?e:"<![CDATA[".concat(e,"]]>")},S=function(e){return"<wps:ResponseForm>".concat(e,"</wps:ResponseForm>")},P=function(e,t){return"<wps:RawDataOutput".concat(t?' mimeType="'.concat(t,'"'):"",">")+"<ows:Identifier>".concat(e,"</ows:Identifier>")+"</wps:RawDataOutput>"},j=function(e,t,r){return"<wps:ResponseDocument".concat(e?' storeExecuteResponse="true"':"").concat(t?' status="true"':"",">")+r+"</wps:ResponseDocument>"},R=function(e,t,r,n,o){return"<wps:Output".concat(e?' mimeType="'.concat(e,'"'):"").concat(t?' asReference="true"':"",">")+"<ows:Identifier>".concat(r,"</ows:Identifier>")+(n?"<ows:Title>".concat(n,"</ows:Title>"):"")+(o?"<ows:Abstract>".concat(o,"</ows:Abstract>"):"")+"</wps:Output>"},D=function(e){return v("writeParameters",g(O("<dwn:Parameters>".concat(e,"</dwn:Parameters>"))))},x=function(e,t){return'<dwn:Parameter key="'.concat(e,'">').concat(t,"</dwn:Parameter>")},A=function(e,t){var r=o().parse(e,!0),n=r.pathname;return(a()(r.pathname,"wfs")||a()(r.pathname,"wms"))&&(n=r.pathname.replace(/(wms|ows|wfs|wps)$/,"wps")),o().format(y(y({},r),{},{search:null,pathname:n,query:y(y({service:"WPS"},t),r.query)}))},T=function(e,t){if(e&&u()(e))return A(e,t);if(s()(e)){var r=f()(0,e.length-1);return A(e[r],t)}return e}},472747:(e,t,r)=>{"use strict";r.d(t,{l:()=>u});var n=r(49977),o=r(375875),i=r.n(o),a=r(510284),l=r(199767),u=function(e,t){return n.Observable.defer((function(){return i().get((0,l.Jy)(e,{version:"1.0.0",REQUEST:"DescribeProcess",IDENTIFIER:t}),{timeout:5e3,headers:{Accept:"application/json","Content-Type":"application/xml"}})})).let(a.oB)}},27835:(e,t,r)=>{"use strict";r.d(t,{Uh:()=>S,W5:()=>P,ai:()=>D,RW:()=>x,dr:()=>A,mG:()=>T});var n=r(406557),o=r.n(n),i=r(49977),a=r(505055),l=r(507526),u=r(375875),c=r.n(u),s=r(199767);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e,t,r){return(t=b(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b(e){var t=function(e,t){if("object"!==p(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===p(t)?t:String(t)}function v(e){var t="function"==typeof Map?new Map:void 0;return v=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return g(e,arguments,O(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),h(n,e)},v(e)}function g(e,t,r){return g=w()?Reflect.construct.bind():function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&h(o,r.prototype),o},g.apply(null,arguments)}function w(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}function O(e){return O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},O(e)}var E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(i,e);var t,r,n,o=(r=i,n=w(),function(){var e,t=O(r);if(n){var o=O(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e)).name="WPSExecuteError",r.code=t||e,r}return t=i,Object.defineProperty(t,"prototype",{writable:!1}),t}(v(Error)),S=function(e,t,r){return'<?xml version="1.0" encoding="UTF-8"?><wps:Execute version="1.0.0" service="WPS" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.opengis.net/wps/1.0.0" xmlns:wfs="http://www.opengis.net/wfs" xmlns:wps="http://www.opengis.net/wps/1.0.0" xmlns:ows="http://www.opengis.net/ows/1.1" xmlns:gml="http://www.opengis.net/gml" xmlns:ogc="http://www.opengis.net/ogc" xmlns:wcs="http://www.opengis.net/wcs/1.1.1" xmlns:dwn="http://geoserver.org/wps/download" xmlns:xlink="http://www.w3.org/1999/xlink" xsi:schemaLocation="http://www.opengis.net/wps/1.0.0 http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd">'+"<ows:Identifier>".concat(e,"</ows:Identifier>")+"<wps:DataInputs>"+(t||[]).join("")+"</wps:DataInputs>"+(r||"")+"</wps:Execute>"},P=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return i.Observable.defer((function(){return c().get((0,s.Jy)(e,{version:"1.0.0",REQUEST:"GetExecutionStatus",executionId:t}),m({headers:{Accept:"application/xml"}},r))}))},j=function(e,t){var r,n,i=function(e){var t,r,n,i,a,l,u,c,s,p,f,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o(),m=null==e||null===(t=e.ExecuteResponse)||void 0===t||null===(r=t.Status)||void 0===r?void 0:r[0];return null!=m&&m.ProcessAccepted?{status:"ProcessAccepted"}:null!=m&&m.ProcessStarted?{status:"ProcessStarted"}:null!=m&&m.ProcessSucceeded?{status:"ProcessSucceeded",data:d(null===(n=e.ExecuteResponse.ProcessOutputs)||void 0===n||null===(i=n[0])||void 0===i?void 0:i.Output)}:null!=m&&m.ProcessFailed?{status:"ProcessFailed",exceptionReport:null==m||null===(a=m.ProcessFailed)||void 0===a||null===(l=a[0])||void 0===l||null===(u=l.ExceptionReport)||void 0===u||null===(c=u[0])||void 0===c||null===(s=c.Exception)||void 0===s||null===(p=s[0])||void 0===p||null===(f=p.ExceptionText)||void 0===f?void 0:f[0]}:null!=m&&m.ProcessPaused?{status:"ProcessPaused"}:{status:"UnexpectedStatus"}}(e,t);if("ProcessFailed"===i.status)throw new E(i.exceptionReport,"ProcessFailed");if("UnexpectedStatus"===i.status)throw new E("UnexpectedProcessStatus");if("ProcessSucceeded"===i.status)return{succeeded:!0,data:i.data};var a=null==e||null===(r=e.ExecuteResponse)||void 0===r||null===(n=r.$)||void 0===n?void 0:n.statusLocation;if(!a)throw new E("NoStatusLocation");var l=a.indexOf("executionId=");if(-1===l)throw new E("NoExecutionId");var u=a.slice(l+12),c=u.indexOf("&");return{succeeded:!1,executionId:-1===c?u:u.slice(0,c)}},R=function(e){var t,r;return null!=e&&null!==(t=e.Identifier)&&void 0!==t&&t[0]?{identifier:null==e||null===(r=e.Identifier)||void 0===r?void 0:r[0]}:null},D=function(e){var t,r,n,o,i;return null!=e&&null!==(t=e.Data)&&void 0!==t&&null!==(r=t[0])&&void 0!==r&&r.LiteralData?{data:null==e||null===(n=e.Data)||void 0===n||null===(o=n[0])||void 0===o||null===(i=o.LiteralData)||void 0===i?void 0:i[0]}:null},x=function(e){var t,r,n,o,i,a;return null!=e&&e.Reference?{href:null==e||null===(t=e.Reference)||void 0===t||null===(r=t[0])||void 0===r||null===(n=r.$)||void 0===n?void 0:n.href,mimeType:null==e||null===(o=e.Reference)||void 0===o||null===(i=o[0])||void 0===i||null===(a=i.$)||void 0===a?void 0:a.mimeType}:null},A=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((function(e){return[R].concat((r=t||[],function(e){if(Array.isArray(e))return f(e)}(r)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())).map((function(t){return t(e)})).reduce((function(e,t){return t?m(m({},e),t):e}),{});var r}))}},T=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=r.executeStatusUpdateInterval,u=void 0===o?2e3:o,p=r.outputsExtractor,f=function(e){return i.Observable.defer((function(){return new Promise((function(t,r){return(0,a.parseString)(e,{tagNameProcessors:[l.stripPrefix]},(function(e,n){return e?r(e):t(n)}))}))}))};return function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return i.Observable.defer((function(){return c().post((0,s.Jy)(e,{version:"1.0.0",REQUEST:"Execute"}),t,m({headers:{"Content-Type":"application/xml"}},r))}))}(e,t,n).catch((function(){throw new E("ExecuteProcessXHRFailed")})).switchMap((function(e){return"application/xml"===e.headers["content-type"]||"text/xml"===e.headers["content-type"]?f(e.data).map((function(t){return{data:t,type:"application/xml",originalData:e.data}})):i.Observable.of({data:e.data,type:e.headers["content-type"]})})).flatMap((function(t){var r=t.data,n=t.type,o=t.originalData;if("application/xml"!==n)return i.Observable.of(r);if(null==r||!r.ExecuteResponse)return i.Observable.of(o);var a=j(r,p),l=a.succeeded,c=a.data,s=a.executionId;if(l)return i.Observable.of(c);var d=i.Observable.interval(u).take(1).flatMap((function(){return P(e,s).catch((function(){throw new E("GetExecutionStatusXHRFailed")})).flatMap((function(e){return f(e.data).flatMap((function(e){var t=j(e,p);return t.succeeded?i.Observable.of(t.data):d}))}))}));return d}))}},725599:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>Dr});var n={};r.r(n),r.d(n,{checkExportDataEntriesEpic:()=>vr,checkWPSAvailabilityEpic:()=>pr,closeExportDownload:()=>yr,fetchFormatsWFSDownload:()=>dr,openDownloadTool:()=>fr,resetExportDataResultsOnLogout:()=>wr,serializeCookieOnExportDataChange:()=>gr,setExportDataResultsOnLoginSuccessAndMapConfigLoaded:()=>hr,showInfoBubbleMessageEpic:()=>br,startFeatureExportDownload:()=>mr});var o=r(171703),i=r(22222),a="LAYERDOWNLOAD:CHECK_WPS_AVAILABILITY",l="LAYERDOWNLOAD:CHECKING_WPS_AVAILABILITY",u="LAYERDOWNLOAD:DOWNLOAD_FEATURES",c="LAYERDOWNLOAD:DOWNLOAD_FINISHED",s="LAYERDOWNLOAD:FORMAT_SELECTED",p="LAYERDOWNLOAD:CLEAR_DOWNLOAD_OPTIONS",f="LAYERDOWNLOAD:FORMAT_FETCH",d="LAYERDOWNLOAD:FORMAT_UPDATE",m="LAYERDOWNLOAD:SET_WPS_AVAILABLE",y="LAYERDOWNLOAD:SET_SERVICE",b="LAYERDOWNLOAD:SET_EXPORT_DATA_RESULTS",v="LAYERDOWNLOAD:ADD_EXPORT_DATA_RESULT",g="LAYERDOWNLOAD:UPDATE_EXPORT_DATA_RESULT",w="LAYERDOWNLOAD:REMOVE_EXPORT_DATA_RESULT",h="LAYERDOWNLOAD:REMOVE_EXPORT_DATA_RESULTS",O="LAYERDOWNLOAD:CHECK_EXPORT_DATA_ENTRIES",E="LAYERDOWNLOAD:CHECKING_EXPORT_DATA_ENTRIES",S="LAYERDOWNLOAD:SERIALIZE_COOKIE",P="LAYERDOWNLOAD:SHOW_INFO_BUBBLE_MESSAGE",j="LAYERDOWNLOAD:SHOW_INFO_BUBBLE",R="LAYERDOWNLOAD:SET_INFO_BUBBLE_MESSAGE",D=function(e){return{type:l,checking:e}},x=function(e,t){return{type:s,key:e,value:t}},A=function(){return{type:c}},T=function(e){return{type:m,value:e}},N=function(e){return{type:y,service:e}},C=function(e){return{type:b,results:e}},F=function(e,t){return{type:g,id:e,newProps:t}},I=function(e){return{type:E,checking:e}},L=function(e,t,r,n){return{type:P,msgId:e,msgParams:t,level:r,duration:n}},k=function(e){return{type:j,show:e}},_=r(782904),G=r(731255),M=r(675110),q=r(824260),U=function(e){var t;return null==e||null===(t=e.layerdownload)||void 0===t?void 0:t.service},W=(0,i.P1)(G.Rd,q.X1,M.Iz,(function(e,t,r){return e?t:null!=r&&r.name?{featureTypeName:r.name,filterType:"OGC",ogcVersion:"1.1.0"}:null})),Z=function(e){var t;return null==e||null===(t=e.layerdownload)||void 0===t?void 0:t.results},B=r(308316),X=r(124852),Y=r.n(X),V=r(675263),z=r.n(V),H=r(630998),K=r.n(H),Q=r(727418),$=r.n(Q),J=r(757588),ee=r(472986),te=r.n(ee),re=r(532425),ne=r(807472),oe=r(399534),ie=r(805346),ae=r(135400),le=r(743129),ue=r(227361),ce=r.n(ue),se=r(91175),pe=r.n(se),fe=r(747037),de=r.n(fe),me=r(145869);function ye(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const be=function(e){var t,r,n=e.cropDataSetVisible,o=void 0!==n&&n,i=e.cropDataSetEnabled,a=void 0!==i&&i,l=e.donwloadFilteredVisible,u=void 0!==l&&l,c=e.downloadFilteredEnabled,s=void 0!==c&&c,p=e.advancedOptionsVisible,f=void 0!==p&&p,d=e.compressionOptions,m=void 0===d?["CCITT RLE","LZW","JPEG","ZLib","PackBits","Deflate"]:d,y=e.selectedCompression,b=e.tileWidth,v=e.tileHeight,g=e.quality,w=e.onChange,h=void 0===w?function(){}:w,O=(t=Y().useState(!1),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],u=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(t,r)||function(e,t){if(e){if("string"==typeof e)return ye(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ye(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),E=O[0],S=O[1];return Y().createElement(Y().Fragment,null,o&&Y().createElement("div",{className:"mapstore-downloadwpsoptions-menuitem"},Y().createElement(me.Z,{checked:a,onClick:function(e){return h("cropDataSet",e)}}),Y().createElement(ie.Z,{msgId:"layerdownload.cropDataSet"})),u&&Y().createElement("div",{className:"mapstore-downloadwpsoptions-menuitem"},Y().createElement(me.Z,{checked:s,onClick:function(e){return h("downloadFilteredDataSet",e)}}),Y().createElement(ie.Z,{msgId:"layerdownload.downloadFilteredDataSet"})),f&&Y().createElement("div",{className:"mapstore-downloadwpsoptions-advanced-options"},Y().createElement(J.Button,{className:"no-border",onClick:function(){return S(!E)}},Y().createElement(J.Glyphicon,{glyph:"chevron-".concat(E?"down":"right")})),Y().createElement(ie.Z,{msgId:"layerdownload.advancedOptions"})),E&&f&&Y().createElement("div",{className:"mapstore-downloadwpsoptions-advanced"},Y().createElement("div",{className:"mapstore-downloadwpsoptions-advanced-menuitem"},Y().createElement(ie.Z,{msgId:"layerdownload.compression"}),Y().createElement(le.ZP,{clearable:!0,value:y,options:m.map((function(e){return de()(e)?{value:e,label:e}:e})),onChange:function(e){return h("compression",null==e?void 0:e.value)}})),Y().createElement("div",{className:"mapstore-downloadwpsoptions-advanced-menuitem"},Y().createElement(ie.Z,{msgId:"layerdownload.quality"}),Y().createElement("div",{className:"mapstore-downloadwpsoptions-advanced-menuitem-control"},Y().createElement(J.FormControl,{placeholder:"0.75",type:"number",min:"0",max:"1",value:g||"",onChange:function(e){return h("quality",e.target.value)}}))),Y().createElement("div",{className:"mapstore-downloadwpsoptions-advanced-menuitem"},Y().createElement(ie.Z,{msgId:"layerdownload.tileWidth"}),Y().createElement("div",{className:"mapstore-downloadwpsoptions-advanced-menuitem-control"},Y().createElement(J.FormControl,{placeholder:"256",type:"number",min:"0",value:b||"",onChange:function(e){return h("tileWidth",e.target.value&&e.target.value.length>0?"".concat(parseInt(e.target.value,10)):"")}}),Y().createElement("span",null,"px"))),Y().createElement("div",{className:"mapstore-downloadwpsoptions-advanced-menuitem"},Y().createElement(ie.Z,{msgId:"layerdownload.tileHeight"}),Y().createElement("div",{className:"mapstore-downloadwpsoptions-advanced-menuitem-control"},Y().createElement(J.FormControl,{placeholder:"256",type:"number",min:"0",value:v||"",onChange:function(e){return h("tileHeight",e.target.value&&e.target.value.length>0?"".concat(parseInt(e.target.value,10)):"")}}),Y().createElement("span",null,"px")))))};function ve(e){return ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ve(e)}function ge(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Se(n.key),n)}}function we(e,t){return we=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},we(e,t)}function he(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Oe(e){return Oe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Oe(e)}function Ee(e,t,r){return(t=Se(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Se(e){var t=function(e,t){if("object"!==ve(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==ve(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===ve(t)?t:String(t)}var Pe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&we(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Oe(n);if(o){var r=Oe(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===ve(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return he(e)}(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),Ee(he(t=i.call(this,e)),"getSelectedFormat",(function(){return ce()(t.props,"downloadOptions.selectedFormat")})),Ee(he(t),"getSelectedSRS",(function(){return ce()(t.props,"downloadOptions.selectedSrs")||t.props.defaultSrs||ce()(pe()(t.props.srsList),"name")})),t}return t=a,(r=[{key:"render",value:function(){var e,t=this;return Y().createElement("form",null,!this.props.hideServiceSelector&&this.props.wpsAvailable&&this.props.wfsAvailable&&Y().createElement(Y().Fragment,null,Y().createElement("label",null,Y().createElement(ie.Z,{msgId:"layerdownload.service"})),Y().createElement(le.ZP,{clearable:!1,value:this.props.service,onChange:function(e){return t.props.setService(e.value)},options:this.props.services})),Y().createElement("label",null,Y().createElement(ie.Z,{msgId:"layerdownload.format"})),Y().createElement(le.ZP,{clearable:!1,isLoading:this.props.formatsLoading,onOpen:function(){return t.props.formatOptionsFetch(t.props.layer)},value:null===(e=this.props.downloadOptions)||void 0===e?void 0:e.selectedFormat,noResultsText:Y().createElement(ie.Z,{msgId:"layerdownload.format"}),onChange:function(e){return t.props.onChange("selectedFormat",e.value)},options:this.props.formats.map((function(e){return{value:e.name,label:e.label||e.name}}))}),Y().createElement("label",null,Y().createElement(ie.Z,{msgId:"layerdownload.srs"})),Y().createElement(le.ZP,{clearable:!1,value:this.getSelectedSRS(),onChange:function(e){return t.props.onChange("selectedSrs",e.value)},options:this.props.srsList.map((function(e){return{value:e.name,label:e.label||e.name}}))}),this.props.wpsOptionsVisible&&Y().createElement(be,{cropDataSetVisible:!0,donwloadFilteredVisible:this.props.downloadFilteredVisible,advancedOptionsVisible:this.props.wpsAdvancedOptionsVisible,cropDataSetEnabled:this.props.downloadOptions.cropDataSet,downloadFilteredEnabled:this.props.downloadOptions.downloadFilteredDataSet,selectedCompression:this.props.downloadOptions.compression,quality:this.props.downloadOptions.quality,tileWidth:this.props.downloadOptions.tileWidth,tileHeight:this.props.downloadOptions.tileHeight,onChange:this.props.onChange}),this.props.virtualScroll?null:Y().createElement(J.Checkbox,{checked:this.props.downloadOptions.singlePage,onChange:function(){return t.props.onChange("singlePage",!t.props.downloadOptions.singlePage)}},Y().createElement(ie.Z,{msgId:"layerdownload.downloadonlycurrentpage"})))}}])&&ge(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(Y().Component);Ee(Pe,"propTypes",{wpsAvailable:z().bool,wfsAvailable:z().bool,service:z().string,downloadOptions:z().object,formatOptionsFetch:z().func,formats:z().array,srsList:z().array,setService:z().func,onChange:z().func,defaultSrs:z().string,wpsOptionsVisible:z().bool,wpsAdvancedOptionsVisible:z().bool,downloadFilteredVisible:z().bool,layer:z().object,formatsLoading:z().bool,virtualScroll:z().bool,services:z().arrayOf(z().object),hideServiceSelector:z().bool}),Ee(Pe,"defaultProps",{wpsAvailable:!1,wfsAvailable:!0,service:"wps",downloadOptions:{},formatsLoading:!1,formats:[],srsList:[],wpsOptionsVisible:!1,wpsAdvancedOptionsVisible:!1,downloadFilteredVisible:!1,virtualScroll:!0,services:[{value:"wps",label:"WPS"},{value:"wfs",label:"WFS"}],hideServiceSelector:!1});const je=Pe;var Re=r(282467),De=r(196958);function xe(e){return xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xe(e)}function Ae(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ie(n.key),n)}}function Te(e,t){return Te=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Te(e,t)}function Ne(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ce(e){return Ce=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ce(e)}function Fe(e,t,r){return(t=Ie(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ie(e){var t=function(e,t){if("object"!==xe(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==xe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===xe(t)?t:String(t)}var Le=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Te(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ce(n);if(o){var r=Ce(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===xe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ne(e)}(this,e)});function a(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Fe(Ne(e=i.call.apply(i,[this].concat(r))),"onClose",(function(){e.props.onClose()})),Fe(Ne(e),"renderIcon",(function(){return e.props.loading?Y().createElement("div",{style:{float:"left"}},Y().createElement(te(),{spinnerName:"circle",noFadeIn:!0})):Y().createElement(J.Glyphicon,{glyph:"download"})})),Fe(Ne(e),"handleExport",(function(){var t=e.props,r=t.url,n=t.filterObj,o=t.downloadOptions,i=t.defaultSrs,a=t.srsList,l=t.onExport,u=t.layer,c=t.attributes,s=t.customAttributeSettings,p=o&&o.selectedSrs||i||(a[0]||{}).name,f=(0,De.Pf)(c,s);l(r||u.url,n,$()({},o,{selectedSrs:p},{propertyName:f}))})),e}return t=a,(r=[{key:"componentDidUpdate",value:function(e){this.props.enabled!==e.enabled&&this.props.enabled&&(this.props.onClearDownloadOptions(),"wms"===this.props.layer.type&&this.props.onCheckWPSAvailability(this.props.url||this.props.layer.url,this.props.defaultSelectedService))}},{key:"render",value:function(){var e,t,r,n=this,o=function(e){return n.props.formats.filter((function(t){var r,o,i=t.validServices,a=t.type,l=void 0===a?"vector":a;return(!i||K()(i,(function(t){return t===e}))>-1)&&("vector"===l&&(null===(r=n.props.layer.search)||void 0===r?void 0:r.url)||"raster"===l&&!(null!==(o=n.props.layer.search)&&void 0!==o&&o.url))}))},i=o("wfs"),a=o("wps"),l=i.length>0?i.filter((function(e){return n.props.wfsFormats.find((function(t){return t.name.toLowerCase()===e.name.toLowerCase()}))})):this.props.wfsFormats,u=Boolean(null===(e=this.props.layer.search)||void 0===e?void 0:e.url);return this.props.enabled?Y().createElement(oe.Z,null,Y().createElement(ne.Z,{id:"mapstore-export",draggable:!1,modal:!0},Y().createElement("span",{role:"header"},Y().createElement("span",{className:"about-panel-title"},Y().createElement(ie.Z,{msgId:"layerdownload.title"})),Y().createElement("button",{onClick:this.onClose,className:"settings-panel-close close"},this.props.closeGlyph?Y().createElement(J.Glyphicon,{glyph:this.props.closeGlyph}):Y().createElement("span",null,""))),Y().createElement("div",{role:"body"},this.props.checkingWPSAvailability?Y().createElement(re.Z,{size:100,style:{margin:"0 auto"}}):this.props.wpsAvailable||u?Y().createElement(je,{wpsAvailable:this.props.wpsAvailable,wfsAvailable:u,service:this.props.service,downloadOptions:this.props.downloadOptions,setService:this.props.setService,onChange:this.props.onDownloadOptionChange,formatOptionsFetch:"wfs"===this.props.service?this.props.onFormatOptionsFetch:function(){},formatsLoading:this.props.formatsLoading,formats:"wfs"===this.props.service?l:a,srsList:this.props.srsList,defaultSrs:this.props.defaultSrs,wpsOptionsVisible:"wps"===this.props.service,wpsAdvancedOptionsVisible:!(null!==(t=this.props.layer.search)&&void 0!==t&&t.url),downloadFilteredVisible:!(null===(r=this.props.layer.search)||void 0===r||!r.url),layer:this.props.layer,virtualScroll:this.props.virtualScroll,customAttributesSettings:this.props.customAttributeSettings,attributes:this.props.attributes,hideServiceSelector:this.props.hideServiceSelector}):Y().createElement(ae.Z,{title:Y().createElement(ie.Z,{msgId:"layerdownload.noSupportedServiceFound"})})),!this.props.checkingWPSAvailability&&Y().createElement("div",{role:"footer"},Y().createElement(Re.Z,{bsStyle:"primary",className:"download-button",disabled:!this.props.downloadOptions.selectedFormat||this.props.loading,onClick:this.handleExport},this.renderIcon()," ",Y().createElement(ie.Z,{msgId:"layerdownload.export"}))))):null}}])&&Ae(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(Y().Component);Fe(Le,"propTypes",{filterObj:z().object,closeGlyph:z().string,url:z().string,wpsAvailable:z().bool,service:z().string,defaultSelectedService:z().string,enabled:z().bool,loading:z().bool,checkingWPSAvailability:z().bool,onClose:z().func,onExport:z().func,onCheckWPSAvailability:z().func,setService:z().func,onDownloadOptionChange:z().func,onClearDownloadOptions:z().func,onFormatOptionsFetch:z().func,downloadOptions:z().object,wfsFormats:z().array,formats:z().array,srsList:z().array,defaultSrs:z().string,layer:z().object,formatsLoading:z().bool,virtualScroll:z().bool,customAttributeSettings:z().object,attributes:z().array,hideServiceSelector:z().bool}),Fe(Le,"defaultProps",{onExport:function(){},onClose:function(){},onCheckWPSAvailability:function(){},setService:function(){},onDownloadOptionChange:function(){},onClearDownloadOptions:function(){},onFormatOptionsFetch:function(){},checkingWPSAvailability:!1,layer:{},closeGlyph:"1-close",wpsAvailable:!1,service:"wfs",defaultSelectedService:"wps",wfsFormats:[],formats:[{name:"application/json",label:"GeoJSON",type:"vector",validServices:["wps"]},{name:"application/arcgrid",label:"ArcGrid",type:"raster",validServices:["wps"]},{name:"image/tiff",label:"TIFF",type:"raster",validServices:["wps"]},{name:"application/wfs-collection-1.0",label:"wfs-collection-1.0",type:"vector",validServices:["wps"]},{name:"application/wfs-collection-1.1",label:"wfs-collection-1.1",type:"vector",validServices:["wps"]},{name:"application/zip",label:"Shapefile",type:"vector",validServices:["wps"]},{name:"text/csv",label:"CSV",type:"vector",validServices:["wps"]}],formatsLoading:!1,srsList:[{name:"native",label:"Native"},{name:"EPSG:4326",label:"WGS84"}],virtualScroll:!0,downloadOptions:{},hideServiceSelector:!1});const ke=Le;var _e=r(982030),Ge=r(950966),Me=r(624262),qe=Y().createElement(J.Button,{bsStyle:"primary",bsSize:"small",className:"mapstore-exportdataresults-item-failed"},Y().createElement(J.Glyphicon,{glyph:"exclamation-sign"}));const Ue=(0,_e.Z)((function(e){var t=e.results;return!(void 0===t?[]:t).length}),{title:Y().createElement(ie.Z,{msgId:"exportDataResults.emptyStateMessage"})})((function(e){var t=e.loading,r=void 0!==t&&t,n=e.results,o=void 0===n?[]:n,i=e.currentLocale,a=e.onRemoveResult,l=void 0===a?function(){}:a;return r?Y().createElement(re.Z,{size:100,style:{margin:"0 auto",padding:"10px"}}):Y().createElement("div",{className:"mapstore-exportdataresults-container"},o.map((function(e){var t=e.id,r=e.layerName,n=e.layerTitle,o=e.startTime,a=e.status,u=e.result,c=(0,Me.in)({name:r,title:n},i),s=new Date(o),p=function(e){return e<10?"0".concat(e):"".concat(e)},f="".concat(p(s.getDate()),"/").concat(p(s.getMonth()+1),"/").concat(s.getFullYear()," ").concat(p(s.getHours()),":").concat(p(s.getMinutes()));return Y().createElement("div",{key:t,className:"mapstore-exportdataresults-item"},Y().createElement("div",{className:"mapstore-exportdataresults-item-name"},c),Y().createElement("div",{className:"mapstore-exportdataresults-item-date"},f),Y().createElement("div",{className:"mapstore-exportdataresults-item-buttons"},"pending"===a&&Y().createElement(re.Z,{size:22,style:{marginLeft:"2px"}}),"failed"===a&&u&&u.msgId?Y().createElement(Ge.Z,{placement:"top",overlay:Y().createElement(J.Tooltip,{id:"exportresults-failure-tooltip"},Y().createElement(ie.Z,{msgId:u.msgId,msgParams:u.msgParams}))},qe):null,"failed"!==a||u&&u.msgId?null:qe,"completed"===a&&Y().createElement("a",{href:u,target:"_blank",rel:"noopener noreferrer"},Y().createElement(J.Button,{bsStyle:"primary",bsSize:"small"},Y().createElement(J.Glyphicon,{glyph:"floppy-disk"}))),Y().createElement(J.Button,{bsStyle:"primary",bsSize:"small",onClick:function(){return l(t)}},Y().createElement(J.Glyphicon,{glyph:"trash"}))))})))}));var We=r(294184),Ze=r.n(We);function Be(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const Xe=function(e){var t,r=e.show,n=e.arrowDirection,o=void 0===n?"bottom":n,i=e.className,a=e.containerClassName,l=e.children;return Y().createElement("div",{className:Ze().apply(void 0,["mapstore-info-bubble"].concat((t=r?["mapstore-info-bubble-visible"]:[],function(e){if(Array.isArray(e))return Be(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return Be(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Be(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[i]))},Y().createElement("div",{className:Ze()("mapstore-info-bubble-container",a)},Y().createElement("div",{className:Ze()("mapstore-info-bubble-arrow-container","arrow-".concat(o))},Y().createElement("div",{className:"mapstore-info-bubble-arrow"})),Y().createElement("div",{className:"mapstore-info-bubble-inner"},l)))},Ye=function(e){var t=e.msgId,r=e.msgParams,n=e.level,o=void 0===n?"normal":n,i=e.className;return Y().createElement("div",{className:Ze()("mapstore-info-bubble-default-inner","mapstore-info-bubble-default-inner-level-".concat(o),i)},t?Y().createElement(ie.Z,{msgId:t,msgParams:r}):null)};var Ve=r(921533),ze=r(656903),He=(0,Ve.Z)(ze.Z),Ke=r(49977),Qe=r.n(Ke),$e=r(313311),Je=r.n($e),et=r(478718),tt=r.n(et),rt=r(493220),nt=r.n(rt),ot=r(984596),it=r.n(ot),at=r(178598),lt=r(505055),ut=r(507526),ct=r(423570),st=r.n(ct),pt=r(275982),ft=r(580416),dt=r(95797),mt=r(197395),yt=r(263516),bt=r(881808),vt=r(607147),gt=r(800827),wt=r(274621),ht=r(886850),Ot=r(472747),Et=r(3674),St=r.n(Et),Pt=r(957557),jt=r.n(Pt),Rt=r(199767),Dt=r(27835);function xt(e){return xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xt(e)}function At(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Tt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?At(Object(r),!0).forEach((function(t){Nt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):At(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Nt(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==xt(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==xt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===xt(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ct(e){return function(e){if(Array.isArray(e))return It(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ft(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ft(e,t){if(e){if("string"==typeof e)return It(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?It(e,t):void 0}}function It(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Lt=function(e){var t=e.type,r=e.data;return"TEXT"===t?(0,Rt.XA)((0,Rt.p5)((0,Rt.Rr)(r.data),r.mimeType)):(0,Rt.fA)(r.mimeType,r.href,r.method,(0,Rt.Rr)(r.requestBodyData))},kt=function(e){var t=e.layerName,r=e.ROI,n=e.roiCRS,o=e.dataFilter,i=e.targetCRS;return(0,Dt.Uh)("gs:DownloadEstimator",[(0,Rt.qP)("layerName",(0,Rt.XA)((0,Rt.gN)(t)))].concat(Ct(r?[(0,Rt.qP)("ROI",Lt(r))]:[]),Ct(n?[(0,Rt.qP)("RoiCRS",(0,Rt.XA)((0,Rt.gN)(n)))]:[]),Ct(o?[(0,Rt.qP)("filter",Lt(o))]:[]),Ct(i?[(0,Rt.qP)("targetCRS",(0,Rt.XA)((0,Rt.gN)(i)))]:[])))},_t=function(e){var t=e.layerName,r=e.dataFilter,n=e.outputFormat,o=e.targetCRS,i=e.roiCRS,a=e.ROI,l=e.cropToROI,u=e.asynchronous,c=e.outputAsReference,s=e.resultOutput,p=e.writeParameters;return(0,Dt.Uh)("gs:Download",[(0,Rt.qP)("layerName",(0,Rt.XA)((0,Rt.gN)(t))),(0,Rt.qP)("outputFormat",(0,Rt.XA)((0,Rt.gN)(n)))].concat(Ct(a?[(0,Rt.qP)("ROI",Lt(a))]:[]),Ct(r?[(0,Rt.qP)("filter",Lt(r))]:[]),Ct(o?[(0,Rt.qP)("targetCRS",(0,Rt.XA)((0,Rt.gN)(o)))]:[]),Ct(i?[(0,Rt.qP)("RoiCRS",(0,Rt.XA)((0,Rt.gN)(i)))]:[]),[(0,Rt.qP)("cropToROI",(0,Rt.XA)((0,Rt.gN)(l?"true":"false")))],Ct(p&&St()(p).length>0?[(0,Rt.XJ)(nt()(p).map((function(e){var t,r,n=(r=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],u=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(t,r)||Ft(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=n[0],i=n[1];return(0,Rt.Dx)(o,i)})).join(""))]:[])),(0,Rt.DK)(u?(0,Rt.Tr)(!0,!0,c?(0,Rt.t$)(s,!0,"result"):(0,Rt.En)("result",s)):(0,Rt.En)("result",s)))},Gt=function(e,t,r){if(e&&t){var n=(0,Dt.mG)(e,kt({layerName:t.layerName,ROI:t.ROI,roiCRS:t.roiCRS,dataFilter:t.dataFilter,targetCRS:t.targetCRS}),{outputsExtractor:(0,Dt.dr)(Dt.ai)}),o=t.resultOutput||t.outputFormat||"application/zip",i=(0,Dt.mG)(e,_t(Tt(Tt({},jt()(t,"notifyDownloadEstimatorSuccess","attribute")),{},{outputAsReference:!!t.asynchronous&&t.outputAsReference,resultOutput:o})),r,{headers:{"Content-Type":"application/xml",Accept:"application/xml, ".concat(o)}});return n.catch((function(){throw new Error("DownloadEstimatorException")})).mergeMap((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(e.length>0&&"result"===e[0].identifier&&"true"===e[0].data)return t.notifyDownloadEstimatorSuccess?Ke.Observable.of("DownloadEstimatorSuccess").concat(i):i;throw new Error("DownloadEstimatorFailed")}))}return Ke.Observable.empty()},Mt=function(e,t,r){if(e&&t){var n=(0,Dt.mG)(e,kt({layerName:t.layerName,ROI:t.ROI,roiCRS:t.roiCRS,dataFilter:t.dataFilter,targetCRS:t.targetCRS}),{outputsExtractor:(0,Dt.dr)(Dt.ai)}),o=t.resultOutput||t.outputFormat||"application/zip",i=(0,Dt.mG)(e,_t(Tt(Tt({},jt()(t,"notifyDownloadEstimatorSuccess","attribute","asynchronous","outputFormat")),{},{asynchronous:!0,outputAsReference:!0,resultOutput:"application/wfs-collection-1.0",outputFormat:"application/wfs-collection-1.0"})),r,{headers:{"Content-Type":"application/xml",Accept:"application/xml, application/wfs-collection-1.0"}});return n.catch((function(){throw new Error("DownloadEstimatorException")})).mergeMap((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(e.length>0&&"result"===e[0].identifier&&"true"===e[0].data)return t.notifyDownloadEstimatorSuccess?Ke.Observable.of("DownloadEstimatorSuccess").concat(i):i;throw new Error("DownloadEstimatorFailed")})).mergeMap((function(n){if("DownloadEstimatorSuccess"===n)return Ke.Observable.of("DownloadEstimatorSuccess");if(n&&1===(null==n?void 0:n.length))return(0,Dt.mG)(e,function(e){var t=e.input,r=e.attribute,n=e.filter,o=e.asynchronous,i=e.outputAsReference,a=e.resultOutput;return(0,Dt.Uh)("vec:Query",[(0,Rt.qP)("features",(0,Rt.fA)(t.mimeType,t.href.replace(/&/g,"&amp;"),"GET"))].concat(Ct(r?r.map((function(e){return(0,Rt.qP)("attribute",(0,Rt.XA)((0,Rt.gN)(e)))})):[]),Ct(n?[(0,Rt.qP)("filter",Lt(n))]:[])),(0,Rt.DK)(o?(0,Rt.Tr)(!0,!0,i?(0,Rt.t$)(a,!0,"result"):(0,Rt.En)("result",a)):(0,Rt.En)("result",a)))}(Tt(Tt({},jt()(t,"notifyDownloadEstimatorSuccess")),{},{input:n[0],filter:null,outputAsReference:!!t.asynchronous&&t.outputAsReference,resultOutput:o})),r,{headers:{"Content-Type":"application/xml",Accept:"application/xml, ".concat(o)}});throw new Error("DownloadFailed")}))}return Ke.Observable.empty()},qt=r(47805),Ut=[{outputFormat:"shape-zip",extension:"zip"},{outputFormat:"csv",extension:"csv"},{outputFormat:"excel",extension:"xls"},{outputFormat:"excel2007",extension:"xlsx"},{outputFormat:"dxf",extension:"dxf"},{outputFormat:"dxf-zip",extension:"zip"},{outputFormat:"application/vnd.google-earth.kml+xml",extension:"kml"},{outputFormat:"application/json",extension:"json"},{outputFormat:"gml3",extension:"gml"},{outputFormat:"GML2",extension:"gml"},{outputFormat:"application/vnd.googlxml",extension:"kml"},{outputFormat:"OGR-CSV",extension:"csv"},{outputFormat:"OGR-FileGDB",extension:"gdb"},{outputFormat:"OGR-GPKG",extension:"gpkg"},{outputFormat:"OGR-KML",extension:"kml"},{outputFormat:"OGR-MIF",extension:"mif"},{outputFormat:"OGR-TAB",extension:"tab"},{outputFormat:"SHAPE-ZIP",extension:"zip"},{outputFormat:"gml32",extension:"gml"},{outputFormat:"application/x-gpk",extension:"gpk"}],Wt=r(986267),Zt=r(510284),Bt=r(439156),Xt=r.n(Bt),Yt=r(838848);function Vt(e){return Vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vt(e)}function zt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ht(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?zt(Object(r),!0).forEach((function(t){Kt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Kt(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==Vt(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Vt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Vt(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qt(e){return function(e){if(Array.isArray(e))return Jt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||$t(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $t(e,t){if(e){if("string"==typeof e)return Jt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Jt(e,t):void 0}}function Jt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var er={gml3:"GML3.1",GML2:"GML2","DXF-ZIP":"DXF-ZIP","application/vnd.google-earth.kml+xml":"KML","OGR-CSV":"OGR-CSV","OGR-FileGDB":"OGR-GeoDatabase","OGR-GPKG":"OGR-GeoPackage","OGR-KML":"OGR-KML","OGR-MIF":"OGR-MIF","OGR-TAB":"OGR-TAB","SHAPE-ZIP":"Shapefile",gml32:"GML3.2","application/json":"GeoJSON",csv:"CSV","application/x-gpkg":"GeoPackage",excel:"excel",excel2007:"excel2007"},tr=Xt()({wfsVersion:"1.1.0"}),rr=tr.getFeature,nr=tr.query,or=tr.sortBy,ir=tr.propertyName,ar=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.url,r=e.filterObj,n=void 0===r?{}:r,o=e.layerFilter,i=e.downloadOptions,a=void 0===i?{}:i,l=e.options,u=l.sortOptions,c=l.propertyNames,s=(0,qt.mergeFiltersToOGC)({ogcVersion:"1.1.0",addXmlnsToRoot:!0,xmlnsToAdd:['xmlns:ogc="http://www.opengis.net/ogc"','xmlns:gml="http://www.opengis.net/gml"']},o,n);return(0,ht.V6)(t,rr(nr(n.featureTypeName,[].concat(Qt(u?[or(u.sortBy,u.sortOrder)]:[]),Qt(c?[ir(c)]:[]),Qt(s?it()(s):[])),{srsName:a.selectedSrs})),l,a.selectedFormat)},lr=function(e){var t,r=ce()(e,"filterObj.featureTypeName"),n=(t=ce()(e,"downloadOptions.selectedFormat"),pe()(Ut.filter((function(e){return e.outputFormat===t})))||function(e){var t=e.split(/[^\w]/)[1];return t?{outputFormat:e,extension:t.toLowerCase()}:void 0}(t));return n&&n.extension?r+"."+n.extension:r},ur=function(e){return e.query&&e.query.featureTypes&&e.query.featureTypes[e.query.typeName]&&e.query.featureTypes[e.query.typeName].attributes&&e.query.featureTypes[e.query.typeName].attributes[0]&&e.query.featureTypes[e.query.typeName].attributes[0].attribute||null},cr=function(e){switch(e.code){case"ProcessFailed":return{msgId:"layerdownload.wpsExecuteError.processFailed",msgParams:{exceptionReport:e.message}};case"NoStatusLocation":case"NoExecutionId":case"UnexpectedProcessStatus":return{msgId:"layerdownload.wpsExecuteError.badResponse",msgParams:{eCode:e.code}};case"ExecuteProcessXHRFailed":return{msgId:"layerdownload.wpsExecuteError.executeProcessXhrFailed"};case"GetExecutionStatusXHRFailed":return{msgId:"layerdonwload.wpsExecuteError.getExecutionStatusXhrFailed"};default:return{msgId:"layerdownload.wpsExecuteError.unexpectedError"}}},sr=function(e){var t=(0,wt.np)(e);if(null!=t&&t.id){var r=document.cookie.split(";").filter((function(e){return e.indexOf("exportDataResults_".concat(t.id,"="))>-1}))[0];if(r){var n=JSON.parse(decodeURIComponent(r.split("=")[1])).results;return Qe().Observable.of(C(n.filter((function(e){return"pending"!==e.status}))))}}return Qe().Observable.empty()},pr=function(e,t){return e.ofType(a).switchMap((function(e){var r=e.url,n=e.selectedService;return(0,Ot.l)(r,"gs:DownloadEstimator,gs:Download").switchMap((function(e){return Qe().Observable.defer((function(){return new Promise((function(t,r){return(0,lt.parseString)(e.data,{tagNameProcessors:[ut.stripPrefix]},(function(e,n){return e?r(e):t(n)}))}))}))})).flatMap((function(e){var r,o,i,a,l,u,c,s,p,f=t.getState(),d=(0,M.Iz)(f),m=[null==e||null===(r=e.ProcessDescriptions)||void 0===r||null===(o=r.ProcessDescription)||void 0===o||null===(i=o[0])||void 0===i||null===(a=i.Identifier)||void 0===a?void 0:a[0],null==e||null===(l=e.ProcessDescriptions)||void 0===l||null===(u=l.ProcessDescription)||void 0===u||null===(c=u[1])||void 0===c||null===(s=c.Identifier)||void 0===s?void 0:s[0]],y=K()(m,(function(e){return"gs:DownloadEstimator"===e}))>-1&&K()(m,(function(e){return"gs:Download"===e}))>-1,b=null===(p=d.search)||void 0===p?void 0:p.url,v=y&&("wps"===n||!b);return Qe().Observable.of(N(v?"wps":"wfs"),T(y),D(!1))})).catch((function(){return Qe().Observable.of(N("wfs"),T(!1),D(!1))})).startWith(D(!0))}))},fr=function(e){return e.ofType(ft.HN).switchMap((function(e){var t;return Qe().Observable.from([(0,_.Xi)("layerdownload"),x("singlePage",!1)].concat(Qt(null!==(t=e.layer.search)&&void 0!==t&&t.url?[(0,dt.rP)(e.layer.url,{featureTypeName:e.layer.name})]:[])))}))},dr=function(e){return e.ofType(f).switchMap((function(e){return(0,ht.ED)(e).map((function(e){return t=function(e){var t=ce()(e,"WFS_Capabilities.OperationsMetadata.Operation"),r=Je()(t,(function(e){return"GetFeature"===e.name})),n=ce()(r,"Parameter"),o=Je()(n,(function(e){return"outputFormat"===e.name})).Value,i=tt()(er,o);return nt()(i).map((function(e){var t,r,n=(r=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],u=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(t,r)||$t(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());return{name:n[0],label:n[1]}}))}(e),{type:d,wfsFormats:t};var t}))}))},mr=function(e,t){return e.ofType(u).switchMap((function(r){var n,o,i,a,l,u,c=t.getState(),s=(c.featuregrid||{}).virtualScroll,p=void 0!==s&&s,f=U(c),d=(0,M.Iz)(c),m=(0,gt.pQ)(c),y=(0,B.Pz)(c),b=r.downloadOptions.propertyName?[(0,Yt.dm)((0,q.qj)(c,d.name))].concat(Qt(r.downloadOptions.propertyName)):null,g=d.layerFilter;return"wps"===f?(o=!(null===(n=d.search)||void 0===n||!n.url),i=r.downloadOptions.cropDataSet&&!!m&&!!m.bounds,a={layerName:d.name,outputFormat:r.downloadOptions.selectedFormat,asynchronous:!0,outputAsReference:!0,targetCRS:r.downloadOptions.selectedSrs&&"native"!==r.downloadOptions.selectedSrs?r.downloadOptions.selectedSrs:void 0,cropToROI:i,dataFilter:r.downloadOptions.downloadFilteredDataSet?{type:"TEXT",data:{mimeType:"text/xml; subtype=filter/1.1",data:(0,qt.mergeFiltersToOGC)({ogcVersion:"1.1.0",addXmlnsToRoot:!0,xmlnsToAdd:['xmlns:ogc="http://www.opengis.net/ogc"','xmlns:gml="http://www.opengis.net/gml"']},d.layerFilter,r.filterObj)}}:void 0,ROI:i?{type:"TEXT",data:{mimeType:"application/json",data:JSON.stringify((0,Wt.bboxToFeatureGeometry)(m.bounds))}}:void 0,roiCRS:i?m.crs||"EPSG:4326":void 0,writeParameters:Ht(Ht(Ht({},r.downloadOptions.tileWidth?{tilewidth:r.downloadOptions.tileWidth}:{}),r.downloadOptions.tileHeight?{tileheight:r.downloadOptions.tileHeight}:{}),r.downloadOptions.compression?Ht({compression:r.downloadOptions.compression},r.downloadOptions.quality?{quality:r.downloadOptions.quality}:{}):{}),notifyDownloadEstimatorSuccess:!0,attribute:b},l={id:st()(),layerName:d.name,layerTitle:d.title,status:"pending"},u={outputsExtractor:(0,Dt.dr)(Dt.RW)},(o&&b?Mt:Gt)(r.url,a,u).takeUntil(e.ofType(w).filter((function(e){return e.id===l.id})).take(1)).flatMap((function(e){var t,r;return"DownloadEstimatorSuccess"===e?Qe().Observable.of((r=Ht(Ht({},l),{},{startTime:(new Date).getTime()}),{type:v,result:r}),L("layerdownload.exportResultsMessages.newExport"),A(),(0,_.Xi)("layerdownload","enabled")):(t=Qe().Observable).of.apply(t,Qt(e&&e.length>0&&e[0].href?[F(l.id,{status:"completed",result:e[0].href}),L("layerdownload.exportResultsMessages.exportSuccess",{layerTitle:(0,Me.in)(d,y)},"success")]:[F(l.id,{status:"failed",result:{msgId:"layerdonwload.exportResultsMessages.invalidHref"}}),L("layerdownload.exportResultsMessages.exportFailure",{layerTitle:(0,Me.in)(d,y)},"danger")]))})).catch((function(e){var t;return(t=Qe().Observable).of.apply(t,Qt(e.message&&e.message.indexOf("DownloadEstimator")>-1?[(0,mt.vU)({error:e,title:"layerdownload.error.downloadEstimatorTitle",message:"layerdownload.error.downloadEstimatorFailed"}),A()]:[F(l.id,{status:"failed",result:cr(e)}),L("layerdownload.exportResultsMessages.exportFailure",{layerTitle:(0,Me.in)(d,y)},"danger")]))}))):ar({url:r.url,downloadOptions:r.downloadOptions,filterObj:r.filterObj,layerFilter:g,options:{pagination:!p&&ce()(r,"downloadOptions.singlePage")?r.filterObj&&r.filterObj.pagination:null,propertyNames:b}}).do((function(e){var t=e.data;if("application/xml"===e.headers["content-type"]){var r=String.fromCharCode.apply(null,new Uint8Array(t));if(0===r.indexOf("<ows:ExceptionReport"))throw r}})).catch((function(){return ar({url:r.url,downloadOptions:r.downloadOptions,filterObj:r.filterObj,layerFilter:g,options:{pagination:!p&&ce()(r,"downloadOptions.singlePage")?r.filterObj&&r.filterObj.pagination:null,sortOptions:(e=ur(t.getState()),e?{sortBy:e,sortOrder:"A"}:{}),propertyNames:r.downloadOptions.propertyName?[].concat(Qt(r.downloadOptions.propertyName),[(0,Yt.dm)((0,q.qj)(c,d.name))]):null}}).do((function(e){var t=e.data,n=e.headers;if("application/xml"===n["content-type"]){var o=String.fromCharCode.apply(null,new Uint8Array(t));if(0===o.indexOf("<ows:ExceptionReport"))throw o}(0,at.saveAs)(new Blob([t],{type:n&&n["content-type"]}),lr(r))}));var e})).do((function(e){var t=e.data,n=e.headers;(0,at.saveAs)(new Blob([t],{type:n&&n["content-type"]}),lr(r))})).map((function(){return A()})).catch((function(e){return Qe().Observable.of((0,mt.vU)({error:e,title:"layerdownload.error.title",message:"layerdownload.error.invalidOutputFormat",autoDismiss:5,position:"tr"}),A())}))}))},yr=function(e,t){return e.ofType(_.kM).filter((function(e){return"queryPanel"===e.control&&!(0,vt._d)(t.getState())&&(0,vt.lI)(t.getState())})).switchMap((function(){return Qe().Observable.of((0,_.Xi)("layerdownload"))}))},br=function(e){return e.ofType(P).concatMap((function(){var e,t,r,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Qe().Observable.of((e=n.msgId,t=n.msgParams,r=n.level,{type:R,msgId:e,msgParams:t,level:r}),k(!0)).delay(10).concat(Qe().Observable.of(k(!1)).delay(n.duration||3e3)).concat(Qe().Observable.empty().delay(1e3))}))},vr=function(e,t){return e.ofType(O).exhaustMap((function(){var e=t.getState(),r=(Z(e)||[]).filter((function(e){return"completed"===e.status}));return r.length>0?Qe().Observable.forkJoin(r.map((function(e){var t=e.result,r=t.indexOf("executionId="),n=t.slice(r),o=n.indexOf("&"),i=(o>-1?n.slice(0,o):n).slice(12),a=t.indexOf("?"),l=t.slice(0,a);return(0,Dt.W5)(l,i).let(Zt.oB).catch((function(){return Qe().Observable.of(null)})).map((function(t){return t?null:e.id}))}))).flatMap((function(e){return Qe().Observable.of((t=e.filter((function(e){return!!e})),{type:h,ids:t}),{type:S},I(!1));var t})).startWith(I(!0)):Qe().Observable.empty()}))},gr=function(e,t){return e.ofType(v,w,g,S).filter((function(){return(0,wt.jl)(t.getState())})).do((function(){var e=t.getState(),r=Z(e),n=(0,wt.np)(e).id,o=JSON.stringify({results:r});document.cookie="exportDataResults_".concat(n,"=").concat(encodeURIComponent(o))})).flatMap((function(){return Qe().Observable.empty()}))},wr=function(e){return e.ofType(bt.ok).switchMap((function(){return e.ofType(yt.Nv).switchMap((function(){return Qe().Observable.of(C([]))})).takeUntil(e.ofType(pt.nk))}))},hr=function(e,t){return e.ofType(bt.ok).switchMap((function(){return sr(t.getState()).concat(e.ofType(yt.XP).switchMap((function(){return sr(t.getState())})).takeUntil(e.ofType(pt.nk)))}))};function Or(e){return Or="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Or(e)}function Er(e){return function(e){if(Array.isArray(e))return Sr(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Sr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Sr(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Sr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Pr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function jr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Pr(Object(r),!0).forEach((function(t){Rr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Rr(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==Or(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Or(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Or(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const Dr=(0,r(322843).rx)("LayerDownload",{component:(0,o.connect)((0,i.zB)({url:q.Bu,filterObj:W,enabled:function(e){var t,r;return null==e||null===(t=e.controls)||void 0===t||null===(r=t.layerdownload)||void 0===r?void 0:r.enabled},downloadOptions:function(e){var t;return null==e||null===(t=e.layerdownload)||void 0===t?void 0:t.downloadOptions},loading:function(e){var t;return null==e||null===(t=e.layerdownload)||void 0===t?void 0:t.loading},wfsFormats:function(e){var t;return null==e||null===(t=e.layerdownload)||void 0===t?void 0:t.wfsFormats},formatsLoading:function(e){var t;return null==e||null===(t=e.layerdownload)||void 0===t?void 0:t.formatsLoading},layer:M.Iz,wpsAvailable:function(e){var t;return null==e||null===(t=e.layerdownload)||void 0===t?void 0:t.wpsAvailable},service:U,checkingWPSAvailability:function(e){var t;return null==e||null===(t=e.layerdownload)||void 0===t?void 0:t.checkingWPSAvailability},virtualScroll:function(e){return e&&e.featuregrid&&e.featuregrid.virtualScroll},customAttributeSettings:G.Xh,attributes:q.L}),{onExport:function(e,t,r){return{type:u,url:e,filterObj:t,downloadOptions:r}},setService:N,onDownloadOptionChange:x,onClearDownloadOptions:function(){return{type:p}},onFormatOptionsFetch:function(e){return{type:f,layer:e}},onCheckWPSAvailability:function(e,t){return{type:a,url:e,selectedService:t}},onClose:function(){return(0,_.Xi)("layerdownload")}})(ke),containers:{TOC:{doNotHide:!0,name:"LayerDownload"},FeatureEditor:{doNotHide:!0,name:"LayerDownload",position:20,target:"toolbar",Component:(0,o.connect)((0,i.zB)({isDownloadOpen:function(e){var t,r;return null==e||null===(t=e.controls)||void 0===t||null===(r=t.layerdownload)||void 0===r?void 0:r.enabled}}),{onClick:function(){return(0,_.Xi)("layerdownload")}})((function(e){var t=e.disabled,r=e.results,n=void 0===r?[]:r,o=e.mode,i=e.isDownloadOpen,a=e.onClick,l=void 0===a?function(){}:a;return Y().createElement(He,{id:"download-grid",keyProp:"download-grid",tooltipId:"featuregrid.toolbar.downloadGridData",disabled:t||0===n.length,active:i,visible:"VIEW"===o,onClick:l,glyph:"download"})}))},MapFooter:{doNotHide:!0,name:"LayerDownload",position:1,tool:(0,o.connect)((0,i.zB)({active:function(e){var t,r;return null==e||null===(t=e.controls)||void 0===t||null===(r=t.exportDataResults)||void 0===r?void 0:r.enabled},showInfoBubble:function(e){var t;return null==e||null===(t=e.layerdownload)||void 0===t?void 0:t.showInfoBubble},infoBubbleMessage:function(e){var t;return null==e||null===(t=e.layerdownload)||void 0===t?void 0:t.infoBubbleMessage},checkingExportDataEntries:function(e){var t;return null==e||null===(t=e.layerdownload)||void 0===t?void 0:t.checkingExportDataEntries},results:Z,currentLocale:B.Pz}),{onToggle:_.Xi.bind(null,"exportDataResults","enabled"),onActive:function(){return{type:O}},onRemoveResult:function(e){return{type:w,id:e}}})((function(e){var t=e.active,r=void 0!==t&&t,n=e.showInfoBubble,o=void 0!==n&&n,i=e.infoBubbleMessage,a=void 0===i?{}:i,l=e.checkingExportDataEntries,u=e.results,c=void 0===u?[]:u,s=e.currentLocale,p=e.onToggle,f=void 0===p?function(){}:p,d=e.onActive,m=void 0===d?function(){}:d,y=e.onRemoveResult;return Y().useEffect((function(){r&&m()}),[r]),Y().createElement(Y().Fragment,null,c.length>0?Y().createElement("div",{id:"mapstore-export-data-results-button-container"},Y().createElement(Ge.Z,{placement:"left",overlay:Y().createElement(J.Tooltip,{id:"mapstore-export-data-results-tooltip"},Y().createElement(ie.Z,{msgId:"exportDataResults.title"}))},Y().createElement(J.Button,{bsStyle:"primary",bsSize:"small",onClick:function(){return f()}},Y().createElement(J.Glyphicon,{glyph:"download"}))),Y().createElement(Xe,{show:o,className:"mapstore-export"},Y().createElement(Ye,a))):null,Y().createElement("div",null,r&&Y().createElement(oe.Z,null,Y().createElement(ne.Z,{id:"mapstore-export-data-results",draggable:!1,modal:!0},Y().createElement("span",{role:"header"},Y().createElement("span",{className:"about-panel-title"},Y().createElement(ie.Z,{msgId:"exportDataResults.title"})),Y().createElement("button",{onClick:function(){return f()},className:"settings-panel-close close"},Y().createElement(J.Glyphicon,{glyph:"1-close"}))),Y().createElement("div",{role:"body"},Y().createElement(Ue,{loading:l,results:c,currentLocale:s,onRemoveResult:y}))))))}))}},epics:n,reducers:{layerdownload:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{downloadOptions:{singlePage:!0}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:return jr(jr({},e),{},{loading:!0});case s:return jr(jr({},e),{},{downloadOptions:jr(jr({},e.downloadOptions),{},Rr({},t.key,t.value))});case p:return jr(jr({},e),{},{downloadOptions:{singlePage:!0}});case f:return jr(jr({},e),{},{layer:t.layer,wfsFormats:[],formatsLoading:!0});case c:return jr(jr({},e),{},{loading:!1});case d:return jr(jr({},e),{},{wfsFormats:t.wfsFormats,formatsLoading:!1});case y:return jr(jr({},e),{},{service:t.service});case m:return jr(jr({},e),{},{wpsAvailable:t.value});case l:return jr(jr({},e),{},{checkingWPSAvailability:t.checking});case b:return jr(jr({},e),{},{results:t.results});case v:return jr(jr({},e),{},{results:[].concat(Er(e.results||[]),[t.result])});case g:var r=K()(e.results||[],{id:t.id});return jr(jr({},e),{},{results:r>-1?[].concat(Er(e.results.slice(0,r)),[jr(jr({},e.results[r]),t.newProps||{})],Er(e.results.slice(r+1))):e.results});case w:return jr(jr({},e),{},{results:(e.results||[]).filter((function(e){return e.id!==t.id}))});case h:return jr(jr({},e),{},{results:(e.results||[]).filter((function(e){return-1===K()(t.ids,(function(t){return t===e.id}))}))});case j:return jr(jr({},e),{},{showInfoBubble:t.show});case R:return jr(jr({},e),{},{infoBubbleMessage:{msgId:t.msgId,msgParams:t.msgParams,level:t.level}});case E:return jr(jr({},e),{},{checkingExportDataEntries:t.checking});default:return e}}}})},731255:(e,t,r)=>{"use strict";r.d(t,{u$:()=>S,Xh:()=>P,_w:()=>j,eO:()=>R,kG:()=>D,P3:()=>x,bq:()=>N,LB:()=>C,b4:()=>F,M0:()=>I,Li:()=>L,Rd:()=>k,g5:()=>_,Sj:()=>G,o:()=>M,eK:()=>q,jY:()=>U,ND:()=>W,OK:()=>Z,tU:()=>B,ou:()=>X,DK:()=>Y,Gl:()=>V,uz:()=>z,Ci:()=>H,Ae:()=>K,gz:()=>Q,He:()=>$,P4:()=>J,kd:()=>ee,TC:()=>te,nq:()=>re,Vf:()=>ne,lg:()=>oe});var n=r(91175),o=r.n(n),i=r(227361),a=r.n(i),l=r(513218),u=r.n(l),c=r(675110),s=r(378889),p=r(308316),f=r(552259),d=r(196958),m=r(285148),y=r(274621),b=r(93152),v=r(824260);function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){O(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function O(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==g(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===g(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var E=c.CA,S=function(e){return a()(e,"featuregrid.selectedLayer")},P=function(e){return a()(e,"featuregrid.attributes")},j=function(e){return e&&e.featuregrid&&e.featuregrid.select},R=function(e){return e&&e.featuregrid&&e.featuregrid.changes},D=function(e){return e&&e.featuregrid&&e.featuregrid.newFeatures},x=function(e){return o()(j(e))},A=function(e){var t=(0,v.Qs)(e);if(t){var r=(0,s.findGeometryProperty)(t);return r&&r.localType}return null},T=["Geometry","GeometryCollection"],N=function(e){return!o()(T.filter((function(t){return A(e)===t})))},C=function(e){return R(e)&&R(e).length>0},F=function(e){return D(e)&&D(e).length>0},I=function(e){return e&&e.featuregrid&&e.featuregrid.filters},L=function(e){return E(e,S(e))},k=function(e){return e&&e.featuregrid&&e.featuregrid.open},_=function(e,t){return a()(I(e),t)},G=function(e){var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.title||e.name}(E(e,S(e)));return u()(t)?t[(0,p.Pz)(e)]||t.default||"":t},M=function(e){return((0,v.L)(e)||[]).map((function(t){var r=function(e,t){return a()(e,"featuregrid.attributes[".concat(t.name||t.attribute,"]"))}(e,t);return r?h(h({},t),r):t}))},q=function(e){return e&&e.featuregrid&&e.featuregrid.mode},U=function(e){return(j(e)||[]).length},W=function(e){return(0,d.rK)(R(e))},Z=function(e){return function(e){var t=x(e);if(t){var r=(0,d.rK)(R(e));return!((!r[t.id]||null===r[t.id].geometry)&&(r[t.id]&&null===r[t.id].geometry||t._new&&o()(D(e))&&null===o()(D(e)).geometry||(!t._new||!o()(D(e))||null===o()(D(e)).geometry)&&null===t.geometry))}return!1}(e)},B=function(e){return a()(e,"featuregrid.showAgain",!1)},X=function(e){if(a()(e,"featuregrid.showTimeSync",!1)){var t=S(e);return(0,m.jo)({id:t},"time")(e)}return null},Y=function(e){return a()(e,"featuregrid.timeSync",!1)},V=function(e){return a()(e,"featuregrid.showPopoverSync",!0)},z=function(e){return e&&e.featuregrid&&e.featuregrid.saving},H=function(e){return e&&e.featuregrid&&e.featuregrid.saved},K=function(e){return e&&e.featuregrid&&e.featuregrid.drawing},Q=function(e){return a()(e,"featuregrid.multiselect",!1)},$=function(e){return(0,f.isSimpleGeomType)(A(e))},J=function(e){return e.featuregrid&&e.featuregrid.dockSize},ee=function(e){var t=E(e,S(e));return t&&t.name||""},te=function(e){var t=function(e){return a()(E(e,S(e)),"params")}(e);return{viewParams:t&&(t.VIEWPARAMS||t.viewParams||t.viewparams),cqlFilter:t&&(t.CQL_FILTER||t.cqlFilter||t.cql_filter)}},re=function(e){var t=(0,y.L3)(e),r=function(e){return a()(e,"featuregrid.editingAllowedRoles",["ADMIN"])}(e)||["ADMIN"],n=function(e){return e&&e.featuregrid&&e.featuregrid.canEdit}(e);return(-1!==r.indexOf(t)||n)&&!(0,b.c0)(e)},ne=function(e){return a()(e,"featuregrid.pagination")},oe=function(e){return a()(e,"featuregrid.useLayerFilter",!0)}},824260:(e,t,r)=>{"use strict";r.d(t,{qj:()=>w,Bu:()=>h,UM:()=>O,X1:()=>E,L:()=>S,HY:()=>P,Mz:()=>j,F0:()=>R,dc:()=>D,b0:()=>x,hk:()=>A,Qs:()=>T,gy:()=>N,M7:()=>C,VD:()=>F});var n=r(414293),o=r.n(n),i=r(227361),a=r.n(i),l=r(91175),u=r.n(l),c=r(701469),s=r.n(c),p=r(630998),f=r.n(p);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==d(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===d(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var v=function(e){return a()(e,"query.filterObj.featureTypeName")},g=function(e){return function(t){return a()(t,'query.featureTypes["'.concat(e,'"]'))}},w=function(e,t){return a()(g(t)(e),"original")},h=function(e){return e&&e.query&&e.query.searchUrl},O=function(e){return e&&e.query&&e.query.url},E=function(e){return e&&e.query&&e.query.filterObj},S=function(e){return a()(g(v(e))(e),"attributes")},P=function(e){return a()(e,"query.typeName")},j=function(e){return a()(e,"query.result.features")},R=function(e){var t=a()(e,"query.result");return y(y({},t),{},{features:(t&&t.features||[]).filter((function(e){return!o()(e.geometry)}))})},D=function(e,t){var r=e&&e.query&&e.query.result&&e.query.result.features;return u()(r.filter((function(e){return e.id===t})))},x={startIndex:function(e){return a()(e,"query.filterObj.pagination.startIndex")},maxFeatures:function(e){return a()(e,"query.filterObj.pagination.maxFeatures")},resultSize:function(e){return a()(e,"query.result.features.length")},totalFeatures:function(e){return a()(e,"query.result.totalFeatures")}},A=function(e,t){var r=g(t)(e);return!!(r&&r.attributes&&r.geometry&&r.original)},T=function(e){return w(e,v(e))},N=function(e){return a()(e,"query.featureLoading")},C=function(e){return a()(e,"query.syncWmsFilter",!1)},F=function(e){var t=a()(e,"query.filterObj.crossLayerFilter"),r=a()(e,"query.filterObj.spatialField"),n=a()(e,"query.filterObj.filterFields");return!!(n&&u()(n)||r&&(r.method&&r.operation&&r.geometry||s()(r)&&f()(r,(function(e){return e.method&&e.operation&&e.geometry}))>-1)||t&&t.collectGeometries&&t.operation)}},945177:(e,t,r)=>{"use strict";var n=r(595318);t.__esModule=!0,t.default=void 0;var o,i=n(r(250139)),a="clearTimeout",l=function(e){var t=(new Date).getTime(),r=Math.max(0,16-(t-c)),n=setTimeout(e,r);return c=t,n},u=function(e,t){return e+(e?t[0].toUpperCase()+t.substr(1):t)+"AnimationFrame"};i.default&&["","webkit","moz","o","ms"].some((function(e){var t=u(e,"request");if(t in window)return a=u(e,"cancel"),l=function(e){return window[t](e)}}));var c=(new Date).getTime();(o=function(e){return l(e)}).cancel=function(e){window[a]&&"function"==typeof window[a]&&window[a](e)};var s=o;t.default=s,e.exports=t.default},178598:function(e,t,r){var n,o=o||function(e){"use strict";if(!(void 0===e||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var t=e.document,r=function(){return e.URL||e.webkitURL||e},n=t.createElementNS("http://www.w3.org/1999/xhtml","a"),o="download"in n,i=/constructor/i.test(e.HTMLElement)||e.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent),l=function(t){(e.setImmediate||e.setTimeout)((function(){throw t}),0)},u=function(e){setTimeout((function(){"string"==typeof e?r().revokeObjectURL(e):e.remove()}),4e4)},c=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e},s=function(t,s,p){p||(t=c(t));var f,d=this,m="application/octet-stream"===t.type,y=function(){!function(e,t,r){for(var n=(t=[].concat(t)).length;n--;){var o=e["on"+t[n]];if("function"==typeof o)try{o.call(e,e)}catch(e){l(e)}}}(d,"writestart progress write writeend".split(" "))};if(d.readyState=d.INIT,o)return f=r().createObjectURL(t),void setTimeout((function(){var e,t;n.href=f,n.download=s,e=n,t=new MouseEvent("click"),e.dispatchEvent(t),y(),u(f),d.readyState=d.DONE}));!function(){if((a||m&&i)&&e.FileReader){var n=new FileReader;return n.onloadend=function(){var t=a?n.result:n.result.replace(/^data:[^;]*;/,"data:attachment/file;");e.open(t,"_blank")||(e.location.href=t),t=void 0,d.readyState=d.DONE,y()},n.readAsDataURL(t),void(d.readyState=d.INIT)}f||(f=r().createObjectURL(t)),m?e.location.href=f:e.open(f,"_blank")||(e.location.href=f),d.readyState=d.DONE,y(),u(f)}()},p=s.prototype;return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,r){return t=t||e.name||"download",r||(e=c(e)),navigator.msSaveOrOpenBlob(e,t)}:(p.abort=function(){},p.readyState=p.INIT=0,p.WRITING=1,p.DONE=2,p.error=p.onwritestart=p.onprogress=p.onwrite=p.onabort=p.onerror=p.onwriteend=null,function(e,t,r){return new s(e,t||e.name||"download",r)})}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);e.exports?e.exports.saveAs=o:null!==r.amdD&&null!==r.amdO&&(void 0===(n=function(){return o}.call(t,r,t,e))||(e.exports=n))},769877:e=>{var t=Math.floor,r=Math.random;e.exports=function(e,n){return e+t(r()*(n-e+1))}},683608:(e,t,r)=>{var n=r(769877),o=r(816612),i=r(418601),a=parseFloat,l=Math.min,u=Math.random;e.exports=function(e,t,r){if(r&&"boolean"!=typeof r&&o(e,t,r)&&(t=r=void 0),void 0===r&&("boolean"==typeof t?(r=t,t=void 0):"boolean"==typeof e&&(r=e,e=void 0)),void 0===e&&void 0===t?(e=0,t=1):(e=i(e),void 0===t?(t=e,e=0):t=i(t)),e>t){var c=e;e=t,t=c}if(r||e%1||t%1){var s=u();return l(e+s*(t-e+a("1e-"+((s+"").length-1))),t)}return n(e,t)}}}]);