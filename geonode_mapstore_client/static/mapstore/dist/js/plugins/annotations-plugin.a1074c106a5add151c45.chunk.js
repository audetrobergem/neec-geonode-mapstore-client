(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[76759],{921914:(e,t,n)=>{"use strict";n.d(t,{XL:()=>o,km:()=>i,Ih:()=>a,Xw:()=>l,Pn:()=>u,DZ:()=>c,e8:()=>s,E0:()=>p,F9:()=>d,X_:()=>f,pb:()=>m,Re:()=>y,ih:()=>v,xy:()=>b,jL:()=>g,oz:()=>h,ph:()=>E,lF:()=>O,gG:()=>S,cb:()=>P,GI:()=>w,B1:()=>j,fv:()=>T,gc:()=>I,zX:()=>C,ZF:()=>A,Zb:()=>k,DW:()=>N,Xp:()=>x,Fm:()=>L,sV:()=>F,LU:()=>D,XP:()=>R,WU:()=>_,mK:()=>M,g:()=>B,ws:()=>Z,HP:()=>G,aN:()=>H,Pg:()=>U,u0:()=>z,TM:()=>Y,PM:()=>q,lK:()=>$,sv:()=>K,MO:()=>X,oO:()=>W,Mc:()=>J,Zw:()=>Q,RA:()=>ee,am:()=>te,ZM:()=>ne,wm:()=>re,Y$:()=>oe,Qu:()=>ie,kT:()=>ae});var r=n(647310),o="LOAD_FEATURE_INFO",i="ERROR_FEATURE_INFO",a="EXCEPTIONS_FEATURE_INFO",l="CHANGE_MAPINFO_STATE",u="NEW_MAPINFO_REQUEST",c="PURGE_MAPINFO_RESULTS",s="CHANGE_MAPINFO_FORMAT",p="SHOW_MAPINFO_MARKER",d="HIDE_MAPINFO_MARKER",f="SHOW_REVERSE_GEOCODE",m="HIDE_REVERSE_GEOCODE",y="NO_QUERYABLE_LAYERS",v="CLEAR_WARNING",b="FEATURE_INFO_CLICK",g="IDENTIFY:UPDATE_FEATURE_INFO_CLICK_POINT",h="IDENTIFY:TOGGLE_HIGHLIGHT_FEATURE",E="TOGGLE_MAPINFO_STATE",O="UPDATE_CENTER_TO_MARKER",S="IDENTIFY:CHANGE_PAGE",P="IDENTIFY:CLOSE_IDENTIFY",w="IDENTIFY:CHANGE_FORMAT",j="IDENTIFY:TOGGLE_SHOW_COORD_EDITOR",T="IDENTIFY:EDIT_LAYER_FEATURES",I="IDENTIFY:CURRENT_EDIT_FEATURE_QUERY",C="IDENTIFY:SET_MAP_TRIGGER",A="IDENTIFY:TOGGLE_EMPTY_MESSAGE_GFI",k="IDENTIFY:SET_SHOW_IN_MAP_POPUP",N="IDENTIFY:IDENTIFY_IS_MOUNTED",x="IDENTIFY:INIT_PLUGIN";function L(e,t,n,r,i){return{type:o,data:t,reqId:e,requestParams:n,layerMetadata:r,layer:i}}function F(e,t,n,r){return{type:i,error:t,reqId:e,requestParams:n,layerMetadata:r}}function D(){return{type:y}}function R(){return{type:v}}function _(e,t){return{type:u,reqId:e,request:t}}function M(e){return{type:l,enabled:e}}function B(){return{type:c}}function Z(e){return{type:s,infoFormat:e}}function G(){return{type:p}}function H(){return{type:d}}function V(e){return{type:f,reverseGeocodeData:e.data}}function U(e){return function(t){r.Z.reverseGeocode(e).then((function(e){t(V(e))})).catch((function(e){t(V(e))}))}}function z(){return{type:m}}function Y(){return{type:E}}function q(e){return{type:O,status:e}}function $(e,t){return{type:b,point:e,layer:t,filterNameList:arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],overrideParams:arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},itemId:arguments.length>4&&void 0!==arguments[4]?arguments[4]:null}}function K(e){return{type:g,point:e}}function X(e){return{type:h,enabled:e}}function W(e){return{type:S,index:e}}var J=function(){return{type:P}},Q=function(e){return{type:w,format:e}},ee=function(e){return{type:j,showCoordinateEditor:e}},te=function(e){return{type:T,layer:e}},ne=function(e){return{type:I,query:e}},re=function(e){return{type:C,trigger:e}},oe=function(e){return{type:k,value:e}},ie=function(e){return{type:N,isMounted:e}},ae=function(e){return{type:x,cfg:e}}},710615:(e,t,n)=>{"use strict";n.d(t,{Z:()=>x});var r=n(124852),o=n.n(r),i=n(45697),a=n.n(i),l=n(480681),u=n(807654),c=n.n(u),s=n(414293),p=n.n(s),d=n(743129),f=n(993451),m=n(80717),y=n(145869),v=n(680833),b=n(805346),g=n(552259),h=["labelId"];function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||S(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){if(e){if("string"==typeof e)return P(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?P(e,t):void 0}}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){T(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function T(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=E(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=E(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==E(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var I=(0,f.Z)(["placeholder","noResultsText"])(d.ZP.Creatable),C=(0,f.Z)(["placeholder","noResultsText"])(d.ZP);function A(e){var t,n=e.label,r=e.showArrow,i=e.limitsType;return o().createElement("span",null,(t=n,"scale"===i?"1 : "+Math.round(t):t),r&&o().createElement(o().Fragment,null," ",o().createElement(l.gG,{glyph:"arrow-left"})))}function k(e){var t=e.id,n=e.value,r=e.placeholderId,i=e.noResultsTextId,a=e.createTextId,l=e.options,u=e.isValidNewOption,s=void 0===u?function(){return!0}:u,p=e.onChange,d=void 0===p?function(){}:p,f=e.disabled,m=e.loading;return o().createElement(I,{inputProps:{id:t},placeholder:r,noResultsText:i,value:n,isLoading:m,options:l,disabled:f,optionRenderer:A,valueRenderer:A,promptTextCreator:function(e){return o().createElement(b.Z,{msgId:a,msgParams:{label:e}})},isValidNewOption:function(e){if(e.label){var t=parseFloat(e.label);return!c()(t)&&s(t)}return!1},onChange:function(e){var t=(null==e?void 0:e.value)&&parseFloat(e.value);d(c()(t)?void 0:j(j({},e),{},{value:t}))}})}function N(e){var t=e.title,n=e.layer,i=e.zoom,a=e.projection,u=e.resolutions,c=void 0===u?(0,g.MR)():u,s=e.defaultLimitsType,d=e.limitsTypesOptions,f=e.dpi,E=e.onChange,w=Math.round(i||0),T=O((0,r.useState)(s||d[0].value),2),I=T[0],A=T[1],N=n.maxResolution,x=n.minResolution,L=n.disableResolutionLimits,F=(0,g.Vj)(f,a);function D(e,t){var n,r=e.map((function(e){return e[I]}));return p()(t[I])||-1!==r.indexOf(t[I])?e:[t].concat((n=e,function(e){if(Array.isArray(e))return P(e)}(n)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||S(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())).sort((function(e,t){return e[I]>t[I]?-1:1}))}function R(e,t){return(0,g.ed)(e,t,{projection:a,resolutions:c})}var _=O((0,r.useState)([]),2),M=_[0],B=_[1],Z=O((0,r.useState)(N&&{resolution:N,scale:N*F,zoom:(0,g.Pl)(N,c)}),2),G=Z[0],H=Z[1],V=O((0,r.useState)(x&&{resolution:x,scale:x*F,zoom:(0,g.Pl)(x,c)}),2),U=V[0],z=V[1],Y=O((0,r.useState)(!1),2),q=Y[0],$=Y[1],K=O((0,r.useState)(),2),X=K[0],W=K[1],J=O((0,r.useState)(),2),Q=J[0],ee=J[1],te=(0,r.useRef)();function ne(){ee(void 0),W(void 0)}(0,r.useEffect)((function(){return te.current=!0,function(){te.current=!1}}),[]);var re=c.join(",");return(0,r.useEffect)((function(){var e=x&&{resolution:x,scale:x*F,zoom:(0,g.Pl)(x,c)},t=N&&{resolution:N,scale:N*F,zoom:(0,g.Pl)(N,c)},n=[e,t].filter((function(e){return e})).reduce(D,c.map((function(e,t){return{resolution:e,scale:e*F,zoom:t}})));H(t),z(e),B(n),ne()}),[F,re]),o().createElement("div",{className:"ms-visibility-limits-form"},o().createElement("div",{className:"ms-visibility-limits-form-title",style:{display:"flex",alignItems:"center"}},o().createElement("div",{style:{flex:1}},t),o().createElement(m.Z,{btnDefaultProps:{className:"square-button-md no-border"},buttons:[{glyph:"refresh",disabled:!(!L&&!q),visible:"wms"===n.type,onClick:function(){"wms"!==n.type||q||($(!0),ne(),(0,v.kB)(n).toPromise().then((function(e){if(te.current){var t,n,r=e.MaxScaleDenominator,o=e.MinScaleDenominator,i=!p()(r)&&R(r,"scale"),a=!p()(o)&&R(o,"scale");(function(e,t){var n,r,o=(n=e,r=t,p()(n)&&p()(r)?"layerProperties.visibilityLimits.serverValuesUpdateUndefined":p()(n)&&!p()(r)?"layerProperties.visibilityLimits.serverValuesUpdateMinScale":!p()(n)&&p()(r)?"layerProperties.visibilityLimits.serverValuesUpdateMaxScale":"layerProperties.visibilityLimits.serverValuesUpdate");W(o)})(r,o),a&&z(a),i&&H(i),E(j(j({},i&&{maxResolution:i.resolution}),a&&{minResolution:a.resolution}));var l=(null===(t=a||U)||void 0===t?void 0:t.resolution)||-1/0;((null===(n=i||G)||void 0===n?void 0:n.resolution)||1/0)<l&&ee("layerProperties.visibilityLimits.rangeError"),$(!1)}})).catch((function(){te.current&&($(!1),ee("layerProperties.visibilityLimits.serverValuesError"))})))},tooltipId:"layerProperties.visibilityLimits.updateWMSCapabilities"},{Element:function(){return o().createElement(y.Z,{checked:!L,onClick:function(){E({disableResolutionLimits:!L}),ne()}})}}]})),o().createElement("label",{htmlFor:"ms-visibility-limits-max"},o().createElement(b.Z,{msgId:"layerProperties.visibilityLimits.maxValue"})),o().createElement(k,{id:"ms-visibility-limits-max",value:(null==G?void 0:G[I])&&{value:G[I],label:G[I],zoom:G.zoom,limitsType:I},placeholderId:"layerProperties.visibilityLimits.maxValuePlaceholder",noResultsTextId:"layerProperties.visibilityLimits.valueNoResultsText",createTextId:"layerProperties.visibilityLimits.createOption",loading:q,isValidNewOption:function(e){return e>=((null==U?void 0:U[I])||0)},options:M.map((function(e){return j(j({},e),{},{value:e[I]+(e.delta||0),label:e[I],showArrow:e.zoom===w,disabled:!p()(null==U?void 0:U[I])&&e[I]<=U[I],limitsType:I})})),disabled:L||q,onChange:function(e){var t=void 0===e.value?{}:p()(e.zoom)?R(e.value,I):{resolution:e.resolution,scale:e.scale,zoom:e.zoom};if(E({maxResolution:t.resolution}),H(t),void 0!==e.value&&p()(e.zoom)){var n=D(M,t);B(n)}ne()}}),o().createElement("label",{htmlFor:"ms-visibility-limits-min"},o().createElement(b.Z,{msgId:"layerProperties.visibilityLimits.minValue"})),o().createElement(k,{id:"ms-visibility-limits-min",value:(null==U?void 0:U[I])&&{value:U[I],label:U[I],zoom:U.zoom,limitsType:I},placeholderId:"layerProperties.visibilityLimits.minValuePlaceholder",noResultsTextId:"layerProperties.visibilityLimits.valueNoResultsText",createTextId:"layerProperties.visibilityLimits.createOption",loading:q,isValidNewOption:function(e){return e<=((null==G?void 0:G[I])||1/0)},options:M.map((function(e){return j(j({},e),{},{value:e[I],label:e[I],showArrow:e.zoom===w,disabled:!p()(null==G?void 0:G[I])&&e[I]>=G[I],limitsType:I})})),disabled:L||q,onChange:function(e){var t=void 0===e.value?{}:p()(e.zoom)?R(e.value,I):{resolution:e.resolution,scale:e.scale,zoom:e.zoom};if(E({minResolution:t.resolution}),z(t),void 0!==e.value&&p()(e.zoom)){var n=D(M,t);B(n)}ne()}}),o().createElement("label",{htmlFor:"ms-visibility-limits-type"},o().createElement(b.Z,{msgId:"layerProperties.visibilityLimits.type"})),o().createElement(C,{inputProps:{id:"ms-visibility-limits-type"},value:I,clearable:!1,options:d.map((function(e){var t=e.labelId;return j(j({},function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,h)),t&&{label:o().createElement(b.Z,{msgId:t})})})),disabled:L||q,onChange:function(e){var t=e.value;A(t),ne()}}),X&&o().createElement(l.bZ,{bsStyle:"success"},o().createElement(b.Z,{msgId:X})),Q&&o().createElement(l.bZ,{bsStyle:"danger"},o().createElement(b.Z,{msgId:Q})))}N.propTypes={layer:a().object,zoom:a().number,onChange:a().func,resolutions:a().array,limitsTypesOptions:a().array,projection:a().string,dpi:a().number,defaultLimitsType:a().string},N.defaultProps={layer:{},onChange:function(){},limitsTypesOptions:[{value:"scale",labelId:"layerProperties.visibilityLimits.scale"},{value:"resolution",labelId:"layerProperties.visibilityLimits.resolution"}],dpi:g.$v};const x=N},260024:(e,t,n)=>{"use strict";n.d(t,{Z:()=>K});var r=n(124852),o=n.n(r),i=n(45697),a=n.n(i),l=n(480681),u=n(743129),c=n(815135),s=n(91175),p=n.n(s),d=n(807654),f=n.n(d),m=n(227361),y=n.n(m),v=n(441609),b=n.n(v),g=n(86638),h=n(80717),E=n(245567),O=n(805346),S=n(900012),P=n(438261),w=n(281763),j=n.n(w),T=n(808797),I=n(916651),C=n(794192),A=n(867076),k=function(e,t,n){return j()(parseFloat(e))&&!isNaN(parseFloat(e))?(0,T.Ov)(parseFloat(e),t,n):e},N=function(e,t,n){return j()(parseFloat(e))&&!isNaN(parseFloat(e))?parseFloat((0,T.Ov)(e,n,t).toFixed(4)):e};const x=(0,A.compose)((0,A.defaultProps)({valueUom:"m",displayUom:"m",units:[{value:"degrees",label:"deg",originUom:"degrees"},{value:"ft",label:"ft",originUom:"m"},{value:"m",label:"m",originUom:"m"},{value:"km",label:"km",originUom:"m"},{value:"mi",label:"mi",originUom:"m"},{value:"nm",label:"nm",originUom:"m"}]}),(0,A.withStateHandlers)((function(e){var t=e.displayUom;return{uom:void 0===t?"nm":t}}),{setUom:function(){return function(e){return{uom:e}}}}),(0,A.withState)("localValue","setLocalValue"),(0,A.withPropsOnChange)(["value","localValue","uom","valueUom"],(function(e){var t=e.value,n=e.localValue,r=e.uom,o=e.valueUom;return{value:t===k(n,r,o)?n:N(t,r,o)}})),(0,A.withHandlers)({onChange:function(e){var t=e.uom,n=e.projection,r=e.valueUom,o=e.onChange,i=void 0===o?function(){}:o,a=e.setLocalValue,l=void 0===a?function(){}:a;return function(e){l(e),i(k(e,t,r),n)}}}))((function(e){var t=e.value,n=e.units,r=void 0===n?[]:n,i=e.uom,a=e.projection,u=void 0===a?"EPSG:3857":a,c=e.style,s=void 0===c?{display:"inline-flex",width:"100%"}:c,p=e.setUom,d=void 0===p?function(){}:p,f=e.onChange,m=void 0===f?function(){}:f,y=(0,I.getUnits)(u);return o().createElement(l.cw,{style:s},o().createElement(C.Z,{value:t,placeholder:"radius",name:"radius",onChange:function(e){return m(e,i)},step:1,type:"number"}),o().createElement(l.NI,{componentClass:"select",placeholder:"select",value:i,onChange:function(e){return d(e.target.value)},style:{width:85}},r.filter((function(e){var t=e.originUom;return y===t})).map((function(e){return o().createElement("option",{key:e.value,value:e.value},e.label)}))))}));function L(e){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L(e)}function F(e){return function(e){if(Array.isArray(e))return D(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return D(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?D(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function R(){return R=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},R.apply(null,arguments)}function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){U(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,z(r.key),r)}}function Z(e,t,n){return t=H(t),function(e,t){if(t&&("object"==L(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,G()?Reflect.construct(t,n||[],H(e).constructor):t.apply(e,n))}function G(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(G=function(){return!!e})()}function H(e){return H=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},H(e)}function V(e,t){return V=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},V(e,t)}function U(e,t,n){return(t=z(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function z(e){var t=function(e,t){if("object"!=L(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=L(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==L(t)?t:t+""}var Y=(0,c.Z)(l.gG),q=(0,c.Z)(l.PS),$=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return U(e=Z(this,t,[].concat(r)),"getValidationStateRadius",(function(e){var t=parseFloat(e);return f()(t)?"error":null})),U(e,"renderLabelTexts",(function(t,n){var r=n.textLabels,o=n.featurePropValue;return"Polygon"===e.props.type?!b()(r)&&r[t].text:0!==t?b()(r)?!b()(o)&&o[0].formattedValue:r[t-1].text:null})),U(e,"validateCoordinates",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.props.components,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2?arguments[2]:void 0;if(t&&t.length){var o=t.filter(S.Tl);return n?o.length>e.props.componentsValidation[e.props.type].min||o.length>=e.props.componentsValidation[e.props.type].min&&!(0,S.Tl)(t[r]):o.length>=e.props.componentsValidation[e.props.type].min}return!1})),U(e,"validateCircle",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.props.components,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.props.properties.radius;if(t&&t.length){var r=p()(t);return!f()(parseFloat(n))&&(0,S.Tl)(r)}return!1})),U(e,"validateText",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.props.components,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.props.properties.valueText;if(t&&t.length){var r=p()(t);return!!n&&(0,S.Tl)(r)}return!1})),U(e,"isValid",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.props.components,n=arguments.length>1?arguments[1]:void 0;return e[e.props.componentsValidation[e.props.type].validation](t,!1,n)})),U(e,"addCoordPolygon",(function(t){if("Polygon"===e.props.type){var n,r,o,i=t.filter(S.Tl),a=(null===(n=e.props.features[e.props.currentFeature])||void 0===n||null===(r=n.geometry)||void 0===r||null===(o=r.coordinates)||void 0===o?void 0:o[0])||[],l=void 0!==a?a.findIndex((function(e){return!(0,S.Tl)(M({lon:e[0],lat:e[1]},void 0!==e[2]&&{height:e[2]}))})):-1;return t.concat([i.length&&0!==l?i[0]:{lat:"",lon:""}])}return t})),U(e,"change",(function(t,n){var r=e.props.components,o=f()(parseFloat(n.lat))?"":parseFloat(n.lat),i=f()(parseFloat(n.lon))?"":parseFloat(n.lon),a=void 0!==n.height?f()(parseFloat(n.height))?"":parseFloat(n.height):void 0;r[t]=M({lat:o,lon:i},void 0!==a&&{height:a});var l=e.addCoordPolygon(r);e.props.onChange(l,e.props.properties.radius,e.props.properties.valueText,e.props.mapProjection),e.isValid(r)?(e.props.isMouseEnterEnabled||"LineString"===e.props.type||"Polygon"===e.props.type)&&e.props.onHighlightPoint(r[t]):((e.props.isMouseLeaveEnabled||"LineString"===e.props.type||"Polygon"===e.props.type)&&e.props.onHighlightPoint(null),e.props.onSetInvalidSelected("coords",r.map(S.bh)))})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&V(e,t)}(t,e),n=t,r=[{key:"renderCircle",value:function(){var e=this;return o().createElement("div",{className:"ms-coordinates-editor-radius",style:{flex:1,overflowY:"auto",padding:"0 10px"}},o().createElement("div",null,o().createElement(l.cw,{validationState:this.getValidationStateRadius(this.props.properties.radius)},o().createElement(l.J$,null,o().createElement(O.Z,{msgId:"annotations.editor.radius"})),o().createElement(x,R({placeholder:"radius"},this.props.measureOptions,{value:this.props.properties.radius,projection:this.props.mapProjection,name:"radius",onChange:function(t,n){e.props.onValidateFeature(),e.isValid(e.props.components,t)?e.props.onChangeRadius(parseFloat(t),e.props.components.map(S.bh),n):""!==t?e.props.onChangeRadius(parseFloat(t),[[0,0]],n):(e.props.onChangeRadius(null,e.props.components.map(S.bh),n),e.props.onSetInvalidSelected("radius",e.props.components.map(S.bh)))},step:1,type:"number"})))))}},{key:"render",value:function(){var e=this,t=this.props.features[this.props.currentFeature||0],n=y()(t,"geometry.textLabels",[]),r=y()(t,"properties.values",[]),i=this.props,a=i.componentsValidation,c=i.type,s=F(this.props.components),d=s.filter(S.Tl).length===s.length,f=this[a[c].validation]()&&d,m=[{value:"decimal",text:o().createElement(O.Z,{msgId:"annotations.editor.decimal"})},{value:"aeronautical",text:o().createElement(O.Z,{msgId:"annotations.editor.aeronautical"})}],v=[{glyph:f?"ok-sign text-success":"exclamation-mark text-danger",tooltipId:f?"annotations.editor.valid":a[c].notValid,visible:!0,onClick:function(){}},{Element:function(){return o().createElement(q,{noCaret:!0,title:o().createElement(Y,{glyph:"cog"}),pullRight:!0,className:"square-button-md no-border",tooltip:"Format"},m.map((function(t){var n=t.text,r=t.value;return o().createElement(l.sN,{active:e.props.format===r,key:r,onClick:function(){return e.props.onChangeFormat(r)}},n)})))}},{glyph:"plus",tooltipId:"annotations.editor.add",disabled:"Bearing"!==c&&this.props.properties.disabled,visible:!a[c].add||!a[c].max||this.props.components.length!==a[c].max,onClick:function(){var t=F(e.props.components);t=t.concat([{lat:"",lon:""}]),e.props.onChange(t,e.props.properties.radius,e.props.properties.valueText,e.props.mapProjection)}}];return o().createElement("div",{className:"coordinates-editor",style:this.props.style},o().createElement("div",{className:"measure-feature-selector"},o().createElement("div",null,this.props.showFeatureSelector?o().createElement(u.ZP,{value:this.props.currentFeature,disabled:this.props.properties.disabled,options:[].concat(F(this.props.features.map((function(t,n){var r=y()(t,"properties.values",[]),o="bearing"===(r[0]||{}).type?"Bearing":t.geometry.type;if(o!==e.props.type)return null;var i="LineString"===o?"Length":"Bearing"===o?"Bearing":"Area",a=r.length>0?"".concat(i," ").concat(r[0].formattedValue):"",l=r.length>1&&"Polygon"===o?", Perimeter: ".concat(r[1].formattedValue):"";return{label:"".concat(o," (").concat(a).concat(l,")"),value:n}}))),[{label:(0,g.S$)(this.context.messages,"annotations.editor.newFeature"),value:this.props.features.length}]).filter((function(e){return!!e})),onChange:function(t){return e.props.onChangeCurrentFeature(null==t?void 0:t.value)}}):null),o().createElement("div",null,o().createElement(h.Z,{btnGroupProps:{className:"pull-right"},btnDefaultProps:{className:"square-button-md no-border"},buttons:v}))),"Circle"===this.props.type&&this.renderCircle(),"Circle"===this.props.type&&o().createElement("div",{style:{flex:1,overflowY:"auto",paddingLeft:10,marginTop:10}},o().createElement("div",null,o().createElement(l.J$,null,o().createElement(O.Z,{msgId:"annotations.editor.center"})))),o().createElement("div",{className:"coordinates-row-container coordinates-row-type-".concat(c)},this.props.components.map((function(t,i){return o().createElement(o().Fragment,null,e.props.showLengthAndBearingLabel&&o().createElement("div",{className:"label-texts"},o().createElement("span",null,e.renderLabelTexts(i,{textLabels:n,featurePropValue:r}))),o().createElement(P.Z,{format:e.props.format,aeronauticalOptions:e.props.aeronauticalOptions,sortId:i,key:i+" key",enableHeightField:e.props.enableHeightField,disabled:e.props.properties.disabled&&(0,S.Tl)(t),renderer:e.props.renderer,isDraggable:e.props.isDraggable,isDraggableEnabled:e.props.isDraggable&&e[a[c].validation]()&&!e.props.properties.disabled,showDraggable:e.props.isDraggable&&!("Point"===e.props.type||"Text"===e.props.type||"Circle"===e.props.type),formatVisible:!1,removeVisible:a[c].remove,removeEnabled:e[a[c].validation](e.props.components,a[c].remove,i),onSubmit:e.change,onMouseEnter:function(t){(e.props.isMouseEnterEnabled||"LineString"===e.props.type||"Polygon"===e.props.type||"MultiPoint"===e.props.type)&&e.props.onHighlightPoint(t)},onMouseLeave:function(){(e.props.isMouseLeaveEnabled||"LineString"===e.props.type||"Polygon"===e.props.type||"MultiPoint"===e.props.type)&&e.props.onHighlightPoint(null)},onSort:function(t,n){var r=e.props.components.reduce((function(r,o,i){return t===i?[].concat(F(r),t>n?[M({},o),p()(e.props.components.filter((function(e,t){return t===n})))]:[p()(e.props.components.filter((function(e,t){return t===n}))),M({},o)]):n===i?F(r):[].concat(F(r),[M({},o)])}),[]).filter((function(e){return e}));e.isValid(r)?e.props.onChange(r):e.props.properties.isValidFeature&&e.props.onSetInvalidSelected("coords",e.props.components.map(S.bh))},idx:i,component:t,onRemove:function(){var t=e.props.components.filter((function(e,t){return t!==i}));e.isValid(t)?(e.props.isMouseEnterEnabled||"LineString"===e.props.type&&i!==t.length||"Polygon"===e.props.type?e.props.onHighlightPoint(t[i]):e.props.onHighlightPoint(null),e.props.onChange(t)):e.props.properties.isValidFeature&&e.props.onSetInvalidSelected("coords",e.props.components.map(S.bh))},onValidateFeature:e.props.onValidateFeature}))}))),(!this.props.components||0===this.props.components.length)&&o().createElement("div",{className:"text-center",style:{padding:15,paddingBottom:30}},o().createElement("i",null,o().createElement(O.Z,{msgId:"annotations.editor.addByClick"}))))}}],r&&B(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(o().Component);U($,"propTypes",{components:a().array,measureOptions:a().object,onSetInvalidSelected:a().func,onChange:a().func,onChangeRadius:a().func,onHighlightPoint:a().func,onChangeText:a().func,onChangeFormat:a().func,onChangeCurrentFeature:a().func,format:a().string,aeronauticalOptions:a().object,componentsValidation:a().object,transitionProps:a().object,properties:a().object,mapProjection:a().string,features:a().array,currentFeature:a().number,showFeatureSelector:a().bool,type:a().string,isDraggable:a().bool,isMouseEnterEnabled:a().bool,isMouseLeaveEnabled:a().bool,showLengthAndBearingLabel:a().bool,renderer:a().string,style:a().object,onValidateFeature:a().func,enableHeightField:a().bool}),U($,"contextTypes",{messages:a().object}),U($,"defaultProps",{components:[],measureOptions:{},onChange:function(){},onChangeRadius:function(){},onHighlightPoint:function(){},onChangeFormat:function(){},onChangeText:function(){},onChangeCurrentFeature:function(){},onSetInvalidSelected:function(){},onValidateFeature:function(){},componentsValidation:{Bearing:{min:2,max:2,add:!0,remove:!0,validation:"validateCoordinates",notValid:"annotations.editor.notValidPolyline"},Polygon:{min:3,add:!0,remove:!0,validation:"validateCoordinates",notValid:"annotations.editor.notValidPolyline"},LineString:{min:2,add:!0,remove:!0,validation:"validateCoordinates",notValid:"annotations.editor.notValidPolyline"},MultiPoint:{min:2,add:!0,remove:!0,validation:"validateCoordinates",notValid:"annotations.editor.notValidPolyline"},Point:{min:1,max:1,add:!0,remove:!1,validation:"validateCoordinates",notValid:"annotations.editor.notValidMarker"},Circle:{min:1,max:1,add:!0,remove:!1,validation:"validateCircle",notValid:"annotations.editor.notValidCircle"},Text:{min:1,max:1,add:!0,remove:!1,validation:"validateText",notValid:"annotations.editor.notValidText"}},transitionProps:{transitionName:"switch-panel-transition",transitionEnterTimeout:300,transitionLeaveTimeout:300},features:[],isDraggable:!0,isMouseEnterEnabled:!1,isMouseLeaveEnabled:!1,properties:{},type:"Point",style:{display:"flex",flexDirection:"column",flex:1},enableHeightField:!1});const K=(0,E.Z)($)},779195:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var r=n(124852),o=n.n(r),i=(n(707169),n(967134)),a=n(74998),l=n.n(a),u=n(192579),c=["wrapperClassName","toolbarOptions"];function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s.apply(null,arguments)}const p=function(e){var t=e.wrapperClassName,n=void 0===t?"ms-compact-text-editor":t,r=e.toolbarOptions,a=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,c);return o().createElement(i.Editor,s({},a,{editorStyle:{minHeight:200},wrapperClassName:n,toolbar:{options:r||["fontFamily","blockType","inline","textAlign","list","link","colorPicker","remove","image","embedded"],image:{urlEnabled:!0,uploadEnabled:a.uploadEnabled||!1,alignmentEnabled:!1,uploadCallback:function(e){return new Promise((function(t,n){var r=new FileReader;r.addEventListener("load",(function(){var e,n;(e=r.result,n={size:500,type:"image/jpeg",quality:.8},new Promise((function(t,r){var o=n||{},i=o.size,a=o.type,l=void 0===a?"image/png":a,u=o.quality,c=void 0===u?.9:u,s=new Image;s.crossOrigin="anonymous",s.onload=function(){var e=s.naturalWidth,n=s.naturalHeight,r=i,o=i/(e/n),a=document.createElement("canvas");a.setAttribute("width",r),a.setAttribute("height",o),a.getContext("2d").drawImage(s,0,0,r,o);var u=a.toDataURL(l,c);t(u)},s.onerror=function(e){r(e)},s.src=e}))).then((function(e){t({data:{link:e}})}))})),e?r.readAsDataURL(e):n()}))},previewImage:!0,inputAccept:"image/gif,image/jpeg,image/jpg,image/png,image/svg",alt:a.alt||{present:!1,mandatory:!1},defaultSize:{height:"auto",width:"100%"}},fontFamily:{options:a.fonts||u.Km},link:{inDropdown:!1,showOpenOptionOnHover:!0,defaultTargetOption:"_self",options:["link","unlink"]},blockType:{inDropdown:!0,options:["Normal","H1","H2","H3","H4","H5","H6","Blockquote","Code"]},inline:{inDropdown:!0,options:["bold","italic","underline","strikethrough","monospace"]},textAlign:{inDropdown:!0},list:{inDropdown:!0},embedded:{embedCallback:function(e){var t=/<iframe.*? src="(.*?)"/.exec(l()(e));return t&&t[1]||e},defaultSize:{height:"auto",width:"100%"}}}}))}},501262:(e,t,n)=>{"use strict";n.d(t,{Z:()=>w});var r=n(727418),o=n.n(r),i=n(45697),a=n.n(i),l=n(124852),u=n.n(l),c=n(180307),s=n.n(c),p=n(480681),d=n(38560),f=n(805346),m=n(807472);function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,S(r.key),r)}}function b(e,t,n){return t=h(t),function(e,t){if(t&&("object"==y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,g()?Reflect.construct(t,n||[],h(e).constructor):t.apply(e,n))}function g(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(g=function(){return!!e})()}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function E(e,t){return E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},E(e,t)}function O(e,t,n){return(t=S(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function S(e){var t=function(e,t){if("object"!=y(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==y(t)?t:t+""}var P=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return O(e=b(this,t,[].concat(r)),"setConfirmRef",(function(t){return e.confirm=t,e.confirm})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.props.focusConfirm&&s().findDOMNode(this.confirm).focus()}},{key:"render",value:function(){return u().createElement(m.Z,{draggable:this.props.draggable,onClickOut:this.props.onClose,id:"confirm-dialog",modal:this.props.modal,style:o()({},this.props.style,{display:this.props.show?"block":"none"})},u().createElement("span",{role:"header"},u().createElement("span",{className:"user-panel-title"},this.props.title),u().createElement("button",{onClick:this.props.onClose,className:"login-panel-close close"},this.props.closeGlyph?u().createElement(p.gG,{glyph:this.props.closeGlyph}):u().createElement("span",null,"×"))),u().createElement("div",{role:"body"},this.props.children),u().createElement("div",{role:"footer"},u().createElement(p.hE,null,u().createElement(d.Z,{ref:this.setConfirmRef,onClick:this.props.onConfirm,disabled:this.props.confirmButtonDisabled,bsStyle:this.props.confirmButtonBSStyle},this.props.confirmButtonContent),u().createElement(d.Z,{onClick:this.props.onClose},this.props.closeText))))}}])&&v(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(u().Component);O(P,"propTypes",{show:a().bool,draggable:a().bool,onClose:a().func,onConfirm:a().func,onSave:a().func,modal:a().bool,closeGlyph:a().string,style:a().object,buttonSize:a().string,inputStyle:a().object,title:a().node,confirmButtonContent:a().node,confirmButtonDisabled:a().bool,closeText:a().node,confirmButtonBSStyle:a().string,focusConfirm:a().bool}),O(P,"defaultProps",{onClose:function(){},onChange:function(){},modal:!0,title:u().createElement(f.Z,{msgId:"confirmTitle"}),closeGlyph:"",confirmButtonBSStyle:"danger",confirmButtonDisabled:!1,confirmButtonContent:u().createElement(f.Z,{msgId:"confirm"})||"Confirm",closeText:u().createElement(f.Z,{msgId:"close"}),includeCloseButton:!0,focusConfirm:!1});const w=P},245567:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var r=n(124852),o=n.n(r),i=n(867076);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}var l=["onSort","isDraggable","items","containerId"];function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u.apply(null,arguments)}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==a(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const d=(0,i.compose)((0,i.branch)((function(e){var t=e.isDraggable;return void 0===t||t}),(function(e){return function(t){var n=t.onSort,r=t.isDraggable,i=t.items,a=void 0===i?[]:i,c=t.containerId,p=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(t,l),d=a.map((function(e,t){return s(s({},e),{},{onSort:n,isDraggable:r,sortId:t,key:e.id||t,containerId:c})}));return o().createElement(e,u({},s(s({},p),{},{isDraggable:r}),{items:d}))}})))},943457:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>kt});var r=n(322843),o=n(49977),i=n.n(o),a=n(423570),l=n.n(a),u=n(178598),c=n(782904),s=n(580416),p=n(197395),d=n(921914),f=n(14281),m=n(900012),y=n(902054),v=n(800827),b=n(675110);function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){O(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function O(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=g(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=g(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==g(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function S(e){return function(e){if(Array.isArray(e))return P(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return P(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?P(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const w={loadAnnotationsEpic:function(e,t){var n=t.getState;return e.ofType(f.Bm).switchMap((function(e){var t,r=e.features,o=e.override,a=(0,y.Yu)(n());if(!o){var l,u=a.map((function(e){return e.id}));return(l=i().Observable).of.apply(l,S(r.map((function(e){return u.includes(e.id)?(0,s.tV)(e.id,"layer",{title:e.title,description:e.description,style:e.style,features:e.features}):(0,s.A4)(e)}))))}return(t=i().Observable).of.apply(t,S(a.map((function(e){return(0,s.$o)(e.id)}))).concat(S(r.map((function(e){return(0,s.A4)(e)})))))}))},newAnnotationEpic:function(e){return e.ofType(f.CD).switchMap((function(){var e={id:(0,m.t1)(l()()),title:"New annotations",type:"vector",features:[],style:{},visibility:!0,rowViewer:m.jB};return i().Observable.of((0,d.aN)(),(0,s.A4)(e),(0,s.UG)(e.id,"layer"),(0,c.Xg)(m.jB,"enabled",!0))}))},editAnnotationEpic:function(e,t){var n=t.getState;return e.ofType(f.A1).switchMap((function(e){var t,r=(0,b.Iz)(n());return(t=i().Observable).of.apply(t,[(0,d.aN)()].concat(S((null==r?void 0:r.id)!==(null==e?void 0:e.id)?[(0,s.UG)(e.id,"layer")]:[]),[(0,c.Xg)(m.jB,"enabled",!0)]))}))},downloadAnnotationsEpic:function(e,t){var n=t.getState;return e.ofType(f.HN).switchMap((function(e){var t=e.annotations;try{var r=(0,m.rE)(t),o=(0,v.Zs)(n());return(0,u.saveAs)(new Blob([JSON.stringify(r)],{type:"application/json;charset=utf-8"}),"".concat(o.length>0&&o||m.jB,".json")),i().Observable.empty()}catch(e){return i().Observable.of((0,p.vU)({title:"annotations.title",message:"annotations.downloadError",autoDismiss:5,position:"tr"}))}}))},confirmCloseAnnotationsEpic:function(e){return e.ofType(f.bI).switchMap((function(e){var t,n=e.layer;return i().Observable.of((0,c.Xg)(m.jB,"enabled",!1),null!=n&&null!==(t=n.features)&&void 0!==t&&t.length?(0,s.tV)(n.id,"layer",{invalidFeatures:null}):(0,s.$o)(n.id))}))},removeAnnotationsEpic:function(e){return e.ofType(f.DX).switchMap((function(e){return i().Observable.of((0,d.g)(),(0,d.Mc)(),(0,s.$o)(e.id))}))},mergeAnnotationsFeaturesEpic:function(e,t){var n=t.getState;return e.ofType(f.QN).switchMap((function(e){var t,r=e.annotation,o=function(e){var t,n,o,i,a,l;return{features:[].concat(S((null==e?void 0:e.features)||[]),S((null==r?void 0:r.features)||[])),style:E(E(E({},null==r?void 0:r.style),null==e?void 0:e.style),{},{body:E(E(E({},null==r||null===(t=r.style)||void 0===t?void 0:t.body),null==e||null===(n=e.style)||void 0===n?void 0:n.body),{},{rules:[].concat(S((null==e||null===(o=e.style)||void 0===o||null===(i=o.body)||void 0===i?void 0:i.rules)||[]),S((null==r||null===(a=r.style)||void 0===a||null===(l=a.body)||void 0===l?void 0:l.rules)||[]))})})}},a=n(),u=(0,b.CA)(a,e.id),c=(0,y.Gu)(a);return(t=i().Observable).of.apply(t,S(c?[(0,f.x$)(o(c))]:[]).concat([(0,s.tV)(u.id,"layer",E({_v_:l()()},o(u)))]))}))}};var j=n(79267),T=n(124852),I=n.n(T),C=n(180307),A=n(171703),k=n(22222),N=n(717621),x=n.n(N),L=n(801550),F=n(607147),D=n(93152),R=n(480681),_=n(21090),M=n(813292),B=n.n(M),Z=n(406557),G=n.n(Z),H=n(771061),V=n(898631),U=n(38560),z=n(815135),Y=n(50993),q=n(45697),$=n.n(q),K=n(260024);function X(e){return X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},X(e)}function W(){return W=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},W.apply(null,arguments)}function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ie(r.key),r)}}function ee(e,t,n){return t=ne(t),function(e,t){if(t&&("object"==X(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,te()?Reflect.construct(t,n||[],ne(e).constructor):t.apply(e,n))}function te(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(te=function(){return!!e})()}function ne(e){return ne=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ne(e)}function re(e,t){return re=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},re(e,t)}function oe(e,t,n){return(t=ie(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ie(e){var t=function(e,t){if("object"!=X(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=X(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==X(t)?t:t+""}var ae=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ee(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&re(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this;return I().createElement(K.Z,W({},this.props.options,{items:[],isDraggable:!0,enableHeightField:this.props.enableHeightField,type:this.props.featureType,components:this.props.selected&&this.props.selected.geometry&&this.props.selected.geometry.coordinates&&this.props.selected.geometry.coordinates.length?(0,m.OQ)(this.props.selected.geometry):[],properties:this.props.selected&&this.props.selected.properties||{},onComplete:function(){},onChangeRadius:this.props.onChangeRadius,aeronauticalOptions:this.props.aeronauticalOptions,onChangeFormat:this.props.onChangeFormat,format:this.props.format,mapProjection:this.props.mapProjection,onHighlightPoint:this.props.onHighlightPoint,onSetInvalidSelected:this.props.onSetInvalidSelected,onChangeText:this.props.onChangeText,renderer:this.props.renderer,onValidateFeature:this.props.onValidateFeature,onChange:function(t,n,r,o){var i=t.map((function(e){return[e.lon,e.lat].concat(function(e){return function(e){if(Array.isArray(e))return J(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return J(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?J(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(void 0!==e.height?[e.height]:[]))}));e.props.onChange(i,n,r,o),e.props.onValidateFeature()}}))}}])&&Q(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(I().Component);oe(ae,"propTypes",{components:$().array,options:$().object,onRemove:$().func,onChange:$().func,transitionProps:$().object,selected:$().object,featureType:$().string,format:$().string,mapProjection:$().string,onComplete:$().func,onHighlightPoint:$().func,onChangeFormat:$().func,onChangeRadius:$().func,onSetInvalidSelected:$().func,aeronauticalOptions:$().object,onChangeText:$().func,renderer:$().string,onValidateFeature:$().func,enableHeightField:$().bool}),oe(ae,"defaultProps",{selected:{},options:{},components:[],onRemove:null,onChange:function(){},onComplete:function(){},onChangeRadius:function(){},onHighlightPoint:function(){},onChangeFormat:function(){},onSetInvalidSelected:function(){},onChangeText:function(){},transitionProps:{transitionName:"switch-panel-transition",transitionEnterTimeout:300,transitionLeaveTimeout:300},onValidateFeature:function(){},enableHeightField:!1});const le=ae;var ue=n(805346),ce=n(73532),se=n(868195);function pe(e){return pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pe(e)}function de(e){return function(e){if(Array.isArray(e))return me(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||fe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fe(e,t){if(e){if("string"==typeof e)return me(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?me(e,t):void 0}}function me(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(n),!0).forEach((function(t){be(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function be(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=pe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=pe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==pe(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ge=(0,z.Z)(U.Z),he="UPDATE_ANNOTATIONS_FEATURES",Ee="UNDO_ANNOTATIONS_FEATURES",Oe="REDO_ANNOTATIONS_FEATURES",Se=be({},he,(function(e,t){return t(e)})),Pe=(0,_.ZP)((function(e,t){return(Se[t.type]||G())(e,t.callback)}),{limit:20,undoType:Ee,redoType:Oe,jumpType:"",jumpToPastType:"",jumpToFutureType:"",clearHistoryType:""}),we={};const je=(0,se.injectIntl)((function(e){var t,n,r,o,i,a,u,c,s,p,d,f,y,v,b=e.selectedId,g=e.value,h=e.mapType,E=e.map,O=e.maxZoom,S=void 0===O?18:O,P=e.onSelect,w=void 0===P?function(){}:P,j=e.onChange,C=void 0===j?function(){}:j,A=e.onZoomTo,k=void 0===A?function(){}:A,N=e.onHighlight,x=void 0===N?function(){}:N,L=e.projection,F=e.intl,D=void 0===F?{}:F,_=e.mapInteractionsSupport,M=e.coordinatesFormat,Z=e.onChangeCoordinatesFormat,G=void 0===Z?function(){}:Z,U=e.tab,z=void 0===U?"coordinates":U,q=e.onSelectTab,$=void 0===q?function(){}:q,K=e.svgSymbolsPath,X=e.lineDashOptions,W=e.enable3dStyleOptions,J=e.geometryEditorOptions,Q=e.defaultTextLabel,ee=e.defaultSymbolizers,te=e.geodesic,ne=e.fonts,re=void 0===ne?["Arial","Verdana","Helvetica","Tahoma","Trebuchet MS","Times New Roman","Georgia","Garamond","Courier New","Brush Script MT"]:ne,oe=(y=(0,T.useReducer)(Pe,{present:g,past:[],future:[]}),v=2,function(e){if(Array.isArray(e))return e}(y)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(y,v)||fe(y,v)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),ie=oe[0],ae=oe[1],se=(null==ie?void 0:ie.present)||ie||we,pe=((null==se?void 0:se.features)||[]).find((function(e){return(null==e?void 0:e.id)===b})),me=function(e,t){var n=e.symbolizerBlock,r=e.ruleBlock;return{symbolizerBlock:Object.keys(n).reduce((function(e,r){return ve(ve({},e),{},be({},r,ve(ve({},n[r]),{},{defaultProperties:m._q[r]||n[r].defaultProperties,params:Object.keys(n[r].params).reduce((function(e,o){var i,a=n[r].params[o];return["Circle"].includes(r)&&["geodesic","radius","msClampToGround","msGeometry"].includes(o)||["Text"].includes(r)&&["label","msGeometry"].includes(o)||["Line","Fill"].includes(r)&&["msGeometry"].includes(o)||["Point","Circle"].includes(null==t||null===(i=t.properties)||void 0===i?void 0:i.annotationType)&&["msGeometry"].includes(o)?e:ve(ve({},e),{},be({},o,a))}),{})})))}),{}),ruleBlock:r}}((0,ce.Z)({exactMatchGeometrySymbol:!0,enable3dStyleOptions:W}),pe),ye=me.symbolizerBlock,Se=me.ruleBlock,je=_;function Te(e){ae({type:he,callback:function(t){return e(t)}})}function Ie(e,t){$("coordinates",pe);var n=l()();Te((function(r){var o,i,a,u={type:"Feature",id:n,properties:ve(ve({},t),{},{id:n,name:e,annotationType:e}),geometry:null};return ve(ve({},r),{},{features:[].concat(de((null==r?void 0:r.features)||[]),[u]),style:ve(ve({},null==r?void 0:r.style),{},{format:"geostyler",body:ve(ve({},null==r||null===(o=r.style)||void 0===o?void 0:o.body),{},{rules:[].concat(de((null==r||null===(i=r.style)||void 0===i||null===(a=i.body)||void 0===a?void 0:a.rules)||[]),[{name:"",filter:["==","id",n],mandatory:"Point"!==e,ruleId:l()(),symbolizers:[ve({symbolizerId:l()()},(0,m.ll)(u,ee))]}])})})})})),w(n)}function Ce(e){var t;return null!=e&&null!==(t=e.properties)&&void 0!==t&&t.measureType?(0,Y.cz)(e,{formatNumber:null!=D&&D.formatNumber?D.formatNumber:function(e){return e}}):[e]}function Ae(e,t,n){Te((function(r){return ve(ve({},r),{},{features:((null==r?void 0:r.features)||[]).filter((function(t){var r;return!n||(null==t||null===(r=t.properties)||void 0===r?void 0:r.measureId)!==e})).reduce((function(r,o){return[].concat(de(r),de((null==o?void 0:o.id)!==e?[o]:n?Ce(t):[t]))}),[])})}))}function ke(e){ae({type:he,callback:function(t){return ve(ve({},t),{},{features:(t.features||[]).filter((function(e){var t;return(null==e||null===(t=e.properties)||void 0===t?void 0:t.measureId)!==b})).reduce((function(t,n){var r;if((null==n?void 0:n.id)!==b)return[].concat(de(t),[n]);var o=(0,m.U0)(n),i=ve(ve({},n),{},{geometry:ve(ve({},null==o?void 0:o.geometry),{},{coordinates:(0,m._5)(null==o||null===(r=o.geometry)||void 0===r?void 0:r.type,e)})});return[].concat(de(t),de((0,m._n)(i)?Ce(i):[i]))}),[])})}})}function Ne(){var e=(((null==se?void 0:se.style)||{}).body||{}).rules;return{name:"selected feature style",rules:(void 0===e?[]:e).filter((function(e){var t,n;return(null==e||null===(t=e.filter)||void 0===t?void 0:t[2])===(null==pe||null===(n=pe.properties)||void 0===n?void 0:n.id)}))}}(0,T.useEffect)((function(){var e,t,n,r,o,i,a,l,u=((null==ie||null===(e=ie.present)||void 0===e?void 0:e.features)||[]).filter(m._n),c=((null==ie||null===(t=ie.present)||void 0===t?void 0:t.features)||[]).filter((function(e){return!(0,m._n)(e)})),s=u.map((function(e){return e.id}));C(ve(ve({},null==ie?void 0:ie.present),{},{features:u,style:ve(ve({},null==ie||null===(n=ie.present)||void 0===n?void 0:n.style),{},{format:"geostyler",body:ve(ve({},null==ie||null===(r=ie.present)||void 0===r||null===(o=r.style)||void 0===o?void 0:o.body),{},{rules:((null==ie||null===(i=ie.present)||void 0===i||null===(a=i.style)||void 0===a||null===(l=a.body)||void 0===l?void 0:l.rules)||[]).filter((function(e){var t=e.filter;return s.includes(null==t?void 0:t[2])}))})}),invalidFeatures:(null==c?void 0:c.length)>0?c:null}),(0,m._n)(pe)?pe:null,null==ie?void 0:ie.present)}),[null==ie?void 0:ie.present]);var xe=((null==se?void 0:se.features)||[]).filter((function(e){var t;return null==e||null===(t=e.properties)||void 0===t?void 0:t.annotationType}));return I().createElement("div",{className:"ms-features-editor"},I().createElement("div",{className:"ms-features-editor-list"},I().createElement("div",{className:"ms-features-editor-list-header"},I().createElement(R.hE,null,I().createElement(ge,{className:"square-button-md no-border",onClick:function(){ae({type:Ee})},disabled:0===((null==ie||null===(t=ie.past)||void 0===t?void 0:t.length)||0)},I().createElement(R.gG,{glyph:"undo"})),I().createElement(ge,{className:"square-button-md no-border",onClick:function(){ae({type:Oe})},disabled:0===((null==ie||null===(n=ie.future)||void 0===n?void 0:n.length)||0)},I().createElement(R.gG,{glyph:"redo"}))),I().createElement(R.hE,null,I().createElement(ge,{tooltipId:"annotations.titles.marker",className:"square-button-md no-border",onClick:function(){return Ie("Point")}},I().createElement(R.gG,{glyph:"point-plus"})),I().createElement(ge,{tooltipId:"annotations.titles.line",className:"square-button-md no-border",onClick:function(){return Ie("LineString")}},I().createElement(R.gG,{glyph:"polyline-plus"})),I().createElement(ge,{tooltipId:"annotations.titles.polygon",className:"square-button-md no-border",onClick:function(){return Ie("Polygon")}},I().createElement(R.gG,{glyph:"polygon-plus"})),I().createElement(ge,{tooltipId:"annotations.titles.text",className:"square-button-md no-border",onClick:function(){return Ie("Text",{label:Q||""})}},I().createElement(R.gG,{glyph:"font-add"})),I().createElement(ge,{tooltipId:"annotations.titles.circle",className:"square-button-md no-border",onClick:function(){return Ie("Circle",{geodesic:!(null==te||!te.Circle)})}},I().createElement(R.gG,{glyph:"1-circle-add"})))),!(null!=se&&null!==(r=se.features)&&void 0!==r&&r.length)&&I().createElement("div",{className:"ms-features-editor-list-empty"},I().createElement(ue.Z,{msgId:"annotations.addGeometry"})),I().createElement("ul",{className:"ms-features-editor-list-body"},xe.map((function(e){var t,n=null==e?void 0:e.id,r=b===n;return I().createElement("li",{key:n,onClick:function(){return r?function(){}:w(n,(0,m._n)(e)?e:null)},className:"ms-features-editor-item ".concat(r?" selected":""),onMouseEnter:function(){b!==n&&(0,m._n)(e)&&x("feature",e)},onMouseLeave:function(){x("feature",null)}},I().createElement("div",null,I().createElement(R.gG,{glyph:(0,m.JX)(e)})),I().createElement("div",{style:{flex:1}},I().createElement("input",{value:null==e||null===(t=e.properties)||void 0===t?void 0:t.name,type:"text",onChange:function(t){return Ae(n,ve(ve({},e),{},{properties:ve(ve({},null==e?void 0:e.properties),{},{name:t.target.value})}))}})),I().createElement(R.gG,{glyph:(0,m._n)(e)?"ok-sign text-success":"exclamation-mark text-danger"}),I().createElement(R.hE,null,I().createElement(ge,{disabled:!(0,m._n)(e),bsStyle:r?"primary":"default",className:"square-button-md",tooltipId:"annotations.zoomToGeometry",onClick:function(t){t.stopPropagation(),k(B()(e),"EPSG:4326",S)}},I().createElement(R.gG,{glyph:"zoom-to"})),I().createElement(ge,{className:"square-button-md",bsStyle:r?"primary":"default",tooltipId:"annotations.removeGeometry",onClick:function(e){e.stopPropagation(),function(e){Te((function(t){return ve(ve({},t),{},{features:((null==t?void 0:t.features)||[]).filter((function(t){var n;return(null==t?void 0:t.id)!==e&&(null==t||null===(n=t.properties)||void 0===n?void 0:n.measureId)!==e}))})}))}(n)}},I().createElement(R.gG,{glyph:"trash"}))))})))),!pe&&I().createElement("div",{className:"ms-features-editor-tools-empty"},I().createElement("div",null,I().createElement(R.gG,{glyph:"comment"}),I().createElement("div",null,I().createElement(ue.Z,{msgId:"annotations.selectAnnotationFeature"})))),pe&&I().createElement("div",{className:"ms-features-editor-tools"},I().createElement(R.JL,{bsStyle:"tabs",activeKey:z},I().createElement(R.LY,{key:"coordinates",eventKey:"coordinates",onClick:function(){return $("coordinates",pe)}},I().createElement(ue.Z,{msgId:"annotations.tabCoordinates"})),I().createElement(R.LY,{key:"style",eventKey:"style",onClick:function(){return $("style",pe)}},I().createElement(ue.Z,{msgId:"annotations.tabStyle"}))),I().createElement("div",{className:"ms-features-editor-tools-body"},"coordinates"===z&&I().createElement(I().Fragment,null,I().createElement(le,{key:pe.id,enableHeightField:h===V.Bk.CESIUM&&!(null!=pe&&null!==(o=pe.properties)&&void 0!==o&&o.geodesic),format:M,onChangeFormat:G,mapProjection:L,options:J,onHighlightPoint:function(e){x("coordinate",e&&{type:"Feature",geometry:{type:"Point",coordinates:[e.lon,e.lat]},properties:{}})},onChangeRadius:function(e){Ae(null==pe?void 0:pe.id,ve(ve({},pe),{},{properties:ve(ve({},null==pe?void 0:pe.properties),{},{radius:e})}))},selected:ve(ve({},(0,m.U0)(pe)),{},{properties:ve(ve({},null==pe?void 0:pe.properties),{},{valueText:null==pe||null===(i=pe.properties)||void 0===i?void 0:i.label})}),featureType:null==pe||null===(a=pe.properties)||void 0===a?void 0:a.annotationType,renderer:m.jB,onChange:ke,onSetInvalidSelected:function(e,t){"coords"===e&&ke(t)}}),"Text"===(null==pe||null===(u=pe.properties)||void 0===u?void 0:u.annotationType)&&I().createElement(R.cw,{className:"ms-annotations-label-input",key:"label",controlId:"ms-annotations-label-input",validationState:null!=pe&&null!==(c=pe.properties)&&void 0!==c&&c.label?void 0:"error"},I().createElement(R.J$,null,I().createElement(ue.Z,{msgId:"annotations.titles.text"})),I().createElement(R.NI,{type:"text",value:(null==pe||null===(s=pe.properties)||void 0===s?void 0:s.label)||"",onChange:function(e){return Ae(null==pe?void 0:pe.id,ve(ve({},pe),{},{properties:ve(ve({},null==pe?void 0:pe.properties),{},{label:e.target.value})}))}}))),"style"===z&&I().createElement("div",null,I().createElement(H.Z,{ruleBlock:Se,symbolizerBlock:ye,config:{geometryType:"annotation-".concat(null==pe||null===(p=pe.properties)||void 0===p||null===(d=p.annotationType)||void 0===d?void 0:d.toLowerCase()),simple:!0,fonts:re,svgSymbolsPath:K,lineDashOptions:X},rules:(null===(f=Ne())||void 0===f?void 0:f.rules)&&de(Ne().rules).reverse(),onChange:function(e){return t=de(e).reverse(),void Te((function(e){var n=null==e?void 0:e.style,r=(e.features||[]).reduce((function(e,r){var o;if(r.id===pe.id)return[].concat(de(e),de(t.map((function(e){return ve(ve({},e),{},{filter:e.filter||["==","id",pe.properties.id]})}))));var i=((null==n||null===(o=n.body)||void 0===o?void 0:o.rules)||[]).filter((function(e){var t,n;return(null==e||null===(t=e.filter)||void 0===t?void 0:t[2])===(null==r||null===(n=r.properties)||void 0===n?void 0:n.id)}));return[].concat(de(e),de(i))}),[]),o=ve(ve({},n),{},{format:"geostyler",body:ve(ve({},null==n?void 0:n.body),{},{rules:r})});return ve(ve({},e),{},{style:o})}));var t}})))),je&&I().createElement(je,{key:null==pe?void 0:pe.id,active:!!pe&&"coordinates"===z,map:E,mapType:h,feature:pe,geodesic:te,onChange:function(e){Ae(pe.id,e,!0)}}))}));var Te=n(460604),Ie="ms-annotations-editor-target",Ce="ANNOTATIONS_ADDITIONAL_LAYERS_OWNER";function Ae(e){return Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ae(e)}function ke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ke(Object(n),!0).forEach((function(t){xe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ke(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xe(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Ae(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Ae(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ae(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Le=xe(xe({},V.Bk.OPENLAYERS,(0,T.lazy)((function(){return Promise.all([n.e(18672),n.e(52043),n.e(15265),n.e(47202),n.e(69141),n.e(51554),n.e(49414),n.e(85828),n.e(72445),n.e(37974),n.e(39547)]).then(n.bind(n,65433))}))),V.Bk.CESIUM,(0,T.lazy)((function(){return Promise.all([n.e(65792),n.e(48764),n.e(29379),n.e(45477),n.e(50172),n.e(37532),n.e(65417)]).then(n.bind(n,37532))}))),Fe=xe(xe({},V.Bk.OPENLAYERS,(0,T.lazy)((function(){return Promise.all([n.e(18672),n.e(52043),n.e(15265),n.e(47202),n.e(69141),n.e(51554),n.e(49414),n.e(85828),n.e(72445),n.e(37974),n.e(1577),n.e(95892),n.e(47238)]).then(n.bind(n,487959))}))),V.Bk.CESIUM,(0,T.lazy)((function(){return Promise.all([n.e(65792),n.e(48764),n.e(29379),n.e(45477),n.e(50172),n.e(79589)]).then(n.bind(n,43982))}))),De=function(e){return Le[e]&&Fe[e]};const Re=function(e){var t=e.map,n=e.active,r=e.mapType,o=e.feature,i=e.geodesic,a=void 0===i?{}:i,l=e.onChange,u=void 0===l?function(){}:l,c=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).properties;return"Text"===(null==e?void 0:e.annotationType)?"Point":null==e?void 0:e.annotationType};if(!De(r))return null;var s=Le[r],p=Fe[r],d=(0,m._n)(o,!0),f=c(o),y=!!a[f];return I().createElement(T.Suspense,{fallback:null},I().createElement(I().Fragment,null,I().createElement(s,{map:t,active:n&&null===o.geometry,depthTestAgainstTerrain:!1,geometryType:f,geodesic:y,getObjectsToExcludeOnPick:function(){return[]},onDrawEnd:function(e){var t,n,r=e.feature;u(Ne(Ne({},o),{},{properties:Ne(Ne({},null==o?void 0:o.properties),{},{geodesic:y},void 0!==(null==r||null===(t=r.properties)||void 0===t?void 0:t.radius)&&{radius:null==r||null===(n=r.properties)||void 0===n?void 0:n.radius}),geometry:r.geometry}))}}),I().createElement(p,{map:t,active:n&&d,geojson:o,getGeometryType:c,onEditEnd:function(e){return u(e)}})))};function _e(e){return _e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_e(e)}function Me(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||Ve(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ze(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Be(Object(n),!0).forEach((function(t){Ge(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ge(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=_e(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=_e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==_e(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function He(e){return function(e){if(Array.isArray(e))return Ue(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ve(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ve(e,t){if(e){if("string"==typeof e)return Ue(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ue(e,t):void 0}}function Ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function ze(e){var t;if(null==e||null===(t=e.geometry)||void 0===t||!t.type)return[];if("Point"===e.geometry.type&&!e.geometry.coordinates.some(m.gS))return[Ze(Ze({},e),{},{properties:{geometryType:"Point"}})];var n=Me(B()(e),4),r=n[0],o=n[1],i=n[2],a=n[3],l={type:"Feature",geometry:{type:"LineString",coordinates:[[r,o],[r,a],[i,a],[i,o],[r,o]]},properties:{geometryType:"LineString"}};return"LineString"===e.geometry.type?[l].concat(He(e.geometry.coordinates.map((function(e){return{type:"Feature",geometry:{type:"Point",coordinates:e},properties:{geometryType:"Point"}}})))):"Polygon"===e.geometry.type?[l].concat(He(e.geometry.coordinates[0].map((function(e){return{type:"Feature",geometry:{type:"Point",coordinates:e},properties:{geometryType:"Point"}}})))):[e]}var Ye=(0,A.connect)((0,k.P1)([(0,F.XL)(m.jB,"ready"),y.F3,v.Od,D.E$,y.Gu,y.qs],(function(e,t,n,r,o,i){var a,l;return{enabled:e,selected:t,maxZoom:(null==n?void 0:n.zoom)||18,projection:null==n?void 0:n.projection,enable3dStyleOptions:!!r,activeClickEventListener:null==n||null===(a=n.eventListeners)||void 0===a||null===(l=a.click)||void 0===l?void 0:l[0],session:o,selectedId:i}})),{onChange:s.tV,onZoomTo:L.Px,onUpdateALayer:Te.W,onRemoveALayer:Te.fU,onStoreSession:f.x$,setSelectedId:f.ym})((function(e){var t=e.enabled,n=e.targetId,r=void 0===n?Ie:n,o=e.mapType,i=e.map,a=e.selected,l=e.onChange,u=e.onZoomTo,c=e.maxZoom,s=void 0===c?18:c,p=e.projection,d=e.onUpdateALayer,f=void 0===d?function(){}:d,y=e.onRemoveALayer,v=void 0===y?function(){}:y,b=e.symbolsPath,g=void 0===b?"product/assets/symbols/symbols.json":b,h=e.lineDashOptions,E=e.enable3dStyleOptions,O=e.geometryEditorOptions,S=e.format,P=void 0===S?"decimal":S,w=e.defaultTextAnnotation,j=void 0===w?"New":w,A=e.defaultPointType,k=e.defaultShape,N=e.defaultShapeStrokeColor,L=e.defaultShapeFillColor,F=e.defaultShapeSize,D=void 0===F?64:F,R=e.geodesic,_=e.activeClickEventListener,M=e.fonts,B=e.onStoreSession,Z=e.session,G=e.selectedId,H=e.setSelectedId,V=void 0===H?function(){}:H,U=document.querySelector("#".concat(r)),z=Me((0,T.useState)(P),2),Y=z[0],q=z[1],$=Me((0,T.useState)("coordinates"),2),K=$[0],X=$[1];function W(){return g.includes(".json")?g:"".concat(g,"symbols.json")}function J(e,t){var n;De(o)&&f(a.id,Ce,"override",Ze({visibility:!0},e&&!t&&!_&&{features:null==a||null===(n=a.features)||void 0===n?void 0:n.filter((function(t){var n=t.id,r=t.properties;return n!==e.id&&(null==r?void 0:r.measureId)!==e.id}))})),f("ANNOTATIONS_SELECTED_LAYER",Ce,"overlay",{type:"vector",visibility:!0,features:e?ze(e):[],style:{format:"geostyler",body:{name:"",rules:[{name:"",filter:["==","geometryType","LineString"],symbolizers:[{kind:"Line",color:"#111111",width:1,opacity:1,cap:"round",join:"round",msClampToGround:!0,dasharray:[6,6]}]},{name:"",filter:["==","geometryType","Point"],symbolizers:[{kind:"Mark",wellKnownName:"shape://plus",color:"#ffffff",fillOpacity:0,strokeColor:"#000000",strokeOpacity:1,strokeWidth:1,radius:8,rotate:0,msBringToFront:!0}]}]}}})}return(0,T.useEffect)((function(){return t&&null!=a&&a.id&&f(a.id,Ce,"override",{visibility:!0}),function(){v({owner:Ce})}}),[t]),(0,T.useEffect)((function(){var e=((null==a?void 0:a.features)||[]).find((function(e){return e.id===G}));t&&(0,m._n)(e)&&J(e,"style"===K)}),[_,o,t]),t&&U&&a?(0,C.createPortal)(I().createElement("div",{className:"ms-annotations-editor"},I().createElement(je,{key:a._v_,selectedId:G,geodesic:{Circle:!1!==R},fonts:M,defaultSymbolizers:function(){if("symbol"!==A)return{};var e=x()(L||"#dddddd"),t=x()(N||"#777777");return{Point:{kind:"Mark",wellKnownName:W().replace(/[^\/]*.json$/,"".concat(k,".svg")),color:e.toHexString(),fillOpacity:e.getAlpha(),strokeColor:t.toHexString(),strokeOpacity:t.getAlpha(),strokeWidth:1,radius:D/2,rotate:0}}}(),svgSymbolsPath:W(),lineDashOptions:h,coordinatesFormat:Y,enable3dStyleOptions:E,geometryEditorOptions:O,defaultTextLabel:j,onChangeCoordinatesFormat:q,tab:K,onSelectTab:function(e,t){X(e),J(t,"style"===e)},mapInteractionsSupport:!_&&Re,value:Z||{features:(null==a?void 0:a.features)||[],style:(null==a?void 0:a.style)||{}},onHighlight:function(e,t){f("ANNOTATIONS_HIGHLIGHT_LAYERS",Ce,"overlay",{type:"vector",visibility:!0,features:t?ze(t):[],style:{format:"geostyler",body:{name:"",rules:[{name:"",filter:["==","geometryType","LineString"],symbolizers:[{kind:"Line",color:"#555555",width:1,opacity:1,cap:"round",join:"round",msClampToGround:!0,dasharray:[6,6]}]},{name:"",filter:["==","geometryType","Point"],symbolizers:[{kind:"Mark",wellKnownName:"Square",color:"#ffffff",fillOpacity:0,strokeColor:"#ff0000",strokeOpacity:1,strokeWidth:3,radius:6,rotate:0,msBringToFront:!0}]}]}}})},mapType:o,map:i,maxZoom:s,projection:p,onSelect:function(e,t){V(e),J(t,"style"===K)},onChange:function(e,t,n){var r,o;l(a.id,"layers",e),J(t,"style"===K),r=e.invalidFeatures,f("ANNOTATIONS_INVALID_LAYER",Ce,"overlay",{type:"vector",visibility:!0,features:r?(o=r,(o||[]).filter((function(e){var t=e.geometry;return(null==t?void 0:t.type)&&["LineString","Polygon"].includes(t.type)})).reduce((function(e,t){var n=("LineString"===t.geometry.type?t.geometry.coordinates:t.geometry.coordinates[0]).filter((function(e){return!e.some(m.gS)}));return[].concat(He(e),He(n.length>1?[{type:"Feature",geometry:{type:"LineString",coordinates:n},properties:Ze(Ze({},null==t?void 0:t.properties),{},{geometryType:"LineString"})}]:[]),He(n.map((function(e){return{type:"Feature",geometry:{type:"Point",coordinates:e},properties:{geometryType:"Point"}}}))))}),[])):[],style:{format:"geostyler",body:{name:"",rules:[{name:"",filter:["==","geometryType","LineString"],symbolizers:[{kind:"Line",color:"#ff0000",width:2,opacity:1,cap:"round",join:"round",msClampToGround:!1,dasharray:[6,6]}]},{name:"",filter:["==","geometryType","Point"],symbolizers:[{kind:"Mark",wellKnownName:"shape://plus",color:"#ffffff",fillOpacity:0,strokeColor:"#ff0000",strokeOpacity:1,strokeWidth:1,radius:8,rotate:0,msBringToFront:!0}]}]}}}),B(n)},onZoomTo:u})),U):null}));const qe=Ye;var $e=n(623560),Ke=n.n($e),Xe=n(548403),We=n.n(Xe),Je=n(945402),Qe=n(55105),et=n(629859),tt=n(697111),nt=n(779195);function rt(e){return rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rt(e)}function ot(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function it(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ot(Object(n),!0).forEach((function(t){at(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ot(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function at(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=rt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=rt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==rt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var ut=(0,tt.Z)("onEditorStateChange","editorState")(nt.Z);const ct=function(e){var t,n,r=e.preview,o=e.properties,i=void 0===o?{}:o,a=e.fields,l=void 0===a?[{name:"title",type:"text",validator:function(e){return e},validateError:"annotations.mandatory",showLabel:!0,editable:!0},{name:"description",type:"html",showLabel:!0,editable:!0}]:a,u=e.onChange,c=void 0===u?function(){}:u,s=(t=(0,T.useState)(l.filter((function(e){return"html"===e.type})).reduce((function(e,t){return it(it({},e),{},at({},t.name,(0,et.n0)(i[t.name]||"")))}),{})),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(t,n)||function(e,t){if(e){if("string"==typeof e)return lt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?lt(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),p=s[0],d=s[1];return r?I().createElement("div",{className:"ms-annotations-fields preview"},l.map((function(e){var t=e.showLabel;return I().createElement("div",{key:e.name,className:"ms-annotations-field"},t&&I().createElement("div",{className:"ms-annotations-field-label"},I().createElement(ue.Z,{msgId:"annotations.field.".concat(e.name)})),I().createElement("div",{className:"ms-annotations-field-value",dangerouslySetInnerHTML:{__html:i[e.name]}}))}))):I().createElement("form",{className:"ms-annotations-fields"},l.map((function(e){var t=Ke()(e.validator)?e.validator:null,n=t&&t(i[e.name]),r=e.validateError||"annotations.mandatory",o=e.showLabel,a=e.editable;return"text"===e.type?I().createElement(R.cw,{key:e.name,controlId:"annotations-".concat(e.name),validationState:t?n?"success":"error":null},o&&I().createElement(R.J$,null,I().createElement(ue.Z,{msgId:"annotations.field.".concat(e.name)})),I().createElement(R.NI,{disabled:!a,type:"text",value:i[e.name],onChange:function(t){return c(at({},e.name,t.target.value))}}),t&&!n&&I().createElement(R.Qb,null,I().createElement(ue.Z,{msgId:r}))):"html"===e.type?I().createElement(R.cw,{key:e.name,controlId:"annotations-".concat(e.name),validationState:t?n?"success":"error":null},o&&I().createElement(R.J$,null,I().createElement(ue.Z,{msgId:"annotations.field.".concat(e.name)})),a?I().createElement(ut,{editorState:p[e.name],onEditorStateChange:function(t){var n=(0,et.sc)(p[e.name]);(0,et.sc)(t)!==n&&(c(at({},e.name,(0,et.sc)(t))),d((function(n){return it(it({},n),{},at({},e.name,t))})))}}):I().createElement("div",{dangerouslySetInnerHTML:{__html:i[e.name]}}),t&&!n&&I().createElement(R.Qb,null,I().createElement(ue.Z,{msgId:r}))):null})))};var st=n(501262),pt=n(399534),dt=n(710615);function ft(e){return ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ft(e)}var mt=["fields","onEdit","onRemove","onDownload"],yt=["title","description"];function vt(){return vt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vt.apply(null,arguments)}function bt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bt(Object(n),!0).forEach((function(t){ht(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ht(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=ft(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=ft(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ft(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Et(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ot(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ot(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ot(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function St(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var Pt=(0,z.Z)(U.Z),wt=(0,A.connect)((function(){return{}}),{onRemove:f._x,onDownload:f.LR,onEdit:f.VR})((function(e){var t=e.fields,n=e.onEdit,r=void 0===n?function(){}:n,o=e.onRemove,i=void 0===o?function(){}:o,a=e.onDownload,l=void 0===a?function(){}:a,u=St(e,mt),c=Et((0,T.useState)(!1),2),s=c[0],p=c[1];return I().createElement("div",null,I().createElement("div",null,I().createElement(R.hE,null,I().createElement(Pt,{className:"square-button-md",bsStyle:"primary",tooltipId:"annotations.edit",onClick:function(){return r(u.id)}},I().createElement(R.gG,{glyph:"pencil"})),I().createElement(Pt,{className:"square-button-md",bsStyle:"primary",tooltipId:"annotations.remove",onClick:function(){return p(!0)}},I().createElement(R.gG,{glyph:"trash"})),I().createElement(Pt,{className:"square-button-md",bsStyle:"primary",tooltipId:"annotations.downloadcurrenttooltip",onClick:function(){return l([u])}},I().createElement(R.gG,{glyph:"download"})))),I().createElement(ct,{preview:!0,properties:gt({title:null==u?void 0:u.title,description:null==u?void 0:u.description},null==u?void 0:u.options),fields:t}),I().createElement(pt.Z,null,I().createElement(st.Z,{show:s,modal:!0,onClose:function(){return p(!1)},onConfirm:function(){i(u.id),p(!1)},confirmButtonBSStyle:"primary",closeGlyph:"1-close",confirmButtonContent:I().createElement(ue.Z,{msgId:"annotations.confirm"}),closeText:I().createElement(ue.Z,{msgId:"annotations.cancel"})},I().createElement(ue.Z,{msgId:"annotations.undoDeleteFeature"}))))})),jt=(0,A.connect)((0,k.P1)([(0,F.Yq)(m.jB),function(e){return(0,Qe.ic)(e,{height:!0})},y.F3,v.Od],(function(e,t,n,r){var o,i;return{enabled:e,style:t,selected:e?n:null,activeClickEventListener:null==r||null===(o=r.eventListeners)||void 0===o||null===(i=o.click)||void 0===i?void 0:i[0],projection:null==r?void 0:r.projection,zoom:null==r?void 0:r.zoom,resolutions:null==r?void 0:r.resolutions}})),{onClose:f.L0,onCancel:f.Hl,onReady:c.Xg.bind(null,m.jB,"ready"),onChange:s.tV,onDownload:f.LR})((function(e){var t=e.targetId,n=void 0===t?Ie:t,r=e.selected,o=e.style,i=e.enabled,a=e.onReady,l=void 0===a?function(){}:a,u=e.onClose,c=void 0===u?function(){}:u,s=e.onChange,p=void 0===s?function(){}:s,d=e.onDownload,f=void 0===d?function(){}:d,y=e.fields,v=void 0===y?[{name:"title",type:"text",validator:function(e){return e},validateError:"annotations.mandatory",showLabel:!0,editable:!0},{name:"description",type:"html",showLabel:!0,editable:!0}]:y,b=e.closeId,g=e.onCancel,h=void 0===g?function(){}:g,E=e.activeClickEventListener,O=e.projection,S=e.resolutions,P=e.zoom,w=gt({title:null==r?void 0:r.title,description:null==r?void 0:r.description},null==r?void 0:r.options),j=Et((0,T.useState)("properties"),2),C=j[0],A=j[1],k=Et((0,T.useState)(!1),2),N=k[0],x=k[1];function L(){return!v.find((function(e){return!!Ke()(null==e?void 0:e.validator)&&!e.validator(w[e.name])}))}function F(){var e;return!(null==r||null===(e=r.features)||void 0===e||!e.length||r.invalidFeatures)}function D(e){return e.stopPropagation(),L()&&F()?c(r):x(!0)}return(0,T.useEffect)((function(){return(0,Je.j9)(m.jB,(function(e){return I().createElement(wt,vt({},e,{fields:v}))})),function(){(0,Je.j9)(m.jB,void 0)}}),[]),(0,T.useEffect)((function(){return x(!1),l(i),function(){l(!i)}}),[i]),(0,T.useEffect)((function(){b&&D()}),[b]),r?I().createElement("div",{className:"ms-annotations-panel",style:o},I().createElement("div",{className:"ms-annotations-panel-header"},I().createElement(Pt,{onClick:function(e){return D(e)},className:"square-button no-border"},I().createElement(R.gG,{glyph:"1-close"})),I().createElement("div",{className:"ms-annotations-title"},I().createElement(ue.Z,{msgId:"annotations.title"})),I().createElement("div",{className:"square-button text-primary"},I().createElement(R.gG,{glyph:"comment"}))),I().createElement(R.JL,{bsStyle:"tabs",activeKey:C,className:"ms-annotations-panel-nav"},I().createElement(R.LY,{key:"properties",eventKey:"properties",onClick:function(){return A("properties")}},I().createElement(ue.Z,{msgId:"annotations.properties"})," ",I().createElement(R.gG,{glyph:L()?"ok-sign text-success":"exclamation-mark text-danger"})),I().createElement(R.LY,{key:"geometries",eventKey:"geometries",onClick:function(){return A("geometries")}},I().createElement(ue.Z,{msgId:"annotations.geometries"})," ",I().createElement(R.gG,{glyph:F()?"ok-sign text-success":"exclamation-mark text-danger"})),I().createElement(R.LY,{key:"settings",eventKey:"settings",onClick:function(){return A("settings")}},I().createElement(ue.Z,{msgId:"settings"})),I().createElement(Pt,{className:"square-button-md",bsStyle:"primary",tooltipId:"annotations.downloadcurrenttooltip",disabled:!(L()&&F()),onClick:function(){return f([r])}},I().createElement(R.gG,{glyph:"download"}))),I().createElement("div",{className:"ms-annotations-panel-body"},I().createElement("div",{className:"ms-annotations-panel-content",style:"properties"===C?{}:{display:"none"}},I().createElement(ct,{fields:v,properties:w,onChange:function(e){var t=e.title,n=e.description,o=St(e,yt);p(r.id,"layers",gt(gt(gt({},void 0!==t&&{title:t}),void 0!==n&&{description:n}),{},{options:gt(gt({},r.options),o)}))}})),I().createElement("div",{id:n,style:"geometries"===C?{}:{display:"none"}}),I().createElement("div",{className:"ms-annotations-panel-content",style:"settings"===C?{}:{display:"none"}},I().createElement(dt.Z,{title:I().createElement(R.J$,null,I().createElement(ue.Z,{msgId:"layerProperties.visibilityLimits.title"})),layer:r,onChange:function(e){return p(r.id,"layers",e)},projection:O,resolutions:S,zoom:P}))),E&&I().createElement(R.bZ,{bsStyle:"warning"},I().createElement(ue.Z,{msgId:"annotations.deactivatedMapInteraction",msgParams:{pluginName:We()(E)}})),I().createElement(pt.Z,null,I().createElement(st.Z,{show:N,modal:!0,onClose:function(){return h(),void x(!1)},onConfirm:function(){return c(r),void x(!1)},confirmButtonBSStyle:"primary",closeGlyph:"1-close",confirmButtonContent:I().createElement(ue.Z,{msgId:"annotations.confirm"}),closeText:I().createElement(ue.Z,{msgId:"annotations.cancel"})},I().createElement(ue.Z,{msgId:"annotations.undo"})))):null}));const Tt=jt;var It=["status","selectedLayers","onAdd","onDownload","onEdit","annotationLayers","statusTypes","itemComponent"];function Ct(){return Ct=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ct.apply(null,arguments)}const At=(0,A.connect)((0,k.P1)([y.Yu,(0,F.Yq)(m.jB)],(function(e,t){return{annotationLayers:e,enabled:t}})),{onAdd:f.A9,onDownload:f.LR,onEdit:f.VR})((function(e){var t=e.status,n=e.selectedLayers,r=e.onAdd,o=void 0===r?function(){}:r,i=e.onDownload,a=void 0===i?function(){}:i,l=e.onEdit,u=void 0===l?function(){}:l,c=e.annotationLayers,s=void 0===c?[]:c,p=e.statusTypes,d=e.itemComponent,f=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,It),y=d;if(t===p.DESELECT)return I().createElement(I().Fragment,null,I().createElement(y,Ct({},f,{key:"annotations",tooltipId:"toc.addAnnotations",onClick:function(){return o()},glyph:"add-comment"})),s.length>0&&I().createElement(y,Ct({},f,{key:"annotations-download",glyph:"download-comment",tooltipId:"annotations.downloadtooltip",onClick:function(){return a(s)}})));if(t===p.LAYER&&(0,m.cO)(n[0]))return I().createElement(I().Fragment,null,I().createElement(y,Ct({},f,{key:"annotations-edit",glyph:"pencil",tooltipId:"toc.editAnnotations",onClick:function(){return u(n[0].id)}})),I().createElement(y,Ct({},f,{key:"annotations-download",tooltipId:"annotations.downloadcurrenttooltip",onClick:function(){return a([n[0]])},glyph:"download-comment"})));var v=t===p.LAYERS?n.filter(m.cO):[];return v.length?I().createElement(I().Fragment,null,I().createElement(y,Ct({},f,{key:"annotations-download",tooltipId:"annotations.downloadtooltip",onClick:function(){return a(v)},glyph:"download-comment"}))):null})),kt=(0,r.rx)("Annotations",{component:Tt,containers:{TOC:{doNotHide:!0,name:"Annotations",target:"toolbar",Component:At,position:12},Map:{name:"Annotations",Tool:qe,alwaysRender:!0}},reducers:{annotations:j.Z},epics:w})},79267:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n(14281);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==o(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.e7:return a(a({},e),{},{session:t.session});case r.Nd:return a(a({},e),{},{featureId:t.id});case r.CD:case r.A1:return a(a({},e),{},{editing:!0,closeId:0});case r.eY:return a(a({},e),{},{closeId:(e.closeId||0)+1});case r.bI:return a(a({},e),{},{editing:!1,closeId:0,session:null});case r.Rr:return a(a({},e),{},{closeId:0});default:return e}}},902054:(e,t,n)=>{"use strict";n.d(t,{sB:()=>a,Yu:()=>l,F3:()=>u,cM:()=>c,Gu:()=>s,qs:()=>p});var r=n(22222),o=n(675110),i=n(900012),a=(0,r.P1)([o.l2],(function(e){return e.find(i.cO)})),l=(0,r.P1)([o.l2],(function(e){return e.filter(i.cO)})),u=function(e){var t=(0,o.Iz)(e);return t&&(0,i.cO)(t)?t:null},c=function(e){var t;return null==e||null===(t=e.annotations)||void 0===t?void 0:t.editing},s=function(e){var t;return null==e||null===(t=e.annotations)||void 0===t?void 0:t.session},p=function(e){var t;return null==e||null===(t=e.annotations)||void 0===t?void 0:t.featureId}},55105:(e,t,n)=>{"use strict";n.d(t,{Ss:()=>m,Nr:()=>y,QJ:()=>v,ic:()=>b,Jz:()=>g,VM:()=>h,CF:()=>E,Ju:()=>O,Fc:()=>S,gQ:()=>P});var r=n(91175),o=n.n(r),i=n(288306),a=n.n(i),l=n(800827),u=n(552259),c=n(737275);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==s(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=function(e){return e.maplayout&&e.maplayout.layout||{}},y=function(e){return e.maplayout&&e.maplayout.boundingMapRect||{}},v=function(e){return e.maplayout&&e.maplayout.boundingSidebarRect||{}},b=a()((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=m(e),o=v(e);return r&&Object.keys(r).filter((function(e){return t[e]})).reduce((function(e,t){var i;return d(d({},e),{},f({},t,n&&null!==(i=o[t])&&void 0!==i?i:r[t]))}),{})||{}}),(function(e,t,n){return JSON.stringify(m(e))+JSON.stringify(v(e))+JSON.stringify(t)+(n?"_isDock":"")})),g=function(e){var t;return!(null===(t=m(e))||void 0===t||!t.rightPanel)},h=function(e){var t,n=c.ZP.getConfigProp("mapLayout")||u.Ur;return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=m(e);return!!o()(t.filter((function(e){return n[e.key]})).map((function(e){return"not"===e.type?n[e.key]!==e.value&&n[e.key]:n[e.key]===e.value})))}(e,[{key:"bottom",value:null!==(t=null==n?void 0:n.bottom.sm)&&void 0!==t?t:0,type:"not"}])},E=function(e){var t=(0,l.Od)(e),n=y(e);return n&&t&&t.size&&{left:(0,u.pb)(n.left,t.size.width),bottom:(0,u.pb)(n.bottom,t.size.height),right:(0,u.pb)(n.right,t.size.width),top:(0,u.pb)(n.top,t.size.height)}},O=function(e){var t,n;return null!==(t=null==e||null===(n=e.maplayout)||void 0===n?void 0:n.dockPanels)&&void 0!==t?t:{left:[],right:[]}},S=function(e){return b(e,{height:!0,right:!0},!0)},P=function(e){return b(e,{right:!0},!0)}},443143:(e,t,n)=>{"use strict";n.d(t,{qH:()=>s,qj:()=>p,qq:()=>d,TM:()=>f});var r,o=n(717621),i=n.n(o),a=n(14841),l=n.n(a),u=n(264721),c=n.n(u),s=function(e,t,n,o){var i=e;isNaN(parseFloat(e))&&(i=r.hexToHsv(e)[0]);var a=.5/(n-1),l=t/(n-1),u=[];1===n&&(a=.5,l=t/2);for(var c=0;c<n;c++){var s=i+c*l-t/2,p=a*c+.3,d=p;o&&(s=o.h||s,p=o.s||p,d=o.v||d),u.push(r.hsvToHex(s,p,d,c))}return u},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"red";return i()(e).toHexString()},d=function(e,t,n){var r=i()(e);return e&&r.setAlpha(l()(void 0!==t?t:r.getAlpha())).toRgbString()||n},f=function e(t){var n=Math.round,o=Math.random,i=[n(255*o()),n(255*o()),n(255*o())],a=r.rgbToHex(i);if(t)for(;c()(t,a)||"#000000"===a||"#FFFFFF"===a;)e(t);return a};r={decToHex:function(e){var t="0123456789ABCDEF",n=parseInt(e,10);return n=isNaN(n)?0:n,t.charAt(((n=n>255||n<0?0:n)-n%16)/16)+t.charAt(n%16)},rgbToHex:function(e,t,n){return e instanceof Array?r.rgbToHex(e[0],e[1],e[2]):"#"+r.decToHex(e)+r.decToHex(t)+r.decToHex(n)},realToDec:function(e){return Math.min(255,Math.round(256*e))},rgbToHsv:function(e,t,n){if(e instanceof Array)return r.rgbToHsv(e[0],e[1],e[2]);var o,i,a,l,u,c=e/255,s=t/255,p=n/255;switch(o=Math.min(Math.min(c,s),p),a=(i=Math.max(Math.max(c,s),p))-o,i){case o:l=0;break;case c:l=60*(s-p)/a,s<p&&(l+=360);break;case s:l=60*(p-c)/a+120;break;case p:l=60*(c-s)/a+240}return u=0===i?0:1-o/i,[Math.round(l),u,i]},distributedColorsHEX:function(e){for(var t=360/(e-1),n=[],o=function e(t,n,o){var i=e(t,n,o);return r.rgbToHex(i)},i=0;i<e;i++)n.push(o(t*i,.57,.63));return n},sameToneRangeColors:s,hsvToRgb:function(e,t,n){if(e instanceof Array)return r.hsvToRgb(e[0],e[1],e[2]);var o,i,a,l=Math.floor(e/60%6),u=e/60-l,c=n*(1-t),s=n*(1-u*t),p=n*(1-(1-u)*t);switch(l){case 0:o=n,i=p,a=c;break;case 1:o=s,i=n,a=c;break;case 2:o=c,i=n,a=p;break;case 3:o=c,i=s,a=n;break;case 4:o=p,i=c,a=n;break;case 5:o=n,i=c,a=s}return[r.realToDec(o),r.realToDec(i),r.realToDec(a)]},hsvToHex:function(e,t,n){var o=r.hsvToRgb(e,t,n);return r.rgbToHex(o)},hexToHsv:function(e){var t=e;if(t.length>0){"#"===t[0]&&(t=e.substring(1));var n=r.hexToRgb(t);return r.rgbToHsv(n)}return null},hexToRgb:function(e){var t,n,r,o=e;return"#"===o.charAt(0)&&(o=e.substring(1)),t=o.charAt(0)+o.charAt(1),n=o.charAt(2)+o.charAt(3),r=o.charAt(4)+o.charAt(5),[parseInt(t,16),parseInt(n,16),parseInt(r,16)]},colorToHexStr:p,colorToRgbaStr:d,generateRandomHexColor:f}},629859:(e,t,n)=>{"use strict";n.d(t,{n0:()=>s,sc:()=>p});var r=n(909041),o=n(689265),i=n.n(o),a=n(717247),l=n.n(a),u=function(e){var t=void 0;if(e instanceof HTMLAnchorElement){var n={};if(e.dataset&&void 0!==e.dataset.mention)n.url=e.href,n.text=e.innerHTML,n.value=e.dataset.value,t=r.Entity.__create("MENTION","IMMUTABLE",n);else{n.url=e.getAttribute&&e.getAttribute("href")||e.href,n.title=e.innerHTML,n.targetOption=e.target;var o=e.getAttribute&&e.getAttribute("data-geostory-interaction-type"),i=e.getAttribute&&e.getAttribute("data-geostory-interaction-params"),a=e.getAttribute&&e.getAttribute("data-geostory-interaction-name"),l={};a&&i&&o&&(l["data-geostory-interaction-type"]=o,l["data-geostory-interaction-params"]=i,l["data-geostory-interaction-name"]=a),n.attributes=l,t=r.Entity.__create("LINK","MUTABLE",n)}}return t},c=function(e,t){if("MENTION"===e.type)return'< href="'.concat(e.data.url,'" class="wysiwyg-mention" data-mention data-value="').concat(e.data.value,'">').concat(t,"</a>");if("LINK"===e.type){var n=e.data.targetOption||"_self",r=e.data.attributes;return r&&r["data-geostory-interaction-type"]?'<a data-geostory-interaction-name="'.concat(r["data-geostory-interaction-name"],'" data-geostory-interaction-type="').concat(r["data-geostory-interaction-type"],'" data-geostory-interaction-params="').concat(r["data-geostory-interaction-params"],"\" onclick=\"__geostory_interaction(type='scrollTo', '").concat(r["data-geostory-interaction-params"],"')\">").concat(t,"</a>"):'<a href="'.concat(e.data.url,'" target="').concat(n,'">').concat(t,"</a>")}if("IMAGE"===e.type){var o=e.data.alignment,i=o&&"none"!==o?"float: ".concat(o,";"):"display: block; margin: 0 auto 0 auto;";return'<img title="'.concat(e.data.src,'" src="').concat(e.data.src,'" alt="').concat(e.data.alt||" ",'" style="height: ').concat(e.data.height,"; width: ").concat(e.data.width,"; ").concat(i,'"/>')}return"EMBEDDED_LINK"===e.type?'<iframe width="'.concat(e.data.width,'" height="').concat(e.data.height,'" src="').concat(e.data.src,'" frameBorder="0"></iframe>'):t},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=l()(e,null,u),n=r.ContentState.createFromBlockArray(t.contentBlocks);return r.EditorState.createWithContent(n)},p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e){var n=1!==(0,r.convertToRaw)(e.getCurrentContent()).blocks.length||(0,r.convertToRaw)(e.getCurrentContent()).blocks[0].text,o=i()((0,r.convertToRaw)(e.getCurrentContent()),null,null,c);return n?o:t}return t}},577215:(e,t,n)=>{"use strict";n.d(t,{VZ:()=>y,oL:()=>v,F0:()=>b,cP:()=>g,Br:()=>h,rD:()=>E});var r=n(944908),o=n.n(r),i=n(513218),a=n.n(i),l=n(984596),u=n.n(l),c=n(945402),s=n(916651);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=p(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==p(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=["image/png","image/gif","image/jpeg","image/png8","image/png; mode=8bit","image/png; mode=24bit","image/vnd.jpeg-png","image/vnd.jpeg-png8"],v=function(){return o()(Object.values((0,c.eq)()))},b=function(e){return y.includes(e)},g=function(e){return v().includes(e)},h=function(e){var t,n,r,o,i;return a()(e)?{capabilities:e,description:e.Abstract,boundingBox:null!=e&&e.EX_GeographicBoundingBox?{minx:null===(t=e.EX_GeographicBoundingBox)||void 0===t?void 0:t.westBoundLongitude,miny:null===(n=e.EX_GeographicBoundingBox)||void 0===n?void 0:n.southBoundLatitude,maxx:null===(r=e.EX_GeographicBoundingBox)||void 0===r?void 0:r.eastBoundLongitude,maxy:null===(o=e.EX_GeographicBoundingBox)||void 0===o?void 0:o.northBoundLatitude}:null==e||null===(i=e.LatLonBoundingBox)||void 0===i?void 0:i.$,availableStyles:(null==e?void 0:e.Style)&&u()(e.Style).map((function(e){return f(f(f({name:e.Name},e.Title&&{title:e.Title}),e.Abstract&&{_abstract:e.Abstract}),e.LegendURL&&{legendURL:u()(e.LegendURL).map((function(e){var t,n,r,o,i,a;return f({width:null!=e&&null!==(t=e.$)&&void 0!==t&&t.width?parseFloat(e.$.width):void 0,height:null!=e&&null!==(n=e.$)&&void 0!==n&&n.height?parseFloat(e.$.height):void 0,format:null==e?void 0:e.Format},(null==e||null===(r=e.OnlineResource)||void 0===r||null===(o=r.$)||void 0===o?void 0:o["xlink:type"])&&(null==e||null===(i=e.OnlineResource)||void 0===i||null===(a=i.$)||void 0===a?void 0:a["xlink:href"])&&{onlineResource:{type:e.OnlineResource.$["xlink:type"],href:e.OnlineResource.$["xlink:href"]}})}))})}))}:{}},E=function(e){var t=e.tileGrids,n=void 0===t?[]:t,r=e.projection,o=e.tileSize,i=void 0===o?256:o;return n.find((function(e){var t,n,o;return(0,s.normalizeSRS)(e.crs)===(0,s.normalizeSRS)(r)&&!(((null===(t=e.tileSizes)||void 0===t||null===(n=t[0])||void 0===n?void 0:n[0])||(null===(o=e.tileSize)||void 0===o?void 0:o[0]))!==i)}))}}}]);