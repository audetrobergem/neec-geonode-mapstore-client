(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[55563],{965539:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(124852),a=r.n(n);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){var n,a,l,i;n=e,a=t,l=r[t],i=function(e,t){if("object"!=o(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(a),(a="symbol"==o(i)?i:i+"")in n?Object.defineProperty(n,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):n[a]=l})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const s=function(e){var t=e.id,r=e.children,n=e.header,o=e.footer,l=e.columns,s=e.height,c=e.style,u=void 0===c?{}:c,f=e.className,y=e.bodyClassName,d=void 0===y?"ms2-border-layout-body":y;return a().createElement("div",{id:t,className:f,style:i({display:"flex",flexDirection:"column",width:"100%",height:"100%",overflow:"hidden"},u)},n,a().createElement("div",{className:d,style:{display:"flex",flex:1,overflowY:"auto"}},a().createElement("main",{className:"ms2-border-layout-content",style:{flex:1,overflowX:"hidden"}},s?a().createElement("div",{style:{height:s}},r):r),s?a().createElement("div",{style:{height:s}},l):l),o)}},807472:(e,t,r)=>{"use strict";r.d(t,{Z:()=>E});var n=r(727418),a=r.n(n),o=r(675263),l=r.n(o),i=r(124852),s=r.n(i),c=r(485294),u=r.n(c),f=r(472986),y=r.n(f),d=r(805346);function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){w(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,j(n.key),n)}}function g(e,t,r){return t=O(t),function(e,t){if(t&&("object"===m(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,h()?Reflect.construct(t,r||[],O(e).constructor):t.apply(e,r))}function h(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(h=function(){return!!e})()}function O(e){return O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},O(e)}function S(e,t){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},S(e,t)}function w(e,t,r){return(t=j(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function j(e){var t=function(e,t){if("object"!=m(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==m(t)?t:t+""}var N=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return w(e=g(this,t,[].concat(n)),"renderLoading",(function(){return e.props.maskLoading?s().createElement("div",{style:{width:"100%",height:"100%",position:"absolute",overflow:"visible",margin:"auto",verticalAlign:"center",left:"0",background:"rgba(255, 255, 255, 0.5)",zIndex:2}},s().createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -40%)"}},s().createElement(d.Z,{msgId:"loading"}),s().createElement(y(),{spinnerName:"circle",noFadeIn:!0,overrideSpinnerClassName:"spinner"}))):null})),w(e,"renderRole",(function(t){return s().Children.toArray(e.props.children).filter((function(e){return e.props.role===t}))})),w(e,"hasRole",(function(t){return s().Children.toArray(e.props.children).filter((function(e){return e.props.role===t})).length>0})),w(e,"onClickOut",(function(t){e.props.onClickOut&&e.mask===t.target&&e.props.onClickOut(t)})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this,t=s().createElement("div",{id:this.props.id,style:p({},this.props.style),className:"".concat(this.props.draggable?"modal-dialog-draggable":""," ").concat(this.props.className," modal-dialog-container")},s().createElement("div",{className:this.props.headerClassName+" draggable-header"},this.renderRole("header")),s().createElement("div",{className:this.props.bodyClassName},this.renderLoading(),this.renderRole("body")),this.hasRole("footer")?s().createElement("div",{className:this.props.footerClassName},this.renderRole("footer")):s().createElement("span",null)),r=this.props.draggable?s().createElement(u(),{defaultPosition:this.props.start,bounds:this.props.bounds,handle:".draggable-header, .draggable-header *"},t):t,n=a()({},this.props.style.display?{display:this.props.style.display}:{},this.props.backgroundStyle);return this.props.modal?s().createElement("div",{ref:function(t){e.mask=t},onClick:this.onClickOut,style:n,className:"fade in modal "+this.props.containerClassName,role:"dialog"},r):r}}])&&v(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(s().Component);w(N,"propTypes",{id:l().string.isRequired,style:l().object,backgroundStyle:l().object,className:l().string,maskLoading:l().bool,containerClassName:l().string,headerClassName:l().string,bodyClassName:l().string,footerClassName:l().string,onClickOut:l().func,modal:l().bool,start:l().object,draggable:l().bool,bounds:l().oneOfType([l().string,l().object])}),w(N,"defaultProps",{style:{},backgroundStyle:{background:"rgba(0,0,0,.5)"},start:{x:0,y:150},className:"modal-dialog modal-content",maskLoading:!1,containerClassName:"",headerClassName:"modal-header",bodyClassName:"modal-body",footerClassName:"modal-footer",modal:!1,draggable:!0,bounds:"parent"});const E=N},975480:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(124852),a=r.n(n);const o=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).style,t=void 0===e?{display:"inline-block"}:e;return a().createElement("div",{style:t,className:"mapstore-inline-loader"})}},694745:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(124852),a=r.n(n),o=r(294184),l=r.n(o),i=r(480681),s=r(807472),c=r(80717),u=r(867076),f=r(819081),y=r.n(f),d=r(975480),m={xs:" ms-xs",sm:" ms-sm",md:"",lg:" ms-lg"},b={className:{vertical:" ms-fullscreen-v",horizontal:" ms-fullscreen-h",full:" ms-fullscreen"},glyph:{expanded:{vertical:"resize-vertical",horizontal:"resize-horizontal",full:"resize-small"},collapsed:{vertical:"resize-vertical",horizontal:"resize-horizontal",full:"resize-full"}}};const p=(0,u.withState)("fullscreenState","onFullscreen",(function(e){var t=e.initialFullscreenState;return void 0===t?"collapsed":t}))((function(e){var t=e.show,r=void 0!==t&&t,n=e.loading,o=e.loadingText,u=e.onClose,f=void 0===u?function(){}:u,p=e.title,v=void 0===p?"":p,g=e.clickOutEnabled,h=void 0===g||g,O=e.showClose,S=void 0===O||O,w=e.disabledClose,j=void 0!==w&&w,N=e.showFullscreen,E=void 0!==N&&N,P=e.fullscreenType,T=void 0===P?"full":P,k=e.buttons,C=void 0===k?[]:k,D=e.size,U=void 0===D?"":D,x=e.bodyClassName,M=void 0===x?"":x,I=e.children,W=e.draggable,A=void 0!==W&&W,F=e.fullscreenState,V=e.onFullscreen,z=e.fade,Z=void 0!==z&&z,L=e.fitContent,$=e.modalClassName,_=void 0===$?"":$,R=e.dialogClassName,B=void 0===R?"":R,X=e.enableFooter,J=void 0===X||X,G=m[U]||"",K=E&&"expanded"===F&&b.className[T]||"",q=r?a().createElement("div",{className:"modal-fixed ".concat(_," ")+(A?"ms-draggable":"")},a().createElement(s.Z,{id:"ms-resizable-modal",style:{display:"flex"},onClickOut:h?f:function(){},containerClassName:"ms-resizable-modal",draggable:A,modal:!0,className:l()("modal-dialog modal-content",G,K,B,{"ms-fit-content":L})},a().createElement("span",{role:"header"},a().createElement("h4",{className:"modal-title"},a().createElement("div",{className:"ms-title"},v),E&&b.className[T]&&a().createElement(i.Glyphicon,{className:"ms-header-btn",onClick:function(){return V("expanded"===F?"collapsed":"expanded")},glyph:b.glyph[F][T]}),S&&f&&a().createElement(i.Glyphicon,{glyph:"1-close",className:"ms-header-btn",onClick:f,disabled:j}))),a().createElement("div",{role:"body",className:M},I),J&&a().createElement("div",{style:{display:"flex"},role:"footer"},a().createElement("div",{className:"ms-resizable-modal-loading-spinner-container"},n?a().createElement(d.Z,null):null),a().createElement("div",{className:"ms-resizable-modal-loading-text"},n?o:null),a().createElement(c.Z,{buttons:C})))):null;return Z?a().createElement(y(),{transitionName:"ms-resizable-modal-fade",transitionEnterTimeout:300,transitionLeaveTimeout:300},q):q}))},394943:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>te});var n=r(49977),a=r.n(n),o=r(227361),l=r.n(o),i=r(91175),s=r.n(i),c=r(701469),u=r.n(c),f=r(941106),y=r.n(f),d=r(545578),m=r.n(d),b=r(197395),p=r(580416),v=r(460604),g=r(690825),h=r(680833),O=r(782904),S=r(624262),w=r(396909),j=r(409082),N=r(375875),E=r.n(N),P=r(984596),T=r.n(P),k=r(99009);function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function D(e){return function(e){if(Array.isArray(e))return U(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return U(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?U(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function M(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){var n,a,o,l;n=e,a=t,o=r[t],l=function(e,t){if("object"!=C(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=C(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(a),(a="symbol"==C(l)?l:l+"")in n?Object.defineProperty(n,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[a]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const I=function(e,t,r){var n=e+"layers/"+t+".json";return E().get(n,r).then((function(e){return e.data&&e.data.layer}))},W=function(e){var t=e.baseUrl,r=e.layerName,n=e.styles,a=void 0===n?[]:n,o=e.options,l=void 0===o?{}:o,i=(0,k.$N)(r),s=i.name,c=i.workspace,u="".concat(t,"rest/").concat(c&&"workspaces/".concat(c,"/")||"","layers/").concat(s,".json");return E().get(u,l).then((function(e){var t=e.data.layer||{},r=t.styles&&t.styles.style&&T()(t.styles.style)||[],n=a.map((function(e){return e.name})),o=r.filter((function(e){var t=e.name;return-1===n.indexOf(t)}));return{layer:M(M({},t),{},{styles:{"@class":"linked-hash-set",style:o}})}})).then((function(e){return E().put(u,e).then((function(){return e}))}))},A=function(e){var t=e.baseUrl,r=e.layerName,n=e.styles,a=void 0===n?[]:n,o=e.options,l=void 0===o?{}:o,i=(0,k.$N)(r),s=i.name,c=i.workspace,u="".concat(t,"rest/").concat(c&&"workspaces/".concat(c,"/")||"","layers/").concat(s,".json");return E().get(u,l).then((function(e){var t=e.data.layer||{},r=t.styles&&t.styles.style&&T()(t.styles.style)||[];return{layer:M(M({},t),{},{styles:{"@class":"linked-hash-set",style:[].concat(D(r),D(a))}})}})).then((function(e){return E().put(u,e).then((function(){return e}))}))},F=function(e){var t=e.baseUrl,r=e.layerName,n=e.styleName,a=e.options,o=void 0===a?{}:a,l=(0,k.$N)(r),i=l.name,s=l.workspace,c="".concat(t,"rest/").concat(s&&"workspaces/".concat(s,"/")||"","layers/").concat(i,".json");return E().get(c,o).then((function(e){var t=e.data.layer||{},r=t.styles&&t.styles.style&&T()(t.styles.style)||[],a=t.defaultStyle||{},o=m()([a].concat(D(r)),"name");return{layer:M(M({},t),{},{defaultStyle:{name:n},styles:{"@class":"linked-hash-set",style:o}})}})).then((function(e){return E().put(c,e).then((function(){return e}))}))};var V=r(893222),z=r(675110),Z=r(607147),L=r(108954);function $(e){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$(e)}var _=["name","workspace"];function R(e){return function(e){if(Array.isArray(e))return K(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||G(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function X(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?B(Object(r),!0).forEach((function(t){var n,a,o,l;n=e,a=t,o=r[t],l=function(e,t){if("object"!=$(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=$(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(a),(a="symbol"==$(l)?l:l+"")in n?Object.defineProperty(n,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[a]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function J(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,l,i=[],s=!0,c=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=o.call(r)).done)&&(i.push(n.value),i.length!==t);s=!0);}catch(e){c=!0,a=e}finally{try{if(!s&&null!=r.return&&(l=r.return(),Object(l)!==l))return}finally{if(c)throw a}}return i}}(e,t)||G(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(e,t){if(e){if("string"==typeof e)return K(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?K(e,t):void 0}}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var q=function(e){var t=e.status,r=e.styleName,n=e.baseUrl;return"edit"===t?a().Observable.defer((function(){return j.ZP.getStyleCodeByName({baseUrl:n,styleName:r}).then((function(e){return(0,k.co)(e).then((function(t){return[e,t]})).catch((function(){return[e,!1]}))}))})).switchMap((function(e){var t,r,n=J(e,2),o=n[0],l=n[1];return a().Observable.of((0,w.FU)({languageVersion:o.languageVersion,code:o.code,templateId:"",format:o.format,init:!0}),(0,w.bB)(l?{editorType:"textarea",styleJSON:null}:{editorType:(null==o||null===(t=o.metadata)||void 0===t?void 0:t.msEditorType)||"textarea",styleJSON:null==o||null===(r=o.metadata)||void 0===r?void 0:r.msStyleJSON}))})).catch((function(e){return a().Observable.of((0,w.Fe)("edit",e))})):a().Observable.empty()},H=function(e){var t=e.styleName,r=e.baseUrl,n=e.onSuccess$,o=e.onError$;return a().Observable.defer((function(){return j.ZP.deleteStyle({baseUrl:r,styleName:t})})).switchMap((function(){return n||a().Observable.empty()})).catch((function(){return o||a().Observable.empty()}))},Y=function(e){var t=e.baseUrl,r=e.update,n=e.code,o=e.format,l=e.styleName,i=e.status,s=e.languageVersion,c=e.options,f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return a().Observable.defer((function(){return j.ZP[r?"updateStyle":"createStyle"]({baseUrl:t,code:n,format:o,styleName:l,languageVersion:s,options:c})})).switchMap((function(){var e;return u()(f)&&(e=a().Observable).of.apply(e,[(0,w.Wm)()].concat(R(f)))||f})).catch((function(e){var t;return(t=a().Observable).of.apply(t,[(0,w.Fe)(i,e),(0,w.Wm)()].concat(R(y)))})).startWith((0,w.pt)(i))};function Q(e,t){return!t&&e.availableStyles?a().Observable.of((0,p.Xy)({availableStyles:e.availableStyles}),(0,w.Wm)()):(0,h.kB)(e).switchMap((function(t){var r=(0,S.IA)(t);return r.availableStyles?a().Observable.of((0,p.Xy)({availableStyles:r.availableStyles}),(0,p.tV)(e.id,"layer",X({},r)),(0,w.Wm)()):a().Observable.of((0,w.Fe)("availableStyles",{status:401}),(0,w.Wm)())})).catch((function(e){var t=-1!==e.message.indexOf("could not be unmarshalled")?"parsingCapabilities":"global";return a().Observable.of((0,w.Fe)(t,e),(0,w.Wm)())})).startWith((0,w.pt)("global"))}function ee(e){return r.e(2568).then(r.t.bind(r,402568,23)).then((function(t){return(0,t.default)(e)}))}const te={toggleStyleEditorEpic:function(e,t){return e.ofType(w.vZ).filter((function(){return!(0,V.aN)(t.getState())})).switchMap((function(e){var r=t.getState(),n=(0,z.jN)(r),o=!!l()(n,"options.availableStyles");if(!e.enabled)return function(e){var t=(0,V.gc)(e),r=(0,V.Z0)(e).baseUrl,n=void 0===r?"":r;return a().Observable.of((0,w.l1)(),(0,v.fU)({owner:k.s1})).merge(t?H({styleName:t,baseUrl:n}):a().Observable.empty())}(r);if((0,V.ji)(r)&&o)return a().Observable.empty();var i=e.layer||(0,z.Iz)(r);if(!i||i&&!i.url)return a().Observable.empty();var s=(0,S.Nd)(i);if(!s)return Q(i);var c=i.url.split(s),u="".concat(c[0]).concat(s),f=(0,V.Z0)(r);return a().Observable.concat(a().Observable.of((0,w.pt)("global"),(0,w.l1)()),a().Observable.defer((function(){return(0,L.eb)({baseUrl:u,styleService:f})})).switchMap((function(e){return a().Observable.concat(a().Observable.of((0,w.E0)(e)),a().Observable.defer((function(){return I(u+"rest/",i.name)})).switchMap((function(e){var t,r=(null==e||null===(t=e.styles)||void 0===t?void 0:t.style)||[],n=m()([e.defaultStyle].concat(R(r)),"name");return 0===n.length?a().Observable.of((0,w.Fe)("availableStyles",{status:401}),(0,w.Wm)()):a().Observable.defer((function(){return Promise.all([j.ZP.getStylesInfo({baseUrl:u,styles:n}),(0,h.kB)(i).toPromise().then((function(e){return e})).catch((function(){return null}))])})).switchMap((function(e){var t=J(e,2),r=t[0],n=t[1],o=n&&(0,S.IA)(n),l=((null==o?void 0:o.availableStyles)||[]).map((function(e){return X(X({},e),(0,k.$N)(e.name))})).filter((function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).name})),s=l.length>0?r.map((function(e){var t=(0,k.$N)(e.name),r=l.find((function(e){return e.name===t.name}))||{},n=(r.name,r.workspace,function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(r,_));return n?X(X({},n),e):e})):r;return a().Observable.of((0,v.W)(i.id,k.s1,"override",{}),(0,p.Xy)({availableStyles:s}),(0,p.tV)(i.id,"layer",{availableStyles:s}),(0,w.Wm)())}))})).catch((function(){return Q(i,!0)})))})))}))},updateLayerOnStatusChangeEpic:function(e,t){return e.ofType(w.g$).filter((function(e){return!!e.status})).switchMap((function(r){var n=t.getState(),o=(0,V.Vf)(n),l=o&&o.params||{},i=o&&!o.describeFeatureType&&(0,g.H)(o.url,o,{query:l}),s=(0,V.i7)(n)||o.availableStyles&&o.availableStyles[0]&&o.availableStyles[0].name,c=(0,V.Z0)(n).baseUrl,u=void 0===c?"":c;return i&&function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return!0},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){};return(r=a().Observable).of.apply(r,[(0,w.pt)("global")].concat(R(o))).merge(e.ofType(p.K$).filter((function(){var e=(0,z.Iz)(t.getState());return n(e)})).switchMap((function(){var e=(0,z.Iz)(t.getState());return l(e)})).catch((function(e){return a().Observable.of((0,w.Fe)("global",e),(0,w.Wm)())})).takeUntil(e.ofType(w.E2)))}(e,t,(function(e){return e&&e.describeLayer}),[i],(function(e){return a().Observable.concat(q({status:r.status,styleName:s,baseUrl:u}),a().Observable.of((0,w.xR)(!(e&&e.describeLayer&&401===e.describeLayer.error)),(0,w.Wm)()))}))||q({status:r.status,styleName:s,baseUrl:u})}))},updateTemporaryStyleEpic:function(e,t){return e.ofType(w.TB,w.DX).switchMap((function(e){var r=t.getState(),n=(0,V.gc)(r),a=(0,V.Vf)(r),o=(0,k.$N)(a.name).workspace,l=e.format&&e.format!==(0,V.iB)(r),i=n||"".concat(o?"".concat(o,":"):"").concat((0,k.Vi)()),s=e.format||(0,V.iB)(r),c=(0,V.ex)(r),u=(0,V.Z0)(r).baseUrl,f=void 0===u?"":u,y=(0,V.j5)(r),d="sld"===s&&(e.code||"").match(/version=\"1\.1\.0\"/)&&{version:"1.1.0"}||e.format&&!e.languageVersion&&{version:"1.0.0"}||e.languageVersion||{version:"1.0.0"},m=y.version!==d.version?{params:{raw:!0}}:{},p=d,g=function(t){return Y({update:!0,code:e.code,format:s,styleName:t,status:c,baseUrl:f,languageVersion:p,options:m},[(0,v.B1)(k.s1,[{style:t,_v_:Date.now(),singleTile:!0}]),(0,w.k5)({temporaryId:t,templateId:e.templateId||"",code:e.code,format:s,init:e.init,languageVersion:p})],"edit"===c?[]:[(0,b.vU)({title:"styleeditor.updateTmpErrorTitle",message:"styleeditor.updateTmpStyleErrorMessage",uid:"updateTmpStyleError",autoDismiss:5})])},h=("css"===s?"* { stroke: #888888; }":"sld"===s&&'<?xml version="1.0" encoding="ISO-8859-1"?>\n<StyledLayerDescriptor version="1.0.0"\n\t\txsi:schemaLocation="http://www.opengis.net/sld StyledLayerDescriptor.xsd"\n\t\txmlns="http://www.opengis.net/sld"\n\t\txmlns:ogc="http://www.opengis.net/ogc"\n\t\txmlns:xlink="http://www.w3.org/1999/xlink"\n\t\txmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">\n\n\t<NamedLayer>\n\t\t<Name>Default Style</Name>\n\t\t<UserStyle>\n\t\t\t<Title>${styleTitle}</Title>\n\t\t\t<Abstract>${styleAbstract}</Abstract>\n\t\t\t<FeatureTypeStyle>\n\t\t\t\t<Rule>\n\t\t\t\t\t<Name>Rule Name</Name>\n\t\t\t\t\t<Title>Rule Title</Title>\n\t\t\t\t\t<Abstract>Rule Abstract</Abstract>\n\t\t\t\t\t<LineSymbolizer>\n\t\t\t\t\t\t<Stroke>\n\t\t\t\t\t\t\t<CssParameter name="stroke">#0000FF</CssParameter>\n\t\t\t\t\t\t</Stroke>\n\t\t\t\t\t\t</LineSymbolizer>\n\t\t\t\t\t<PointSymbolizer>\n\t\t\t\t\t\t<Graphic>\n\t\t\t\t\t\t\t<Mark>\n\t\t\t\t\t\t\t\t<WellKnownName>square</WellKnownName>\n\t\t\t\t\t\t\t\t<Fill>\n\t\t\t\t\t\t\t\t\t<CssParameter name="fill">#FF0000</CssParameter>\n\t\t\t\t\t\t\t\t</Fill>\n\t\t\t\t\t\t\t</Mark>\n\t\t\t\t\t\t</Graphic>\n\t\t\t\t\t</PointSymbolizer>\n\t\t\t\t\t</Rule>\n\t\t\t\t</FeatureTypeStyle>\n\t\t\t</UserStyle>\n\t\t</NamedLayer>\n\t</StyledLayerDescriptor>\n')||"",O=function(e){return Y({code:h,format:s,styleName:e,status:c,baseUrl:f},g(e),[(0,b.vU)({title:"styleeditor.createTmpErrorTitle",message:"styleeditor.createTmpStyleErrorMessage",uid:"createTmpStyleError",autoDismiss:5}),(0,w.k5)({temporaryId:null,templateId:"",code:"",format:"",init:"",languageVersion:null})])};return l&&n&&H({styleName:n,baseUrl:f,onSuccess$:O("".concat(o?"".concat(o,":"):"").concat((0,k.Vi)())),onError$:g(i)})||n&&g(i)||O(i)}))},createStyleEpic:function(e,t){return e.ofType(w.vA).switchMap((function(e){var r=t.getState(),n=(0,V.gB)(r),o=(0,V.Vf)(r),l=(0,k.$N)(o.name).workspace,i="".concat(l?"".concat(l,":"):"").concat((0,k.nK)(e.settings)),c=(0,V.iB)(r),u=e.settings||{},f=u.title,d=void 0===f?"":f,m=u._abstract,g=void 0===m?"":m,h=(0,V.Z0)(r).baseUrl,O=void 0===h?"":h,S=X({title:d,description:g},{msStyleJSON:null,msEditorType:"visual"}),N=y()(n)({styleTitle:d,styleAbstract:g});return a().Observable.defer((function(){return ee(N).then((function(e){return j.ZP.createStyle({baseUrl:O,code:N,format:c,styleName:i,metadata:X(X({},S),{},{msMD5Hash:e})})}))})).switchMap((function(){return a().Observable.of((0,v.B1)(k.s1,[{}]),(0,p.Xy)({style:i||""},!0),(0,w.Nf)(""),(0,w.Wm)()).merge(function(e){var t=e.baseUrl,r=e.layer,n=e.styleName,o=e.format,l=e.title,i=e._abstract,c=e.metadata;return a().Observable.defer((function(){return A({baseUrl:t,layerName:r.name,styles:[{name:n}]})})).switchMap((function(){var e=X({filename:"".concat(n,".").concat(o),format:o,name:n,title:l,_abstract:i},c&&{metadata:c}),t=s()(r.availableStyles),u=r.availableStyles&&[t,e].concat(R(r.availableStyles.filter((function(e,t){return t>0}))))||[e];return a().Observable.of((0,p.Xy)({availableStyles:u},!0),(0,w.Wm)())})).catch((function(){return a().Observable.of((0,w.Wm)())})).startWith((0,w.pt)("global"))}({layer:o,styleName:i,format:c,title:d,_abstract:g,baseUrl:O,metadata:S}))})).catch((function(e){return a().Observable.of((0,w.Fe)("",e),(0,w.Wm)(),(0,b.vU)({title:"styleeditor.createStyleErrorTitle",message:"styleeditor.createStyleErrorMessage",uid:"createStyleError",autoDismiss:5}))})).startWith((0,w.pt)(""))}))},updateStyleCodeEpic:function(e,t){return e.ofType(w.ch).switchMap((function(){var e=t.getState(),r=(0,V.iB)(e),n=(0,V.j5)(e),o=(0,V.gB)(e),l=(0,V.i7)(e),i=(0,V.gc)(e),s=(0,V.Vf)(e),c=(0,V.Z0)(e).baseUrl,u=void 0===c?"":c,f=(0,V.WW)(e)||{},y={msStyleJSON:f.styleJSON||null,msEditorType:f.editorType},d=(s.availableStyles||[]).map((function(e){return e.name===l?X(X({},e),{},{metadata:X(X({},e.metadata),y)}):e}));return a().Observable.defer((function(){return ee(o).then((function(e){return j.ZP.updateStyle({baseUrl:u,code:o,format:r,styleName:l,languageVersion:n,options:{params:{raw:!0}},metadata:X(X({},y),{},{msMD5Hash:e})})}))})).switchMap((function(){return a().Observable.of((0,w.Wm)(),(0,p.tV)(s.id,"layer",{_v_:Date.now(),availableStyles:d}),(0,p.Xy)({availableStyles:d}),(0,w.k5)({temporaryId:i,templateId:"",code:o,format:r,init:!0,languageVersion:n}),(0,b.Vp)({title:"styleeditor.savedStyleTitle",message:"styleeditor.savedStyleMessage",uid:"savedStyleTitle",autoDismiss:5}))})).catch((function(e){return a().Observable.of((0,w.Fe)("global",e),(0,w.Wm)(),(0,b.vU)({title:"styleeditor.updateStyleErrorTitle",message:"styleeditor.updateStyleErrorMessage",uid:"updateStyleError",autoDismiss:5}))})).startWith((0,w.pt)("global"))}))},deleteStyleEpic:function(e,t){return e.ofType(w.j1).filter((function(e){return!!e.styleName})).switchMap((function(e){var r=e.styleName,n=t.getState(),o=(0,V.Vf)(n),l=(0,V.Z0)(n).baseUrl,i=void 0===l?"":l,s=(0,Z.tL)(n),c=(0,Z.Gd)(n);return a().Observable.defer((function(){return W({baseUrl:i,layerName:o.name,styles:[{name:r}]})})).switchMap((function(){var e=o.availableStyles&&o.availableStyles.filter((function(e){return e.name!==r}))||[];return a().Observable.concat(a().Observable.of((0,p.Xy)({style:"",availableStyles:e},!0),(0,w.Wm)(),(0,O.Xg)("layersettings","originalSettings",X(X({},s),{},{style:""})),(0,O.Xg)("layersettings","initialSettings",X(X({},c),{},{style:""}))),H({styleName:r,baseUrl:i,onSuccess$:a().Observable.of((0,b.Vp)({title:"styleeditor.deletedStyleSuccessTitle",message:"styleeditor.deletedStyleSuccessMessage",uid:"deletedStyleSuccess",autoDismiss:5})),onError$:a().Observable.of((0,b.vU)({title:"styleeditor.deletedStyleErrorTitle",message:"styleeditor.deletedStyleErrorMessage",uid:"deletedStyleError",autoDismiss:5}))}))})).catch((function(){return a().Observable.of((0,w.Wm)())})).startWith((function(){return a().Observable.of((0,w.pt)("global"))}))}))},setDefaultStyleEpic:function(e,t){return e.ofType(w.rb).switchMap((function(){var e=t.getState(),r=(0,V.Z0)(e).baseUrl,n=void 0===r?"":r,o=(0,V.Vf)(e),l=(0,V.i7)(e);return a().Observable.defer((function(){return F({baseUrl:n,layerName:o.name,styleName:l})})).switchMap((function(){var e=o.availableStyles.filter((function(e){var t=e.name;return l===t})),t=o.availableStyles.filter((function(e){var t=e.name;return l!==t})),r=[].concat(R(e),R(t));return a().Observable.of((0,p.Xy)({availableStyles:r},!0),(0,b.Vp)({title:"styleeditor.setDefaultStyleSuccessTitle",message:"styleeditor.setDefaultStyleSuccessMessage",uid:"setDefaultStyleSuccess",autoDismiss:5}),(0,w.Wm)())})).startWith((0,w.pt)("global")).catch((function(){return a().Observable.of((0,b.vU)({title:"styleeditor.setDefaultStyleErrorTitle",message:"styleeditor.setDefaultStyleErrorMessage",uid:"setDefaultStyleError",autoDismiss:5}),(0,w.Wm)())}))}))}}},532244:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(396909),a=r(747037),o=r.n(a);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){var n;return n=function(e,t){if("object"!=l(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==l(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.wL:return s(s({},e),{},{service:t.service,canEdit:t.canEdit});case n.Nm:return s(s({},e),{},{canEdit:t.canEdit});case n.gF:return s(s({},e),{},{temporaryId:t.temporaryId,templateId:t.templateId,code:t.code,format:t.format,error:null,languageVersion:t.languageVersion,initialCode:t.init?t.code:e.initialCode});case n.g$:return""===t.status?s(s({},e),{},{status:t.status,code:"",templateId:"",initialCode:"",addStyle:!1,error:{}}):s(s({},e),{},{status:t.status});case n.dJ:return{service:e.service&&s({},e.service)||{},canEdit:e.canEdit,loading:e.loading};case n.uz:return s(s({},e),{},{addStyle:t.add});case n.lX:return s(s({},e),{},{loading:!t.status||t.status});case n.E2:return s(s({},e),{},{loading:!1,enabled:!0});case n.mF:var r,a,l,i=(null==t||null===(r=t.error)||void 0===r?void 0:r.statusText)||(null==t||null===(a=t.error)||void 0===a?void 0:a.message)||"",u=o()(null==t||null===(l=t.error)||void 0===l?void 0:l.messageId)&&{messageId:t.error.messageId},f=i.match(/line\s([\d]+)|column\s([\d]+)|lineNumber:\s([\d]+)|columnNumber:\s([\d]+)/g),y=f&&2===f.length&&f.reduce((function(e,t){var r=t.split(" "),n=r[0].replace(/Number:/g,""),a=parseFloat(r[1]);return n&&!isNaN(a)&&s(s({},e),{},c({},n,a))||s({},e)}),s({message:i},u))||s({message:i},u);return s(s({},e),{},{loading:!1,canEdit:!(t.error&&(401===t.error.status||403===t.error.status||t.error.message&&-1!==t.error.message.indexOf("could not be unmarshalled"))),error:s(s({},e.error),{},c({},t.status||"global",s({status:t.error&&t.error.status||400},y)))});case n.dk:return s(s({},e),{},{metadata:s(s({},e.metadata),t.metadata)});default:return e}}}}]);