(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[62104],{735563:(e,t,n)=>{"use strict";n.d(t,{Z:()=>T});var r=n(472500),o=n.n(r),i=n(701469),l=n.n(i),a=n(414293),u=n.n(a),c=n(727418),s=n.n(c),d=n(45697),f=n.n(d),p=n(124852),y=n.n(p),v=n(233044),m=n(805346);function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,P(r.key),r)}}function h(e,t,n){return t=E(t),function(e,t){if(t&&("object"==b(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,O()?Reflect.construct(t,n||[],E(e).constructor):t.apply(e,n))}function O(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(O=function(){return!!e})()}function E(e){return E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},E(e)}function w(e,t){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},w(e,t)}function j(e,t,n){return(t=P(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function P(e){var t=function(e,t){if("object"!=b(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=b(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==b(t)?t:t+""}var S=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return j(e=h(this,t,[].concat(r)),"state",{error:!1}),j(e,"onImgError",(function(){e.setState((function(){return{error:!0}}))})),j(e,"getScale",(function(e){if(e.scales&&void 0!==e.currentZoomLvl&&e.scaleDependent){var t,n=Math.round(e.currentZoomLvl),r=null!==(t=e.scales[n])&&void 0!==t?t:e.scales[e.scales.length-1];return Math.round(r)}return null})),j(e,"getUrl",(function(t,n){if(t.layer&&"wms"===t.layer.type&&t.layer.url){var r=t.layer,i=u()(n)?l()(r.url)&&Math.floor(Math.random()*r.url.length):n,a=l()(r.url)?r.url[i]:r.url.replace(/[?].*$/g,""),c=o().parse(a),d=(0,v.clearNilValuesForParams)(r.params),f=e.getScale(t),p=s()({},{service:"WMS",request:"GetLegendGraphic",format:"image/png",height:t.legendHeight,width:t.legendWidth,layer:r.name,style:r.style||null,version:r.version||"1.3.0",SLD_VERSION:"1.1.0",LEGEND_OPTIONS:t.legendOptions},r.legendParams||{},t.language&&r.localizedLayerStyles?{LANGUAGE:t.language}:{},(0,v.addAuthenticationToSLD)(d||{},t.layer),d&&d.SLD_BODY?{SLD_BODY:d.SLD_BODY}:{},null!==f?{SCALE:f}:{});return(0,v.addAuthenticationParameter)(a,p),o().format({host:c.host,protocol:c.protocol,pathname:c.pathname,query:p})}return""})),j(e,"validateImg",(function(t){t.height<=1&&t.width<=2&&e.onImgError()})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&w(e,t)}(t,e),n=t,r=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.state.error&&this.getUrl(e,0)!==this.getUrl(this.props,0)&&this.setState((function(){return{error:!1}}))}},{key:"render",value:function(){var e=this;return!this.state.error&&this.props.layer&&"wms"===this.props.layer.type&&this.props.layer.url?y().createElement("img",{onError:this.onImgError,onLoad:function(t){return e.validateImg(t.target)},src:this.getUrl(this.props),style:this.props.style}):y().createElement(m.Z,{msgId:"layerProperties.legenderror"})}}],r&&g(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(y().Component);j(S,"propTypes",{layer:f().object,legendHeight:f().number,legendWidth:f().number,legendOptions:f().string,style:f().object,currentZoomLvl:f().number,scales:f().array,scaleDependent:f().bool,language:f().string}),j(S,"defaultProps",{legendHeight:12,legendWidth:12,legendOptions:"forceLabels:on",style:{maxWidth:"100%"},scaleDependent:!0});const T=S},462104:(e,t,n)=>{"use strict";n.d(t,{d:()=>Et,Z:()=>wt});var r=n(124852),o=n.n(r),i=n(45697),l=n.n(i),a=n(624262);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}var c=["node","groupElement","layerElement"];function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=u(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==u(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e){var t=e.node,n=e.groupElement,i=e.layerElement,l=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,c);return n&&i?t.nodes?(0,r.cloneElement)(n,d({node:t,nodeType:l.nodeTypes.GROUP},l),o().createElement(p,{groupElement:n,layerElement:i})):(0,r.cloneElement)(i,d({node:t,nodeType:l.nodeTypes.LAYER},l)):null}p.propTypes={node:l().object,groupElement:l().element.isRequired,layerElement:l().element.isRequired,nodeTypes:l().object},p.defaultProps={node:{},nodeTypes:a.$P};const y=p;var v=n(815430),m=n(984596),b=n.n(m),g=n(313311),h=n.n(g),O=n(480681),E=n(590937),w=["children"];function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=e;if(arguments.length>2?arguments[2]:void 0){var r=e.split(".");n=r[r.length-1]}return"node-".concat(n.replace(/\.|\:| /g,"-")).concat(t?"-".concat(t):"")},S=(0,E.GR)("node",{drop:function(e){var t=e.sort,n=void 0===t?{}:t;null!=n&&n.drop&&n.drop()},hover:function(e,t){var n,r,o=e.sort,i=void 0===o?{}:o,l=function(e,t){var n=t.getItem(),r=e.id,o=e.parentId,i=e.index,l=e.position,a=n.containerNode,u=n.nodeTypes||{};if(r===n.id||!a)return null;var c=a.getAttribute("data-root-parent-id"),s=r||c,d=a.querySelector("[data-id=".concat(P(s,l,!0),"]")),f=a.querySelector("[data-id=".concat(P(n.id||c,n.position,!0),"]"));if(null==d||!d.getBoundingClientRect||null==f||!f.getBoundingClientRect)return null;var p=null==e?void 0:e.nodeType,y=d.getAttribute("data-node-id"),v=f.getAttribute("data-node-id"),m=f.getAttribute("data-parent-node-id")||c;if(n.id=v,n.parentId=m,y===v)return null;var b=d.getBoundingClientRect(),g=f.getBoundingClientRect().top,h=b.top,O=i,E=(b.bottom-b.top)/2,w=t.getClientOffset().y-b.top;if("before"===l&&m!==s)return[n.id,s,0];if("after"===l&&g<h&&w>E){var j=o||c,S=m!==j?O+1:O;return[n.id,j,S]}return["after","before"].includes(l)||p===u.GROUP&&g<h||g>h&&w>E||g<h&&w<E?null:[n.id,o||c,O]}(e,t);if(l&&null!=i&&i.hover){var a=(r=3,function(e){if(Array.isArray(e))return e}(n=l)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,l,a=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(a.push(r.value),a.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(c)throw o}}return a}}(n,r)||function(e,t){if(e){if("string"==typeof e)return j(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?j(e,t):void 0}}(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=a[0],c=a[1],s=a[2];i.hover(u,c,s)}}},(function(e){return{connectDropTarget:e.dropTarget()}}))((function(e){var t=e.id,n=e.parentId,r=e.position,i=e.style,l=e.children,a=e.connectDropTarget,u=e.nodeType;return a(o().createElement("div",{"data-id":P(t,r,!0),"data-node-id":t,"data-parent-node-id":n,className:"ms-drop-node".concat(u?" ".concat(u):""),style:i},l))}));const T=function(e){var t=e.children,n=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,w);return n.sortable?o().createElement(S,n,t):t};var C=["component"],x=["component"];function I(){return I=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},I.apply(null,arguments)}function D(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var N=(0,E.Ej)("node",{beginDrag:function(e){var t=e.node,n=e.parentId,r=e.index,o=e.sort,i=e.containerNode,l=e.nodeTypes;return o.beginDrag&&o.beginDrag(t.id),{id:t.id,parentId:n,index:r,nodeType:null!=t&&t.nodes?l.GROUP:l.LAYER,containerNode:i,nodeTypes:l}}},(function(e,t){return{connectDragSource:e.dragSource(),connectDragPreview:e.dragPreview(),isDragging:t.isDragging()}}))((function(e){var t=e.component,n=D(e,C);return o().createElement(t,n)}));const k=function(e){var t,n=e.component,r=D(e,x),i=r.replaceNodeOptions?r.replaceNodeOptions(r.node,r.nodeType):r.node,l=!(!1===(null==r||null===(t=r.config)||void 0===t?void 0:t.sortable)||!1===(null==i?void 0:i.sortable)),a=n;return l?o().createElement(N,I({},r,{sortable:l,component:n})):o().createElement(a,I({},r,{sortable:l,connectDragSource:function(e){return e},connectDragPreview:function(e){return e}}))};var L=n(898631);function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const A=function(e){var t,n,i=e.loading,l=(t=(0,r.useState)(i),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,l,a=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(a.push(r.value),a.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(c)throw o}}return a}}(t,n)||function(e,t){if(e){if("string"==typeof e)return R(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?R(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=l[0],u=l[1];return(0,r.useEffect)((function(){var e=setTimeout((function(){u(i)}),i?0:2e3);return function(){clearTimeout(e)}}),[i]),o().createElement("div",{className:"inline-loader-container"},o().createElement("div",{className:"inline-loader-bar",style:{display:a?"block":"none"}}))};var M=n(441609),G=n.n(M),_=n(281763),F=n.n(_),U=n(735563);function W(e){return W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},W(e)}function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,z(r.key),r)}}function H(e,t,n){return t=V(t),function(e,t){if(t&&("object"==W(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,$()?Reflect.construct(t,n||[],V(e).constructor):t.apply(e,n))}function $(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return($=function(){return!!e})()}function V(e){return V=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},V(e)}function Y(e,t){return Y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Y(e,t)}function q(e,t,n){return(t=z(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function z(e){var t=function(e,t){if("object"!=W(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=W(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==W(t)?t:t+""}var K=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),q(n=H(this,t,[e]),"state",{containerWidth:0,legendContainerStyle:{overflowX:"auto"}}),q(n,"canShow",(function(e){return e.visibility||!n.props.showOnlyIfVisible})),q(n,"useLegendOptions",(function(){return!G()(n.props.node.legendOptions)&&F()(n.props.node.legendOptions.legendHeight)&&F()(n.props.node.legendOptions.legendWidth)})),q(n,"setOverflow",(function(){return n.useLegendOptions()&&n.props.node.legendOptions.legendWidth>n.state.containerWidth})),n.containerRef=o().createRef(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Y(e,t)}(t,e),n=t,r=[{key:"componentDidMount",value:function(){var e=this.containerRef.current&&this.containerRef.current.clientWidth;this.setState(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach((function(t){q(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({containerWidth:e},this.state))}},{key:"render",value:function(){var e=this.props.node||{},t=this.canShow(e)&&"wms"===e.type&&"background"!==e.group,n=t&&this.useLegendOptions();return t?o().createElement("div",{style:this.setOverflow()?this.state.legendContainerStyle:this.props.legendContainerStyle,ref:this.containerRef},o().createElement(U.Z,{style:this.setOverflow()?{}:this.props.legendStyle,layer:e,currentZoomLvl:this.props.currentZoomLvl,scales:this.props.scales,legendHeight:n&&this.props.node.legendOptions&&this.props.node.legendOptions.legendHeight||this.props.legendHeight||void 0,legendWidth:n&&this.props.node.legendOptions&&this.props.node.legendOptions.legendWidth||this.props.legendWidth||void 0,legendOptions:this.props.WMSLegendOptions,scaleDependent:this.props.scaleDependent,language:this.props.language})):null}}],r&&B(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(o().Component);q(K,"propTypes",{node:l().object,legendContainerStyle:l().object,legendStyle:l().object,showOnlyIfVisible:l().bool,currentZoomLvl:l().number,scales:l().array,WMSLegendOptions:l().string,scaleDependent:l().bool,language:l().string,legendWidth:l().number,legendHeight:l().number}),q(K,"defaultProps",{legendContainerStyle:{},showOnlyIfVisible:!1,scaleDependent:!0});const Q=K;var X=n(1036),J=n(414293),ee=n.n(J),te=n(701469),ne=n.n(te);function re(e){return re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},re(e)}function oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,se(r.key),r)}}function ie(e,t,n){return t=ae(t),function(e,t){if(t&&("object"==re(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,le()?Reflect.construct(t,n||[],ae(e).constructor):t.apply(e,n))}function le(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(le=function(){return!!e})()}function ae(e){return ae=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ae(e)}function ue(e,t){return ue=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ue(e,t)}function ce(e,t,n){return(t=se(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function se(e){var t=function(e,t){if("object"!=re(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=re(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==re(t)?t:t+""}var de=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ie(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ue(e,t)}(t,e),n=t,r=[{key:"render",value:function(){var e=this;return this.props.hide?null:o().createElement("div",{className:"mapstore-slider ".concat(this.props.hideTooltip?"":"with-tooltip"),onClick:function(e){e.stopPropagation()}},this.props.hideTooltip?o().createElement(X.Z,{key:"no-tooltip",disabled:this.props.disabled,start:[ee()(this.props.opacity)?100:Math.round(100*this.props.opacity)],range:{min:0,max:100},onChange:function(t){ne()(t)&&t[0]&&e.props.onChange(parseFloat(t[0].replace(" %","")/100))}}):o().createElement(X.Z,{key:"tooltip",disabled:this.props.disabled,start:[ee()(this.props.opacity)?100:Math.round(100*this.props.opacity)],tooltips:[!0],format:{from:function(e){return Math.round(e)},to:function(e){return Math.round(e)+" %"}},range:{min:0,max:100},onChange:function(t){return e.props.onChange(parseFloat(t[0].replace(" %",""))/100)}}))}}],r&&oe(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(o().Component);ce(de,"propTypes",{hide:l().bool,opacity:l().number,disabled:l().bool,hideTooltip:l().bool,onChange:l().func}),ce(de,"defaultProps",{opacity:1,onChange:function(){},visibility:!0});const fe=de;var pe=n(808224);function ye(e){var t=e.style;return o().createElement(o().Fragment,null,"geostyler"===t.format&&o().createElement("div",{className:"ms-vector-legend"},(t.body.rules||[]).map((function(e){return o().createElement("div",{className:"ms-vector-legend-rule",key:e.ruleId},o().createElement(pe.Z,{rule:e}),o().createElement("span",null,e.name||""))}))))}ye.propTypes={style:l().object};const ve=ye;var me=n(815135),be=["children"],ge=(0,me.Z)((function(e){var t=e.children,n=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,be);return o().createElement("button",n,t)}));const he=function(e){var t=e.hide,n=e.value,r=e.onChange,i=e.mutuallyExclusive;return t?null:o().createElement(ge,{className:"ms-visibility-check".concat(n?" active":""),onClick:function(e){e.stopPropagation(),r(!n)},onContextMenu:function(e){e.stopPropagation()}},o().createElement(O.gG,{glyph:i?n?"radio-on":"radio-off":n?"checkbox-on":"checkbox-off"}))};var Oe=n(580628),Ee=["children","titleRef","idDropDown","keyProp"];function we(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function je(){return je=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},je.apply(null,arguments)}var Pe=(0,me.Z)((function(e){var t=e.children,n=e.titleRef,r=(e.idDropDown,e.keyProp,function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,Ee));return o().createElement("div",je({},r,{ref:n,className:"ms-node-title"}),t)}));const Se=(0,Oe.Z)((function(e){var t,n,i=e.node,l=void 0===i?{}:i,a=e.filterText,u=void 0===a?"":a,c=e.currentLocale,s=e.tooltipOptions,d=e.showTooltip,f=e.width,p=e.showFullTitle,y=(0,r.useRef)(),m=(t=(0,r.useState)(!1),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,l,a=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(a.push(r.value),a.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(c)throw o}}return a}}(t,n)||function(e,t){if(e){if("string"==typeof e)return we(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?we(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),b=m[0],g=m[1],h=(0,v.BC)({node:l,currentLocale:c,tooltipOptions:s}),O=h.title,E=void 0===O?"":O,w=h.tooltipText,j=void 0===w?"":w,P=d&&b?j:void 0;(0,r.useEffect)((function(){g(!(j===E&&!(y.current.clientWidth<y.current.scrollWidth)))}),[E,j,f,p]);var S="title-tooltip-".concat(null==l?void 0:l.id),T=(null==l?void 0:l.tooltipPlacement)||"top";if(!u)return o().createElement(Pe,{titleRef:y,idDropDown:S,keyProp:S,tooltip:P,tooltipPosition:T},E);var C=new RegExp(u.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"gi"),x=E.match(C);return x?o().createElement(Pe,{titleRef:y,idDropDown:S,keyProp:S,tooltip:P,tooltipPosition:T},E.split(C).map((function(e,t){return t<x.length?o().createElement(o().Fragment,{key:t},e,o().createElement("mark",null,x[t])):o().createElement(o().Fragment,{key:t},e)}))):o().createElement(Pe,{titleRef:y,idDropDown:S,keyProp:S,tooltip:P,tooltipPosition:T},E)})),Te=function(e){var t=e.node,n=e.filterText,r=e.currentLocale,i=e.tooltipOptions,l=e.beforeTitle,a=e.afterTitle,u=e.onClick,c=e.className,s=e.showTitleTooltip,d=e.showFullTitle;return o().createElement(o().Fragment,null,o().createElement("div",{className:"ms-node-header".concat(c?" ".concat(c):""),onClick:u},o().createElement("div",{className:"ms-node-header-info"},o().createElement("div",{className:"ms-node-header-addons"},l),o().createElement("div",{className:"ms-node-title-container"},o().createElement(Se,{node:t,filterText:n,currentLocale:r,tooltipOptions:i,showTooltip:s,showFullTitle:d})),o().createElement("div",{className:"ms-node-header-addons"},a))))};var Ce=["children"],xe=["onClick"];function Ie(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var De=(0,me.Z)((function(e){var t=e.children,n=Ie(e,Ce);return o().createElement("button",n,t)})),Ne=(0,me.Z)(O.gG);const ke=function(e){var t=e.onClick,n=Ie(e,xe);if(!t)return o().createElement(Ne,n);var r=n.glyph,i=n.tooltipId,l=n.tooltip,a=n.active,u=n.style,c=n.className,s=n.disabled;return o().createElement(De,{style:u,className:"".concat(c||"").concat(a?" active":""),disabled:s,tooltipId:i,tooltip:l,onClick:function(e){e.stopPropagation(),s||t(e)}},o().createElement(O.gG,{glyph:r}))},Le=function(e){var t=e.hide,n=e.expanded,r=e.disabled,i=e.onChange;return t?null:o().createElement("button",{className:"ms-node-expand",onClick:function(e){e.stopPropagation(),r||i({expanded:!n})},disabled:r},o().createElement(O.gG,{glyph:n?"bottom":"next"}))};var Re=n(805346);function Ae(e){return Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ae(e)}function Me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Me(Object(n),!0).forEach((function(t){_e(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _e(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Ae(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Ae(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ae(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Fe=function(e){var t=e.node,n=e.onChange,r=e.itemComponent,i=(t||{}).layerFilter;if(!i||!r)return null;var l=(i||{}).disabled;return o().createElement(r,{glyph:"filter",active:!l,tooltipId:l?"toc.filterIconDisabled":"toc.filterIconEnabled",onClick:function(){n({layerFilter:Ge(Ge({},i),{},{disabled:!i.disabled})})}})};function Ue(e){return Ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ue(e)}function We(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ze(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?We(Object(n),!0).forEach((function(t){Be(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):We(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Be(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Ue(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Ue(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ue(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function He(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function $e(){return $e=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$e.apply(null,arguments)}var Ve=function(e){var t,n,r,i,l=e.node,a=e.filterText,u=e.onChange,c=e.sortHandler,s=e.config,d=void 0===s?{}:s,f=e.nodeToolItems,p=void 0===f?[]:f,y=e.onSelect,v=e.nodeType,m=e.nodeTypes,g=e.error,O=e.visibilityWarningMessageId,E=e.visibilityCheck,w=e.nodeIcon,j=void 0!==(null==d?void 0:d.expanded),P=j?null==d?void 0:d.expanded:null==l?void 0:l.expanded,S=function(){var e;if(g||null!=d&&null!==(e=d.layerOptions)&&void 0!==e&&e.hideLegend)return null;var t,n,r,i,a,u=null==l?void 0:l.type;return["wfs","vector"].includes(u)?"geostyler"===(null==l||null===(t=l.style)||void 0===t?void 0:t.format)&&(null==l||null===(n=l.style)||void 0===n||null===(r=n.body)||void 0===r||null===(i=r.rules)||void 0===i?void 0:i.length)>0?o().createElement(o().Fragment,null,o().createElement("li",null,o().createElement(ve,{style:null==l?void 0:l.style}))):null:"wms"===u?o().createElement(o().Fragment,null,o().createElement("li",null,o().createElement(Q,$e({node:l,currentZoomLvl:null==d?void 0:d.zoom,scales:null==d?void 0:d.scales,language:null==d?void 0:d.language},null==d||null===(a=d.layerOptions)||void 0===a?void 0:a.legendOptions)))):null}(),T={node:l,onChange:u,nodeType:v,nodeTypes:m,itemComponent:ke},C=null!=d&&null!==(t=d.layerOptions)&&void 0!==t&&t.hideFilter?[]:[{name:"FilterLayer",Component:Fe}];return o().createElement(o().Fragment,null,o().createElement(Te,{node:l,className:v,filterText:a,currentLocale:null==d?void 0:d.currentLocale,tooltipOptions:null==d||null===(n=d.layerOptions)||void 0===n?void 0:n.tooltipOptions,onClick:y,showTitleTooltip:null==d?void 0:d.showTitleTooltip,showFullTitle:null==d?void 0:d.showFullTitle,beforeTitle:o().createElement(o().Fragment,null,c,o().createElement(Le,{hide:!(!j&&S),expanded:P,onChange:u}),E,w),afterTitle:o().createElement(o().Fragment,null,g?o().createElement(ke,{tooltip:o().createElement(Re.Z,{msgId:g.msgId,msgParams:g.msgParams}),glyph:"exclamation-mark"}):null,O&&o().createElement(ke,{glyph:"info-sign",tooltipId:O}),null!=d&&null!==(r=d.layerOptions)&&void 0!==r&&r.indicators?b()(d.layerOptions.indicators).map((function(e){return"dimension"===e.type&&h()((null==l?void 0:l.dimensions)||[],e.condition)?e.glyph&&o().createElement(ke,$e({onClick:!1,key:e.key,glyph:e.glyph},e.props)):null})):null,[].concat(C,(i=p,function(e){if(Array.isArray(e))return He(e)}(i)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(i)||function(e,t){if(e){if("string"==typeof e)return He(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?He(e,t):void 0}}(i)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())).filter((function(e){var t=e.selector;return(void 0===t?function(){return!0}:t)(T)})).map((function(e){var t=e.Component,n=e.name;return o().createElement(t,$e({key:n},T))})))}),P&&S?o().createElement("ul",null,S):null,o().createElement(fe,{hide:!!g||(null==d?void 0:d.hideOpacitySlider)||["3dtiles","model"].includes(null==l?void 0:l.type),opacity:null==l?void 0:l.opacity,disabled:!l.visibility,hideTooltip:!d.showOpacityTooltip,onChange:function(e){return u({opacity:e})}}))},Ye=function(e){var t,n=e.node,r=e.parentId,i=e.connectDragPreview,l=void 0===i?function(e){return e}:i,u=e.connectDragSource,c=void 0===u?function(e){return e}:u,s=e.index,d=e.sort,f=e.filter,p=void 0===f?function(){return!0}:f,y=e.filterText,m=e.replaceNodeOptions,b=void 0===m?function(e){return e}:m,g=e.onChange,h=void 0===g?function(){}:g,E=e.onContextMenu,w=void 0===E?function(){}:E,j=e.onSelect,P=void 0===j?function(){}:j,S=e.getNodeStyle,C=void 0===S?function(){}:S,x=e.getNodeClassName,I=void 0===x?function(){return""}:x,D=e.mutuallyExclusive,N=e.nodeType,k=e.sortable,R=e.config,M=e.nodeToolItems,G=void 0===M?[]:M,_=e.nodeItems,F=void 0===_?[]:_,U=e.nodeTypes,W=e.theme,Z=b(n,N),B=null!==(t=null==Z?void 0:Z.error)&&void 0!==t?t:(0,v.EM)(Z),H=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.visualizationMode===L.nU._2D&&["3dtiles","model"].includes(e.type))return"toc.notVisibleSwitchTo3D";if(t.visualizationMode===L.nU._3D&&["cog"].includes(e.type))return"toc.notVisibleSwitchTo2D";if(void 0!==t.resolution&&!(0,a.T4)(e,t.resolution)){var n=e.maxResolution||1/0;return t.resolution>=n?"toc.notVisibleZoomIn":"toc.notVisibleZoomOut"}return"Warning"===e.loadingError?"toc.toggleLayerVisibilityWarning":""}(Z,R),$=Ze(Ze({},Z),{},{error:B,visibilityWarningMessageId:H});function V(e){h({node:n,nodeType:N,parentId:r,options:e})}if(!p($,N,r))return null;var Y=(0,a.jg)($),q={index:s,parentId:r,theme:W,node:$,filterText:y,onChange:V,mutuallyExclusive:D,config:R,nodeToolItems:G,onSelect:function(e){e.stopPropagation(),e.preventDefault(),P({node:n,nodeType:N,parentId:r,event:e})},nodeType:N,error:B,visibilityWarningMessageId:H,nodeTypes:U,sortHandler:k?c(o().createElement("div",{className:"grab-handle",onClick:function(e){return e.stopPropagation()}},o().createElement(O.gG,{glyph:"grab-handle"}))):o().createElement("div",{className:"grab-handle disabled"}),visibilityCheck:o().createElement(he,{hide:null==R?void 0:R.hideVisibilityButton,mutuallyExclusive:D,value:!(null==$||!$.visibility),onChange:function(e){V({visibility:e})}}),nodeIcon:o().createElement(O.gG,{className:"ms-node-icon",glyph:Y})},z=C($,N),K=I($,N),Q=F.filter((function(e){var t=e.selector;return(void 0===t?function(){return!1}:t)(q)}));return l(o().createElement("li",{className:"ms-node ms-node-layer".concat(null!=$&&$.dragging?" dragging":"").concat(K?" ".concat(K):""),style:z,onContextMenu:function(e){e.stopPropagation(),e.preventDefault(),w({node:n,nodeType:N,parentId:r,event:e})}},o().createElement(T,{sortable:k,sort:d,nodeType:N,index:s,id:$.id,parentId:r},o().createElement(A,{loading:null==$?void 0:$.loading}),Q.length?Q.map((function(e){var t=e.Component,n=e.name;return o().createElement(t,$e({key:n},q,{defaultLayerNodeComponent:Ve}))})):o().createElement(Ve,q))))};const qe=function(e){return o().createElement(k,$e({},e,{component:Ye}))};function ze(e){return ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ze(e)}var Ke=["node","parentId","children","connectDragPreview","connectDragSource","mutuallyExclusive","sortable","nodeType"];function Qe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qe(Object(n),!0).forEach((function(t){Je(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Je(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=ze(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=ze(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ze(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function et(){return et=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},et.apply(null,arguments)}var tt=function(e){var t,n=e.node,r=e.nodeType,i=e.nodeTypes,l=e.config,a=e.onSelect,u=e.onChange,c=e.nodeToolItems,s=void 0===c?[]:c,d=e.sortHandler,f=e.expandButton,p=e.visibilityCheck,y=e.nodeIcon,v={node:n,onChange:u,nodeType:r,nodeTypes:i,itemComponent:ke};return o().createElement(o().Fragment,null,o().createElement(Te,{node:n,nodeType:r,currentLocale:null==l?void 0:l.currentLocale,tooltipOptions:null==l||null===(t=l.groupOptions)||void 0===t?void 0:t.tooltipOptions,showFullTitle:null==l?void 0:l.showFullTitle,onClick:a,showTitleTooltip:null==l?void 0:l.showTitleTooltip,beforeTitle:o().createElement(o().Fragment,null,d,f,p,y),afterTitle:o().createElement(o().Fragment,null,n.error?o().createElement(ke,{tooltipId:"toc.loadingerror",glyph:"exclamation-mark"}):null,s.filter((function(e){var t=e.selector;return(void 0===t?function(){return!0}:t)(v)})).map((function(e){var t=e.Component,n=e.name;return o().createElement(t,et({key:n},v))})))}))},nt=function(e){var t,n,i,l=e.node,a=e.parentId,u=e.children,c=e.connectDragPreview,s=void 0===c?function(e){return e}:c,d=e.connectDragSource,f=void 0===d?function(e){return e}:d,p=e.mutuallyExclusive,y=e.sortable,v=e.nodeType,m=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,Ke),b=m.sort,g=m.index,h=m.filter,E=void 0===h?function(){return!0}:h,w=m.replaceNodeOptions,j=void 0===w?function(e){return e}:w,P=m.filterText,S=m.onChange,C=void 0===S?function(){}:S,x=m.onContextMenu,I=void 0===x?function(){}:x,D=m.onSelect,N=void 0===D?function(){}:D,k=m.getNodeStyle,L=void 0===k?function(){}:k,R=m.getNodeClassName,M=void 0===R?function(){return""}:R,G=m.nodeTypes,_=m.config,F=m.nodeItems,U=void 0===F?[]:F,W=m.nodeToolItems,Z=void 0===W?[]:W,B=m.theme,H=j(l,v);function $(e){C({node:l,nodeType:v,parentId:a,options:e})}if(!E(H,v,a))return null;var V=void 0!==(null==_?void 0:_.expanded),Y=V?null==_?void 0:_.expanded:null===(t=null==H?void 0:H.expanded)||void 0===t||t,q=L(l,v),z=M(l,v),K={index:g,parentId:a,theme:B,node:H,filterText:P,nodeType:v,nodeTypes:G,config:_,onSelect:function(e){e.stopPropagation(),e.preventDefault(),N({node:l,nodeType:v,parentId:a,event:e})},onChange:$,nodeToolItems:Z,mutuallyExclusive:p,visibilityCheck:o().createElement(he,{hide:null==_?void 0:_.hideVisibilityButton,mutuallyExclusive:p,value:null==H?void 0:H.visibility,onChange:function(e){$({visibility:e})}}),expandButton:o().createElement(Le,{hide:!!V,expanded:Y,onChange:$,disabled:!!P}),sortHandler:y?f(o().createElement("div",{className:"grab-handle",onClick:function(e){return e.stopPropagation()}},o().createElement(O.gG,{glyph:"grab-handle"}))):o().createElement("div",{className:"grab-handle disabled"}),nodeIcon:o().createElement(O.gG,{className:"ms-node-icon",glyph:Y?"folder-open":"folder-close"})},Q=U.filter((function(e){var t=e.selector;return(void 0===t?function(){return!1}:t)(K)}));return s(o().createElement("li",{className:"ms-node ms-node-group".concat(null!=H&&H.dragging?" dragging":"").concat(z?" ".concat(z):""),style:q,onClick:function(e){return e.stopPropagation()},onContextMenu:function(e){e.stopPropagation(),e.preventDefault(),I({node:l,nodeType:v,parentId:a,event:e})}},o().createElement(T,{nodeType:v,index:g,id:H.id,parentId:a,sort:b,sortable:y},o().createElement(A,{loading:null==H?void 0:H.loading}),Q.length?Q.map((function(e){var t=e.Component,n=e.name;return o().createElement(t,et({key:n},K,{defaultGroupNodeComponent:tt}))})):o().createElement(tt,K)),Y?o().createElement("ul",null,o().createElement(T,{sortable:y,sort:b,nodeType:v,index:g,id:H.id,position:"before",parentId:a},o().createElement("div",{style:{display:"flex",height:8}})),null==H||null===(n=H.nodes)||void 0===n||null===(i=n.map)||void 0===i?void 0:i.call(n,(function(e,t){return(0,r.cloneElement)(u,Xe(Xe({},m),{},{key:e.id,node:e,parentId:H.id,index:t,mutuallyExclusive:null==H?void 0:H.nodesMutuallyExclusive,onChange:function(e){var t;return(null==e?void 0:e.parentId)===(null==H?void 0:H.id)&&void 0!==(null==e||null===(t=e.options)||void 0===t?void 0:t.visibility)&&null!=H&&H.nodesMutuallyExclusive?(H.nodes.forEach((function(t){var n;t.id!==(null==e||null===(n=e.node)||void 0===n?void 0:n.id)&&C({node:t,nodeType:null!=t&&t.nodes?G.GROUP:G.LAYER,parentId:null==H?void 0:H.id,options:{visibility:!1}})})),C(Xe(Xe({},e),{},{options:Xe(Xe({},null==e?void 0:e.options),{},{visibility:!0})}))):C(e)}}))}))):null,o().createElement(T,{sortable:y,sort:b,nodeType:v,index:g,id:H.id,position:"after",parentId:a},o().createElement("div",{style:{display:"flex",height:8}}))))};const rt=function(e){return o().createElement(k,et({},e,{component:nt}))};function ot(e){return ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ot(e)}function it(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?it(Object(n),!0).forEach((function(t){at(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):it(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function at(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=ot(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=ot(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ot(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ut(e){return function(e){if(Array.isArray(e))return dt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||st(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ct(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,l,a=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(a.push(r.value),a.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(c)throw o}}return a}}(e,t)||st(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function st(e,t){if(e){if("string"==typeof e)return dt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?dt(e,t):void 0}}function dt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var ft=function(e){var t=e.node,n=e.filterText,r=e.currentLocale;return(0,v.BC)({node:t,currentLocale:r}).title.toLowerCase().includes(n.toLocaleLowerCase())},pt=function e(t){var n,r=t.node,o=t.filterText,i=t.currentLocale;return!(null==r||null===(n=r.nodes)||void 0===n||!n.find((function(t){return null!=t&&t.nodes?e({node:t,filterText:o,currentLocale:i}):ft({node:t,filterText:o,currentLocale:i})})))},yt=function e(t,n){var r;return!(null==t||null===(r=t.nodes)||void 0===r||!r.find((function(t){return!!n(t)||(null!=t&&t.nodes?!!e(t,n):!!n(t))})))};const vt=function(e){var t=e.tree,n=e.filterText,i=e.onSort,l=void 0===i?function(){}:i,u=e.onChange,c=void 0===u?function(){}:u,s=e.groupNodeComponent,d=void 0===s?rt:s,f=e.layerNodeComponent,p=void 0===f?qe:f,m=e.onContextMenu,b=void 0===m?function(){}:m,g=e.onSelect,h=void 0===g?function(){}:g,O=e.contextMenu,E=e.selectedNodes,w=void 0===E?[]:E,j=e.rootGroupId,P=void 0===j?a.oR:j,S=e.defaultGroupId,T=void 0===S?a.tE:S,C=e.nodeTypes,x=void 0===C?a.$P:C,I=e.noFilteredResultsMsgId,D=void 0===I?"toc.noFilteredResults":I,N=e.config,k=void 0===N?{}:N,L=e.className,R=e.nodeItems,A=e.nodeToolItems,M=e.singleDefaultGroup,G=void 0===M?(0,v.js)(t):M,_=e.theme,F=(0,r.useRef)(),U=G?t[0].nodes:t,W=G?T:P,Z=ct((0,r.useState)(null),2),B=Z[0],H=Z[1],$=function(e){var t=(e||"").split(".");return t[t.length-1]},V=ct((0,r.useState)(!1),2),Y=V[0],q=V[1];(0,r.useLayoutEffect)((function(){var e,t;q(0===(null==F||null===(e=F.current)||void 0===e||null===(t=e.children)||void 0===t?void 0:t.length))}),[n]);var z=function(){return{}},K=function(e){var t=w.find((function(t){return e.id===t.id})),n=(null==O?void 0:O.id)===e.id,r=e.visibilityWarningMessageId||!1===e.visibility||!0===e.inactive;return[].concat(ut(n?["focused"]:[]),ut(t?["selected"]:[]),ut(e.error?["error"]:[]),ut(r?["inactive"]:[])).join(" ")};return o().createElement("div",{className:"ms-layers-tree".concat(L?" ".concat(L):"").concat(_?" ".concat(_,"-tree"):"").concat(k.showFullTitle||n?"":" single-line-title"),onPointerLeave:function(){B&&H(null)}},o().createElement("ul",{ref:F,"data-root-parent-id":W,onContextMenu:function(e){e.preventDefault()}},(U||[]).map((function(e,t){return o().createElement(y,{containerNode:F.current,key:e.id,index:t,node:e,groupElement:(i=d,o().createElement(i,null)),layerElement:(r=p,o().createElement(r,null)),nodeTypes:x,replaceNodeOptions:function(e,t){return lt(lt(lt(lt(lt(lt(lt({},e),B&&$(B)===$(e.id)&&{dragging:!0}),n&&{sortable:!1}),t===x.GROUP&&n&&{expanded:!0}),t===x.GROUP&&(null==e?void 0:e.id)===T&&{sortable:!1}),t===x.GROUP&&yt(e,(function(e){return"Error"===e.loadingError}))&&{error:!0}),t===x.GROUP&&yt(e,(function(e){return e.loading}))&&{loading:!0})},getNodeStyle:z,getNodeClassName:K,filterText:n,config:k,theme:_,filter:function(e,t){return t===x.GROUP&&n?pt({node:e,filterText:n}):t!==x.LAYER||!n||ft({node:e,filterText:n,currentLocale:k.currentLocale})},sort:{beginDrag:function(e){H(e)},hover:function(e,t,n){l(e,t,n)},drop:function(){H(null)}},onChange:c,onContextMenu:b,onSelect:h,nodeItems:R,nodeToolItems:A});var r,i}))),Y&&n?o().createElement(Re.Z,{msgId:D}):null)};var mt=n(552259);function bt(e){return bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bt(e)}function gt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ht(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gt(Object(n),!0).forEach((function(t){Ot(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ot(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=bt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=bt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==bt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Et(e){var t=e.tree,n=e.contextMenu,r=e.onSort,i=void 0===r?function(){}:r,l=e.onChange,u=void 0===l?function(){}:l,c=e.onSelectNode,s=void 0===c?function(){}:c,d=e.onContextMenu,f=void 0===d?function(){}:d,p=e.groupNodeComponent,y=e.layerNodeComponent,v=e.filterText,m=e.selectedNodes,b=e.rootGroupId,g=e.nodeTypes,h=void 0===g?a.$P:g,O=e.config,E=void 0===O?{}:O,w=e.className,j=e.nodeItems,P=e.nodeToolItems,S=e.singleDefaultGroup,T=e.theme;return o().createElement(vt,{className:w,theme:T,tree:t,filterText:v,onSort:i,onChange:function(e){var t=e.options,n=e.node,r=e.nodeType;return u(n.id,r,t)},groupNodeComponent:p,layerNodeComponent:y,contextMenu:n,onContextMenu:f,selectedNodes:m,onSelect:function(e){var t=e.event,n=e.node,r=e.nodeType;return s(n.id,r===h.GROUP?"group":"layer",null==t?void 0:t.ctrlKey)},nodeTypes:h,rootGroupId:b,config:E,nodeItems:j,nodeToolItems:P,singleDefaultGroup:S})}const wt=function(e){var t=e.map,n=void 0===t?{layers:[],groups:[]}:t,r=e.onChangeMap,i=void 0===r?function(){}:r,l=e.selectedNodes,u=void 0===l?[]:l,c=e.onSelectNode,s=void 0===c?function(){}:c,d=e.config,f=e.className,p=e.nodeToolItems,y=e.singleDefaultGroup,m=e.nodeItems,b=e.theme,g=((0,a.DN)(n)||{}).layers,h=(0,a.C1)(g.flat||[],g.groups||[]).groups;function O(e,t){var r,o,l=(0,mt.QZ)(n,e||g.flat,t||g.groups,[]),a=ht(ht({},n),{},{layers:null==l||null===(r=l.map)||void 0===r?void 0:r.layers,groups:null==l||null===(o=l.map)||void 0===o?void 0:o.groups});i(a)}return o().createElement(Et,{className:f,theme:b,tree:h,selectedNodes:(0,v.HC)(u,g.flat,h),onSelectNode:s,onSort:function(e,t,n){var r=(0,a.tV)({groups:g.groups,layers:g.flat},{node:e,index:n,groupId:t});r&&O(r.layers,r.groups)},onChange:function(e,t,n){var r=(0,a.Yt)({groups:g.groups,layers:g.flat},{node:e,nodeType:t,options:n});O(r.layers,r.groups)},config:d,nodeItems:m,nodeToolItems:p,singleDefaultGroup:y})}},815430:(e,t,n)=>{"use strict";n.d(t,{Sk:()=>b,js:()=>g,gP:()=>h,BC:()=>E,fu:()=>j,EM:()=>S,HC:()=>C});var r=n(513218),o=n.n(r),i=n(227361),l=n.n(i),a=n(414293),u=n.n(a),c=n(624262),s=n(916651),d=n(91175),f=n.n(d);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=p(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==p(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b={DESELECT:"DESELECT",GROUP:"GROUP",LAYER:"LAYER",BOTH:"BOTH",GROUPS:"GROUPS",LAYERS:"LAYERS"},g=function(e){var t,n,r,o;return!(1!==(null==e?void 0:e.length)||null==e||null===(t=e[0])||void 0===t||!t.nodes||(null==e||null===(n=e[0])||void 0===n?void 0:n.id)!==c.tE||!1===(null==e||null===(r=e[0])||void 0===r?void 0:r.visibility)||!0===(null==e||null===(o=e[0])||void 0===o?void 0:o.nodesMutuallyExclusive))},h=function(e){var t=e.label,n=RegExp("^/|/$|/{2,}");return!(!t||n.test(t))},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"title",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:" - ";switch(e){case"title":return(o()(t.title)?t.title[n]||t.title.default:t.title)||t.name||"";case"description":return t.description||"";case"both":var i=(o()(t.title)?t.title[n]||t.title.default:t.title)||t.nam||"",l=t.description||"";return"".concat(i).concat(r&&l?r:"").concat(l);default:return t[e]}},E=function(e){var t=e.node,n=e.currentLocale,r=e.tooltipOptions,o=void 0===r?{separator:" - ",maxLength:807}:r,i=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:" - ";return O(e.tooltipOptions,e,t,n)}(t,n,o.separator)||"";return(i=i&&i.substring(0,o.maxLength)).length===o.maxLength&&(i+="..."),{title:O("title",t,n,o.separator),tooltipText:i}},w=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return f()(n.filter((function(e){return e.label===t})))||n.reduce((function(n,r){return n||!!r.nodes&&e(t,r.nodes)}),void 0)},j=function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").replace(/[^\.\/]+/g,(function(t){var n=l()(w(t,e),"label");return e&&n||t}));return(t=t.replace(/\./g,"/")).replace(/\${dot}/g,".")},P=function(e){var t,n;return(null==e||null===(t=e.bbox)||void 0===t?void 0:t.crs)||(null==e||null===(n=e.sourceMetadata)||void 0===n?void 0:n.crs)},S=function(e){return"Error"===e.loadingError?{msgId:"toc.loadingerror"}:function(e){var t=P(e);return!!u()(t)||(0,s.isSRSAllowed)(t)}(e)?null:{msgId:"toc.sourceCRSNotCompatible",msgParams:{sourceCRS:P(e)}}},T=function e(t,n){return(null==n?void 0:n.id)===t?n:null==n?void 0:n.nodes.reduce((function(n,r){return null!==n?n:null!=r&&r.nodes?e(t,r):null}),null)},C=function(e,t,n){return e.map((function(e){var r=t.find((function(t){var n=t.id;return e===n}));if(r){var o=S(r);return{id:e,node:v(v({},r),{},{error:o}),type:c.$P.LAYER}}var i=T(e,{nodes:n});return i?{id:e,node:i,type:c.$P.GROUP}:null})).filter((function(e){return!!e}))}}}]);